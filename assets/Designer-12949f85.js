import{r as s,a as r,j as e,R as I,F as M}from"./index-08321b18.js";import{N as U}from"./Nav-e29676b4.js";import{f as E,r as F,e as _,u as A,h as L,_ as b,d as f,b as x,c as w,y as O}from"./index.esm2017-11e8e1f2.js";import{M as $}from"./Modal-b237895d.js";import{B as q}from"./Box-0c9e546f.js";import{T as H}from"./Typography-ea5ae010.js";import"./User-de36e4e3.js";function V({setDesignerData:n}){const d=async()=>{try{return E.collection("DesignerPage").orderBy("prio","desc").onSnapshot(m=>{const u=m.docs.map(c=>({id:c.id,...c.data()}));n(u)})}catch(l){console.error("Error fetching designer data:",l)}};s.useEffect(()=>{d()},[])}function z(){return r("div",{className:"border-yellow-500 border-t-2 mt-3",children:[e("h1",{className:"mt-5 mb-5",children:"Squarelion Designer Page"}),r("div",{className:"flex flex-row items-center gap-4 ",children:[e("l1",{children:"Step 1 : Click choose file to upload image"}),e("l1",{children:"Step 2 : Click upload image"}),e("l1",{children:"Step 3 : Click view to view image"}),e("l1",{children:"Step 4 : Click Done to complete"})]}),e("section",{className:"mt-5",children:e("h1",{children:" Note to view the content click on view "})})]})}const G={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function ee(){const[n,d]=s.useState([]),[l,m]=s.useState(""),[u,c]=s.useState(""),[k,y]=s.useState(""),[N,S]=s.useState(""),[D,v]=I.useState(!1),C=()=>v(!0),R=()=>v(!1);function j(o){n.map((t,h)=>{if(o===h){const p=F(_(),`products/${l}`),i=A(p,l);i.on("state_changed",a=>{a.bytesTransferred/a.totalBytes*100},a=>{console.error(a)},async()=>{const a=await L(i.snapshot.ref),g=b(f,"DesignerPage"),B=x(g,t.post+t.month+t.page);w(B,{designer:a},{merge:!0}),console.log("success"),y("Image has been uploaded. Click view button to view image!"),setTimeout(()=>{y("")},7e3)},{merge:!0})}else return console.log("error")})}const P=o=>{const t=o.target.files[0];m(t)};function T(o){n.map((t,h)=>{if(o===h){console.log("success",t.post);const p=b(f,t.page),i=x(p,t.post+t.month);w(i,{designer:t.designer,hide:!0,color:"#00eaff",status:"Design Done",StatusText:"Design Done"},{merge:!0});const a=b(f,"DesignerPage"),g=x(a,t.post+t.month+t.page);O(g)}else return console.log("error")})}return s.useState(!1),r(M,{children:[e(U,{}),e("section",{children:e(z,{})}),r("div",{className:"min-h-[100vh] bg-slate-600 pt-[100px]",children:[r("div",{className:"flex flex-col items-center",children:[e(V,{setDesignerData:d}),e("section",{children:n.map((o,t)=>o.hide===!0?null:r("div",{className:"flex flex-row items-center justify-end border-black border-b-2 mb-8",children:[e("img",{src:o.img,className:"w-[50px] h-[50px] rounded-md mr-4"}),r("p",{className:"text-black  bg-white text-md border-black border-2 p-2",children:[" Post: ",o.post," "]}),r("p",{className:"text-black  bg-white text-md border-black border-2 p-2",children:[" Date : ",o.date,"-",o.month," "]}),r("p",{className:"text-black  bg-white text-md border-black border-2 p-2",children:[" Client : ",o.page," "]}),r("p",{className:`text-black text-md border-black border-2 p-2 ${o.prio==="Prio"?"bg-red-600":"bg-white"}`,children:["  ",o.prio," "]}),e("h1",{className:"cursor-pointer text-black  bg-white text-md border-black border-2 p-2  hover:scale-110 transition-transform ",onClick:()=>{C(),c(o.designer),S(o.subject)},children:" View "}),r("form",{onSubmit:()=>{j(t)},className:"designer-upload  mr-5 ml-4",children:[e("input",{type:"file",className:"mb-5 mr-5",onChange:P,style:{width:"90px"}}),e("button",{className:"relative inline-flex items-center justify-center p-0.5 mb-2 mr-2 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-cyan-500 to-blue-500 group-hover:from-cyan-500 group-hover:to-blue-500 hover:text-white dark:text-white focus:ring-4 focus:outline-none focus:ring-cyan-200 dark:focus:ring-cyan-800",children:e("span",{className:" relative px-5 py-2.5 transition-all ease-in duration-75 bg-white dark:bg-gray-900 rounded-md group-hover:bg-opacity-0",children:"Upload Image"})})]}),e("div",{children:o.designer===void 0?null:e("button",{className:"relative inline-flex items-center justify-center p-0.5 mb-2 mr-2 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-cyan-500 to-blue-500 group-hover:from-cyan-500 group-hover:to-blue-500 hover:text-white dark:text-white focus:ring-4 focus:outline-none focus:ring-cyan-200 dark:focus:ring-cyan-800",onClick:()=>{T(t)},children:e("span",{className:" relative px-5 py-2.5 transition-all ease-in duration-75 bg-white dark:bg-gray-900 rounded-md group-hover:bg-opacity-0",children:"Done"})})})]},t))})]}),e("div",{className:"fixed bottom-0 bg-slate-200 w-full  ",children:e("h2",{className:"text-xl ml-4",children:k})})]}),e($,{open:D,onClose:R,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",className:"max-w-[80vw] max-h-[80vw]  ",children:e(q,{sx:G,children:r(H,{id:"modal-modal-title",variant:"h6",component:"h2",style:{textAlign:"center"},children:[r("h1",{children:[" ",N," "]}),e("img",{src:u})]})})})]})}export{ee as default};
