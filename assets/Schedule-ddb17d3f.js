import{r as a,u as v,j as t,F as p,a as s,E as D,h as m}from"./index-7a661287.js";function j({user:d,level:g,uuid:P}){const[o,u]=a.useState([]),f=v();a.useState(""),a.useState(""),a.useState("");const x=async()=>{try{return m.collection("partner").onSnapshot(r=>{const c=r.docs.map(n=>({id:n.id,...n.data()}));u(c)})}catch(e){console.error("Error fetching data: ",e)}};a.useEffect(()=>{x()},[d]);const[w,h]=a.useState([]),y=async()=>{try{const e=JSON.parse(localStorage.getItem("cachedData")||"[]");if(e.length>0){h(e);return}const r=o.map(l=>m.collection(l.name).where("status","==","pending").get().then(S=>S.docs.map(i=>({id:i.id,status:i.data().status,...i.data()})))),n=(await Promise.all(r)).flat();localStorage.setItem("cachedData",JSON.stringify(n)),h(n.filter(l=>l.status!==0))}catch(e){console.error("Error fetching data:",e)}};a.useEffect(()=>{y()},[o]);const[N,b]=a.useState(!1);return t(p,{children:s("div",{className:" animate-fade-right animate-once animate-duration-[3000ms] animate-ease-in  overflow-hidden flex flex-wrap items-center gap-2 justify-center sm:w-[70vw] laptop:w-[80vw] laptop:content-start laptopL:overflow-y-scroll phones:p-0  p-5 m-auto  border-2 border-slate-700/50 ",children:[t("section",{className:"",children:N&&s("div",{className:" flex-col  fixed top-0 w-[100vw] bg-slate-600 left-0 z-[100] flex items-center justify-center h-[100vh]",children:[t("img",{src:D,className:"w-[100px] h-[100px]"}),t("p",{className:"text-white text-2xl animate-bounce",children:"Loading..."})]})}),s("table",{className:"w-full text-sm text-left text-gray-400 shadow-md shadow-slate-800",children:[s("caption",{className:"p-5 text-lg font-semibold text-left phones:text-center  text-white bg-gray-800",children:["Squarelion Agency Partners",t("p",{className:"mt-1 text-sm font-normal text-gray-400",children:"Click on any of the images to view the partner page"})]}),t("thead",{className:"text-xs  uppercase bg-gray-700 text-gray-400",children:s("tr",{children:[t("th",{scope:"col",className:"px-2 py-3",children:"Source"}),t("th",{scope:"col",className:"px-6 py-3",children:"Name"}),t("th",{scope:"col",className:" py-3",children:"Pending Post"})]})}),t("tbody",{children:o.map((e,r)=>e.name!=="Test"&&s("tr",{className:" border-b bg-gray-800 border-gray-700",children:[t("th",{scope:"row",className:"px-1 py-1 font-medium  whitespace-nowrap text-white",children:t("img",{className:"bg-slate-200 ml-3 mt-3 mb-3 mr-3 w-[30px] h-[30px] rounded-md cursor-pointer hover:scale-105 transition duration-300 ease-in-out",src:e.imageUrl,onClick:()=>{localStorage.setItem("partner",e.name),localStorage.setItem("image",e.imageUrl),localStorage.setItem("preset",e.Preset||"No preset available"),b(!0),setTimeout(()=>{f(`/profile/${e.name}`)},500)}})}),t("th",{scope:"row",className:"px-1 py-1 font-medium  whitespace-nowrap text-white",children:e.name}),t("td",{className:"px-1 py-1",children:g>8&&e.name!=="Test"&&t(p,{children:s("p",{children:["Pending:"," ",w.filter(c=>c.client===e.name&&c.status!=="Approved").length," "]})})})]},r))})]})]})})}export{j as default};
