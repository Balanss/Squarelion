import{r as e,j as s}from"./index-43550a69.js";import{U as L,c as W,_ as f,d as q,b as R,m as z,y as G}from"./index.esm2017-07908608.js";const h="https://Balanss.github.io/Squarelion/assets/mad-a548d970.png",g="https://Balanss.github.io/Squarelion/assets/angry-41c56047.png",m="https://Balanss.github.io/Squarelion/assets/poker-face-4a70decb.png",j="https://Balanss.github.io/Squarelion/assets/smile-7266816c.png",k="https://Balanss.github.io/Squarelion/assets/star-b68b1eaa.png";function K(){const[r,B]=e.useState(""),[E,I]=e.useState(""),[Q,U]=e.useState(""),[n,T]=e.useState([]);e.useEffect(()=>{(async()=>{try{const i=await W(f(q,"survey"+r)),o=[];i.forEach(c=>{const S={id:c.id,...c.data()};S.id!=="open"&&o.push(S)});const u=i.docs.find(c=>c.id==="open");u&&o.push({id:u.id,...u.data()}),T(o)}catch(i){console.error("Error retrieving surveys:",i)}})()},[r]);const[y,w]=e.useState("bus"),[C,l]=e.useState(""),[b,a]=e.useState(""),[N,d]=e.useState(""),[v,p]=e.useState(""),[F,x]=e.useState("");e.useState("");const $=()=>{const i=(n.findIndex(o=>o.id===y)+1)%n.length;w(n[i].id)};function D(t){n.map((i,o)=>{const u=C- -b- -N- -v- -F;if(o===t){const c=f(q,"survey"+r),S=R(c,i.id);z(S,{rating:C,rating1:b,rating2:N,rating3:v,rating4:F,score:u},{merge:!0})}})}function _(){const t=f(q,"survey"+r),i=R(t,"open");G(i)}const A=n.filter(t=>t.id==="open"?t.id:null);return s.jsxs(s.Fragment,{children:[s.jsx(L,{setUser:B,user:r,level:E,setLevel:I,setUuid:U,uuid:Q}),s.jsx("div",{className:"survey-div",children:s.jsxs("div",{className:"survey-paper",children:[s.jsx("h1",{style:{color:"black"},children:" Squarelion Agency Survey "}),A.length===1?n.map((t,i)=>s.jsxs("div",{children:[y===t.id&&t.id!=="open"&&s.jsxs("h2",{style:{color:"black",maginBottom:"60px"},onClick:()=>w(t.id),children:["Topic: ",t.id,"  ",`${i+1} / ${n.length}`," "]}),y===t.id&&t.id!=="open"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:t.question0>""?"questions-tap":"",children:t.question0>""&&s.jsxs(s.Fragment,{children:[s.jsxs("p",{style:{color:"black"},children:["Question 1: ",t.question0]}),s.jsxs("div",{className:"emoji-rating",children:[s.jsx("img",{src:h,style:{width:"30px",cursor:"pointer"},onClick:()=>l(1)}),s.jsx("img",{src:g,style:{width:"30px",cursor:"pointer"},onClick:()=>l(2)}),s.jsx("img",{src:m,style:{width:"30px",cursor:"pointer"},onClick:()=>l(3)}),s.jsx("img",{src:j,style:{width:"30px",cursor:"pointer"},onClick:()=>l(4)}),s.jsx("img",{src:k,style:{width:"30px",cursor:"pointer"},onClick:()=>l(5)})]})]})}),s.jsx("div",{className:t.question1>""?"questions-tap":"",children:t.question1>""&&s.jsxs(s.Fragment,{children:["   ",s.jsxs("p",{style:{color:"black"},children:["Question 2: ",t.question1]}),s.jsxs("div",{className:"emoji-rating",children:[s.jsx("img",{src:h,style:{width:"30px",cursor:"pointer"},onClick:()=>a(1)}),s.jsx("img",{src:g,style:{width:"30px",cursor:"pointer"},onClick:()=>a(2)}),s.jsx("img",{src:m,style:{width:"30px",cursor:"pointer"},onClick:()=>a(3)}),s.jsx("img",{src:j,style:{width:"30px",cursor:"pointer"},onClick:()=>a(4)}),s.jsx("img",{src:k,style:{width:"30px",cursor:"pointer"},onClick:()=>a(5)})]})," "]})}),s.jsx("div",{className:t.question2>""?"questions-tap":"",children:t.question2>""&&s.jsxs(s.Fragment,{children:["  ",s.jsxs("p",{style:{color:"black"},children:["Question 3: ",t.question2]}),s.jsxs("div",{className:"emoji-rating",children:[s.jsx("img",{src:h,style:{width:"30px",cursor:"pointer"},onClick:()=>d(1)}),s.jsx("img",{src:g,style:{width:"30px",cursor:"pointer"},onClick:()=>d(2)}),s.jsx("img",{src:m,style:{width:"30px",cursor:"pointer"},onClick:()=>d(3)}),s.jsx("img",{src:j,style:{width:"30px",cursor:"pointer"},onClick:()=>d(4)}),s.jsx("img",{src:k,style:{width:"30px",cursor:"pointer"},onClick:()=>d(5)})]})," "]})}),s.jsx("div",{className:t.question3>""?"questions-tap":"",children:t.question3>""&&s.jsxs(s.Fragment,{children:["  ",s.jsxs("p",{style:{color:"black"},children:["Question 4: ",t.question3]}),s.jsxs("div",{className:"emoji-rating",children:[s.jsx("img",{src:h,style:{width:"30px",cursor:"pointer"},onClick:()=>p(1)}),s.jsx("img",{src:g,style:{width:"30px",cursor:"pointer"},onClick:()=>p(2)}),s.jsx("img",{src:m,style:{width:"30px",cursor:"pointer"},onClick:()=>p(3)}),s.jsx("img",{src:j,style:{width:"30px",cursor:"pointer"},onClick:()=>p(4)}),s.jsx("img",{src:k,style:{width:"30px",cursor:"pointer"},onClick:()=>p(5)})]})," "]})}),s.jsx("div",{className:t.question4>""?"questions-tap":"",children:t.question4>""&&s.jsxs(s.Fragment,{children:[s.jsxs("p",{style:{color:"black"},children:["Question 5: ",t.question4]}),s.jsxs("div",{className:"emoji-rating",children:[s.jsx("img",{src:h,style:{width:"30px",cursor:"pointer"},onClick:()=>x(1)}),s.jsx("img",{src:g,style:{width:"30px",cursor:"pointer"},onClick:()=>x(2)}),s.jsx("img",{src:m,style:{width:"30px",cursor:"pointer"},onClick:()=>x(3)}),s.jsx("img",{src:j,style:{width:"30px",cursor:"pointer"},onClick:()=>x(4)}),s.jsx("img",{src:k,style:{width:"30px",cursor:"pointer"},onClick:()=>x(5)})]})]})})]}),y===t.id&&s.jsxs(s.Fragment,{children:[" ",t.id==="open"?s.jsxs("p",{style:{color:"black"},children:["Thank you for finishing Squarelion Survey,",r,"!"]}):null,s.jsx("button",{className:"next-btn",onClick:()=>{t.id==="open"?_():($(),D(i))},children:t.id==="open"?"Finished":"Next"}),"  "]})]},i)):null]})})]})}export{K as default};
