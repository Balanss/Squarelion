import{r as s,u as v,j as t,F as i,a as r,E as D,h as m}from"./index-864f1301.js";function j({user:d,level:p,uuid:P}){const[l,g]=s.useState([]),u=v();s.useState(""),s.useState(""),s.useState("");const f=async()=>{try{return m.collection("partner").onSnapshot(n=>{const a=n.docs.map(c=>({id:c.id,...c.data()}));g(a)})}catch(e){console.error("Error fetching data: ",e)}};s.useEffect(()=>{f()},[d]);const[h,x]=s.useState([]),y=async()=>{try{const e=l.map(S=>m.collection(S.name).where("status","==","pending").get().then(b=>b.docs.map(o=>({id:o.id,status:o.data().status,...o.data()})))),a=(await Promise.all(e)).flat(),c=JSON.parse(localStorage.getItem("cachedData")||"[]");JSON.stringify(c)!==JSON.stringify(a)&&localStorage.setItem("cachedData",JSON.stringify(a)),x(a)}catch(e){console.error("Error fetching data:",e)}};s.useEffect(()=>{y()},[l]),s.useState(!1),s.useState(!1);const[w,N]=s.useState(!1);return t(i,{children:r("div",{className:" animate-fade-right animate-once animate-duration-[3000ms] animate-ease-in  overflow-hidden flex flex-wrap items-center gap-2 justify-center sm:w-[70vw] laptop:w-[80vw] laptop:content-start laptopL:overflow-y-scroll   p-5 m-auto  border-2 border-slate-700/50 ",children:[t("section",{className:"",children:w&&r("div",{className:" flex-col  fixed top-0 w-[100vw] bg-slate-600 left-0 z-[100] flex items-center justify-center h-[100vh]",children:[t("img",{src:D,className:"w-[100px] h-[100px]"}),t("p",{className:"text-white text-2xl animate-bounce",children:"Loading..."})]})}),r("table",{className:"w-full text-sm text-left text-gray-400 shadow-md shadow-slate-800",children:[r("caption",{className:"p-5 text-lg font-semibold text-left  text-white bg-gray-800",children:["Squarelion Agency Partners",t("p",{className:"mt-1 text-sm font-normal text-gray-400",children:"Click on any of the images to view the partner page"})]}),t("thead",{className:"text-xs  uppercase bg-gray-700 text-gray-400",children:r("tr",{children:[t("th",{scope:"col",className:"px-2 py-3",children:"Source"}),t("th",{scope:"col",className:"px-6 py-3",children:"Name"}),t("th",{scope:"col",className:" py-3",children:"Pending Post"}),t("th",{scope:"col",className:"px-0 py-3",children:"Completed"})]})}),t("tbody",{children:l.map((e,n)=>e.name!=="Test"&&r("tr",{className:" border-b bg-gray-800 border-gray-700",children:[t("th",{scope:"row",className:"px-1 py-1 font-medium  whitespace-nowrap text-white",children:t("img",{className:"bg-slate-200 ml-3 mt-3 mb-3 mr-3 w-[30px] h-[30px] rounded-md cursor-pointer hover:scale-105 transition duration-300 ease-in-out",src:e.imageUrl,onClick:()=>{localStorage.setItem("partner",e.name),localStorage.setItem("image",e.imageUrl),localStorage.setItem("preset",e.Preset||"No preset available"),N(!0),setTimeout(()=>{u(`/profile/${e.name}`)},500)}})}),t("th",{scope:"row",className:"px-1 py-1 font-medium  whitespace-nowrap text-white",children:e.name}),r("td",{className:"px-1 py-1",children:[p>8&&e.name!=="Test"&&t(i,{children:r("p",{children:["Pending:"," ",h.filter(a=>a.client===e.name&&a.status!=="Approved").length," "]})}),p===8&&t(i,{children:e.name!=="Test"?r("p",{children:[" ","Pending :"," ",h.filter(a=>a.client===e.name&&a.status=="Designer"&&e.name!=="Test").length," "]}):null})]}),t("td",{className:"px-1 py-1",children:"Coming Soon"})]},n))})]})]})})}export{j as default};
