import{r,a as s,F as A,j as e,R as ke,U as ve,_ as x,g,c as B,m as v,h as E,d as y,y as Se,Q as De}from"./index-5ad7ce0b.js";import{N as Ce,r as $,g as O,u as L,a as _}from"./Nav-d8e337ae.js";import{D as Ue,T as Re}from"./DesignerFunctions-3967d56b.js";import{M as Ie,B as Pe}from"./Box-c35b2817.js";function Te(){const[p,S]=r.useState(!1);return s(A,{children:[s("div",{className:"border-yellow-500 border-t-2 mt-3 bg-slate-700 flex items-center w-full justify-center gap-10 p-5",children:[e("h1",{className:"text-4xl font-sans font-bold text-slate-200 text-center ",children:"Squarelion Designer Page"}),e("div",{className:"text-center bg-slate-700 ",children:e("button",{onClick:()=>S(!p),style:{backgroundColor:"#f8f9fa",color:"#333",border:"1px solid #ced4da",borderRadius:"4px",padding:"10px 20px",fontSize:"16px",cursor:"pointer",transition:"all 0.3s ease"},onMouseOver:u=>u.currentTarget.style.backgroundColor="#e9ecef",onMouseOut:u=>u.currentTarget.style.backgroundColor="#f8f9fa",children:p?"Close tooltip":"Open tooltip"})}),e("h6",{className:"fixed bottom-1 left-2 text-[10px] text-white",children:"V 0.2"})]}),e("div",{children:p&&s("article",{className:"flex flex-row items-stretch justify-around w-full h-full p-10 bg-gray-100  dark:bg-slate-700",children:[s("div",{className:"block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700",children:[e("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white",children:"Click upload image"}),e("p",{className:"font-normal text-gray-700 dark:text-gray-400",children:"Step 1"})]}),s("div",{className:"block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700",children:[e("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white",children:"Click finish to complete"}),e("p",{className:"font-normal text-gray-700 dark:text-gray-400",children:"Step 2"})]}),s("div",{className:"block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700",children:[e("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white",children:"To see the instructions click on the view button"}),e("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white",children:"For now you can only upload 4 image at a time and 1 pdf file"}),e("p",{className:"font-normal text-gray-700 dark:text-gray-400",children:"Note"})]})]})})]})}const Me={position:"absolute",bottom:"0",top:"35%",left:"60%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,overflow:"scroll"};function Le(){const[p,S]=r.useState([]),[u,V]=r.useState(""),[h,Q]=r.useState(""),[W,q]=r.useState(""),[U,z]=r.useState(""),[H,Y]=r.useState(""),[G,J]=r.useState(""),[K,X]=r.useState(""),[Z,ee]=r.useState(""),[te,ae]=r.useState(""),[se,re]=r.useState(""),[oe,le]=r.useState(""),[ne,ce]=r.useState(""),[de,ie]=r.useState(""),[me,b]=r.useState(""),[ge,R]=r.useState([]),[Fe,pe]=r.useState([]),[je,he]=r.useState([]),[ue,I]=ke.useState(!1),be=()=>I(!0),P=()=>I(!1),[D,T]=r.useState(""),C=p.filter(t=>U!==11?!t.id.endsWith("Test"):!0);function fe(t){C.map((a,i)=>{if(t===i){const l=u,n=$(O(),`products/${l.name}`),d=L(n,l);d.on("state_changed",c=>{const m=c.bytesTransferred/c.totalBytes*100;ie(`Uploading ${m}%`)},c=>{console.error(c)},async()=>{const c=await _(d.snapshot.ref),m=x(y,"DesignerPage"),o=g(m,a.post+a.month+a.page),f=l.type==="application/pdf"?"pdf":"designer",j={};j[f]=c,await B(o,j,{merge:!0}),console.log("success"),b(`${f.toUpperCase()} has been uploaded. Click view button to view ${f}!`),setTimeout(()=>{b("")},7e3)})}else return console.log("error")})}const[w,M]=r.useState(""),[N,xe]=r.useState(""),[k,F]=r.useState(""),ye=async t=>{const a=t.target.files;if(!a||a.length>4){alert("You can only upload a maximum of 4 files at once.");return}const i=Array.from(a).map(l=>{const n=$(O(),`products/${name}/${l.name}}`),d=L(n,l);return new Promise((c,m)=>{d.on("state_changed",o=>{const f=o.bytesTransferred/o.totalBytes*100;b(`Uploading ${f}%`)},o=>{console.error("Upload Error:",o),m(o)},async()=>{const o=await _(d.snapshot.ref);c({url:o,type:l.type})})})});try{const l=await Promise.all(i),n=l.filter(o=>o.type.startsWith("image/")).map(o=>o.url),d=l.filter(o=>o.type==="application/pdf").map(o=>o.url),c={designer:n[0]||"",designer1:n[1]||"",designer2:n[2]||"",designer3:n[3]||""},m={pdf:d[0]||""};if(n[0]){const o={...c,DesignedUploadedBy:h};await v(g(E,"DesignerPage",w+N+k),o,{merge:!0})}else if(d[0]){const o={...m,DesignedUploadedBy:h};await v(g(E,"DesignerPage",w+N+k),o,{merge:!0})}pe(n),he(a),b("Files have been uploaded. Click view button to view them!"),setTimeout(()=>{b("")},7e3)}catch(l){console.error("Error updating Firestore:",l)}};function we(t){C.map((a,i)=>{if(t===i){console.log("success",a.post);const l=x(y,a.page),n=g(l,a.post+a.month);v(n,{designer:a.designer,designer1:a.designer1,designer2:a.designer2,designer3:a.designer3,pdf:a.pdf||"",hide:!0,color:"#00eaff",status:"Design Done",StatusText:"Design Done",DesignUploadedBy:h},{merge:!0});const d=x(y,"DesignerPage"),c=g(d,a.post+a.month+a.page);Se(c),V("")}else return console.log("error")})}const Ne=async()=>{const t=x(y,"DesignerPage"),a=g(t,w+N+k);B(a,{subject:De(D+" - "+h)});const i=x(y,k),l=g(i,w+N);v(l,{color:"#00eaff",status:"Feedback",StatusText:"Feedback"},{merge:!0}),R(n=>[...n,D+" - "+h]),setTimeout(()=>{T("")},2e3)};return e(A,{children:s("div",{className:" h-[100vh]  bg-slate-800",children:[e(Ce,{})," ",s("div",{className:"",children:[e(ve,{user:h,setUser:Q,setUuid:q,uuid:W,setLevel:z}),e("section",{children:e(Te,{level:U})}),s("div",{className:" pt-[50px]",children:[s("div",{className:"flex flex-col items-center",children:[e(Ue,{setDesignerData:S,designerData:p}),e("section",{children:s("table",{className:"w-full text-sm text-left text-gray-300 shadow-md shadow-slate-800",children:[e("thead",{className:'className="text-xs  uppercase  bg-gray-700 text-gray-200',children:s("tr",{children:[e("th",{className:"px-4 py-2",children:"Image"}),e("th",{className:"px-4 py-2",children:"Date"}),e("th",{className:"px-4 py-2",children:"Client"}),e("th",{className:"px-4 py-2",children:"Priority"}),e("th",{className:"px-4 py-2",children:"Instructions"}),e("th",{className:"px-4 py-2",children:"Actions"})]})}),e("tbody",{children:C.map((t,a)=>t.hide===!0?null:s("tr",{className:"border-b bg-gray-600 border-gray-700 shadow-md hover:scale-105 shadow-black",children:[e("td",{className:"border px-4 py-2",children:e("img",{src:t.img,className:"w-[50px] h-[50px] rounded-md mr-4"})}),s("td",{className:"border px-4 py-2",children:[t.date,"-",t.month]}),e("td",{className:"border px-4 py-2",children:t.page}),e("td",{className:`border px-4 py-2 ${t.prio==="Prio"?"bg-red-600":"bg-gray-600"}`,children:t.prio}),s("td",{className:"border px-4 py-2",children:[s("h1",{className:"cursor-pointer text-black  bg-white text-md border-black border-2 p-2  hover:scale-110 transition-transform ",onClick:()=>{be(),Y(t.designer),J(t.designer1),X(t.designer2),ee(t.designer3),R(t.subject),ae(t.img1),re(t.img2),le(t.img3),ce(t.img4),M(t.post),xe(t.month),F(t.page)},children:[" ","View"," "]}),t.pdf===void 0?null:e("h1",{className:"cursor-pointer text-black  bg-white text-md border-black border-2 p-2  hover:scale-110 transition-transform ",onClick:()=>{window.open(t.pdf)},children:" View Pdf"})]}),e("td",{className:"border px-4 py-2",children:e("form",{onSubmit:()=>{fe(a)},className:"designer-upload  mr-5 ml-4",children:s("label",{onClick:()=>{M(t.post),t.month,F(t.page)},className:"custom-file-upload cursor-pointer text-white hover:bg-gray-900 focus:outline-none focus:ring-4 focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 bg-gray-800 dark:hover:bg-gray-700 dark:focus:ring-gray-700 dark:border-gray-700 lg:w-[120px]",children:[e("input",{type:"file",accept:"image/*",multiple:!0,onChange:ye})," Upload Image"]})})}),e("td",{className:"border px-4 py-2",children:e("div",{children:t.designer===void 0?null:s("button",{onClick:()=>{we(a)},className:"bg-slate-800 text-white p-2 rounded-md hover:bg-gray-900 cursor-pointer",children:[" ","Finish"," "]})})})]},a))})]})})]}),s("div",{className:"fixed bottom-0 bg-slate-200 w-full  ",children:[e("h2",{className:"text-xl ml-4",children:de}),e("h2",{className:"text-xl ml-4",children:me})]})]}),e(Ie,{open:ue,onClose:P,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",className:"max-w-[80vw] max-h-[80vw]  ",children:e(Pe,{sx:Me,children:s(Re,{id:"modal-modal-title",variant:"h6",component:"h2",style:{textAlign:"center"},children:[e("div",{children:e("button",{className:"bg-red-700 text-white p-2 rounded-md hover:bg-red-800  mb-5 cursor-pointer",onClick:P,children:"Close"})}),s("section",{className:"flex lg:w-[90vw] flex-row items-center flex-wrap content-center  gap-5 justify-center",children:[e("img",{className:"w-[300px]",src:H}),e("img",{className:"w-[300px]",src:G}),e("img",{className:"w-[300px]",src:K}),e("img",{className:"w-[300px]",src:Z}),e("hr",{className:"w-full border-2 border-black"}),s("div",{children:[ge.map((t,a)=>s("div",{children:[s("p",{className:"w-[80%] m-auto whitespace-pre-wrap",children:[" ",t]}),e("br",{})]},a)),e("div",{children:s("form",{onSubmit:Ne,children:[e("input",{type:"text",value:D,onChange:t=>T(t.target.value),placeholder:"Enter your message here",className:"border-2 border-black p-2 rounded-md"}),e("button",{className:"bg-blue-700 text-white p-2 rounded-md hover:bg-blue-800  ml-1 cursor-pointer",children:"Send"})]})}),s("div",{className:"flex flex-row items-center mt-3",children:[e("img",{className:"w-[200px]",src:te}),e("img",{className:"w-[200px]",src:se}),e("img",{className:"w-[200px]",src:oe}),e("img",{className:"w-[200px]",src:ne})]})]})]})]})})})]})," "]})})}export{Le as default};
