import{g as X,a as Y,s as _,c as ee,_ as B,r as p,b as te,e as se,d as ne,j as t,f as re,h as ae,i as D,k as K,u as oe,R as de,L as pe}from"./index-90c5b720.js";import{U as ie,_ as R,b as k,c as V,m as q,f as me,d as T,r as fe,e as he,u as ge,h as xe}from"./index.esm2017-2ad2fa45.js";import{u as ve,A as je,M as be,N as ye,P as Se}from"./Nav-69cabb82.js";import{F as we}from"./Footer-53680f75.js";import{B as ce,P as Ne}from"./PartnerLogic-08938f68.js";function $e(e){return X("MuiTypography",e)}Y("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Ce=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Re=e=>{const{align:s,gutterBottom:n,noWrap:o,paragraph:a,variant:i,classes:f}=e,m={root:["root",i,e.align!=="inherit"&&`align${ee(s)}`,n&&"gutterBottom",o&&"noWrap",a&&"paragraph"]};return ae(m,$e,f)},ke=_("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:n}=e;return[s.root,n.variant&&s[n.variant],n.align!=="inherit"&&s[`align${ee(n.align)}`],n.noWrap&&s.noWrap,n.gutterBottom&&s.gutterBottom,n.paragraph&&s.paragraph]}})(({theme:e,ownerState:s})=>B({margin:0},s.variant&&e.typography[s.variant],s.align!=="inherit"&&{textAlign:s.align},s.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},s.gutterBottom&&{marginBottom:"0.35em"},s.paragraph&&{marginBottom:16})),H={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Te={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Be=e=>Te[e]||e,We=p.forwardRef(function(s,n){const o=te({props:s,name:"MuiTypography"}),a=Be(o.color),i=se(B({},o,{color:a})),{align:f="inherit",className:m,component:u,gutterBottom:h=!1,noWrap:d=!1,paragraph:g=!1,variant:x="body1",variantMapping:v=H}=i,N=ne(i,Ce),W=B({},i,{align:f,color:a,className:m,component:u,gutterBottom:h,noWrap:d,paragraph:g,variant:x,variantMapping:v}),U=u||(g?"p":v[x]||H[x])||"span",$=Re(W);return t.jsx(ke,B({as:U,ref:n,ownerState:W,className:re($.root,m)},N))}),Z=We,Ue=p.createContext(),J=Ue;function Me(e){return X("MuiGrid",e)}const Pe=[0,1,2,3,4,5,6,7,8,9,10],Ee=["column-reverse","column","row-reverse","row"],Ge=["nowrap","wrap-reverse","wrap"],A=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],z=Y("MuiGrid",["root","container","item","zeroMinWidth",...Pe.map(e=>`spacing-xs-${e}`),...Ee.map(e=>`direction-xs-${e}`),...Ge.map(e=>`wrap-xs-${e}`),...A.map(e=>`grid-xs-${e}`),...A.map(e=>`grid-sm-${e}`),...A.map(e=>`grid-md-${e}`),...A.map(e=>`grid-lg-${e}`),...A.map(e=>`grid-xl-${e}`)]),Ie=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function I(e){const s=parseFloat(e);return`${s}${String(e).replace(String(s),"")||"px"}`}function Le({theme:e,ownerState:s}){let n;return e.breakpoints.keys.reduce((o,a)=>{let i={};if(s[a]&&(n=s[a]),!n)return o;if(n===!0)i={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(n==="auto")i={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const f=D({values:s.columns,breakpoints:e.breakpoints.values}),m=typeof f=="object"?f[a]:f;if(m==null)return o;const u=`${Math.round(n/m*1e8)/1e6}%`;let h={};if(s.container&&s.item&&s.columnSpacing!==0){const d=e.spacing(s.columnSpacing);if(d!=="0px"){const g=`calc(${u} + ${I(d)})`;h={flexBasis:g,maxWidth:g}}}i=B({flexBasis:u,flexGrow:0,maxWidth:u},h)}return e.breakpoints.values[a]===0?Object.assign(o,i):o[e.breakpoints.up(a)]=i,o},{})}function Oe({theme:e,ownerState:s}){const n=D({values:s.direction,breakpoints:e.breakpoints.values});return K({theme:e},n,o=>{const a={flexDirection:o};return o.indexOf("column")===0&&(a[`& > .${z.item}`]={maxWidth:"none"}),a})}function le({breakpoints:e,values:s}){let n="";Object.keys(s).forEach(a=>{n===""&&s[a]!==0&&(n=a)});const o=Object.keys(e).sort((a,i)=>e[a]-e[i]);return o.slice(0,o.indexOf(n))}function Ae({theme:e,ownerState:s}){const{container:n,rowSpacing:o}=s;let a={};if(n&&o!==0){const i=D({values:o,breakpoints:e.breakpoints.values});let f;typeof i=="object"&&(f=le({breakpoints:e.breakpoints.values,values:i})),a=K({theme:e},i,(m,u)=>{var h;const d=e.spacing(m);return d!=="0px"?{marginTop:`-${I(d)}`,[`& > .${z.item}`]:{paddingTop:I(d)}}:(h=f)!=null&&h.includes(u)?{}:{marginTop:0,[`& > .${z.item}`]:{paddingTop:0}}})}return a}function qe({theme:e,ownerState:s}){const{container:n,columnSpacing:o}=s;let a={};if(n&&o!==0){const i=D({values:o,breakpoints:e.breakpoints.values});let f;typeof i=="object"&&(f=le({breakpoints:e.breakpoints.values,values:i})),a=K({theme:e},i,(m,u)=>{var h;const d=e.spacing(m);return d!=="0px"?{width:`calc(100% + ${I(d)})`,marginLeft:`-${I(d)}`,[`& > .${z.item}`]:{paddingLeft:I(d)}}:(h=f)!=null&&h.includes(u)?{}:{width:"100%",marginLeft:0,[`& > .${z.item}`]:{paddingLeft:0}}})}return a}function ze(e,s,n={}){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[n[`spacing-xs-${String(e)}`]];const o=[];return s.forEach(a=>{const i=e[a];Number(i)>0&&o.push(n[`spacing-${a}-${String(i)}`])}),o}const Ve=_("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:n}=e,{container:o,direction:a,item:i,spacing:f,wrap:m,zeroMinWidth:u,breakpoints:h}=n;let d=[];o&&(d=ze(f,h,s));const g=[];return h.forEach(x=>{const v=n[x];v&&g.push(s[`grid-${x}-${String(v)}`])}),[s.root,o&&s.container,i&&s.item,u&&s.zeroMinWidth,...d,a!=="row"&&s[`direction-xs-${String(a)}`],m!=="wrap"&&s[`wrap-xs-${String(m)}`],...g]}})(({ownerState:e})=>B({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},e.wrap!=="wrap"&&{flexWrap:e.wrap}),Oe,Ae,qe,Le);function De(e,s){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[`spacing-xs-${String(e)}`];const n=[];return s.forEach(o=>{const a=e[o];if(Number(a)>0){const i=`spacing-${o}-${String(a)}`;n.push(i)}}),n}const Fe=e=>{const{classes:s,container:n,direction:o,item:a,spacing:i,wrap:f,zeroMinWidth:m,breakpoints:u}=e;let h=[];n&&(h=De(i,u));const d=[];u.forEach(x=>{const v=e[x];v&&d.push(`grid-${x}-${String(v)}`)});const g={root:["root",n&&"container",a&&"item",m&&"zeroMinWidth",...h,o!=="row"&&`direction-xs-${String(o)}`,f!=="wrap"&&`wrap-xs-${String(f)}`,...d]};return ae(g,Me,s)},_e=p.forwardRef(function(s,n){const o=te({props:s,name:"MuiGrid"}),{breakpoints:a}=ve(),i=se(o),{className:f,columns:m,columnSpacing:u,component:h="div",container:d=!1,direction:g="row",item:x=!1,rowSpacing:v,spacing:N=0,wrap:W="wrap",zeroMinWidth:U=!1}=i,$=ne(i,Ie),M=v||N,L=u||N,S=p.useContext(J),P=d?m||12:S,E={},C=B({},$);a.keys.forEach(r=>{$[r]!=null&&(E[r]=$[r],delete C[r])});const G=B({},i,{columns:P,container:d,direction:g,item:x,rowSpacing:M,columnSpacing:L,wrap:W,zeroMinWidth:U,spacing:N},E,{breakpoints:a.keys}),O=Fe(G);return t.jsx(J.Provider,{value:P,children:t.jsx(Ve,B({ownerState:G,className:re(O.root,f),as:h,ref:n},C))})}),Q=_e,F="https://Balanss.github.io/Squarelion/assets/user-def15e8d.png",Ke="https://Balanss.github.io/Squarelion/assets/thumbup-73273f4b.png",He="https://Balanss.github.io/Squarelion/assets/thumbdown-fa6379fb.png",Ze={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,color:"black"};function Je(){const[e,s]=p.useState([]),[n,o]=p.useState(""),[a,i]=p.useState(""),[f,m]=p.useState(""),[u,h]=p.useState("waiting");oe();const[d,g]=p.useState("");function x(r,c){c.preventDefault(),e.map((l,j)=>{if(j===r){const y=R(T,"admin"),b=k(y,l.id),w=parseInt(d);V(b,{level:w})}})}function v(r){e.map((c,l)=>{if(l===r){const j=R(T,"admin"),y=k(j,c.id);V(y,{request:"Accepted"},{merge:!0});const b=R(T,"notInOffice"),w=k(b,c.Name);q(w,{[c.time]:{request:"Accepted"}},{merge:!0})}})}function N(r){e.map((c,l)=>{if(l===r){const j=R(T,"admin"),y=k(j,c.id);V(y,{request:"Denied"},{merge:!0});const b=R(T,"notInOffice"),w=k(b,c.Name);q(w,{[c.time]:{request:"Denied"}},{merge:!0})}})}function W(r){e.map((c,l)=>{if(l===r){const j=R(T,"admin"),y=k(j,c.id);V(y,{request:""},{merge:!0});const b=R(T,"notInOffice"),w=k(b,c.Name);q(w,{[c.time]:{request:""}},{merge:!0})}})}const[U,$]=p.useState([]),M=async()=>{try{return me.collection("notInOffice").onSnapshot(c=>{const l=c.docs.map(j=>({id:j.id,...j.data()}));l.sort((j,y)=>j.id-y.id),$(l)})}catch(r){console.error("Error fetching WFH/Office data:",r)}};p.useEffect(()=>{M()},[]);const[L,S]=de.useState(!1),P=()=>S(!0),E=()=>S(!1),[C,G]=p.useState(null),O=r=>{G(r)};return t.jsxs(t.Fragment,{children:[t.jsx(je,{setUserPermit:s}),t.jsx(ie,{setUser:o,user:n,setUuid:i,setIsAccepted:m,level:u,setLevel:h}),u>9&&t.jsx(t.Fragment,{children:t.jsxs("div",{className:"user-settings-admin",children:[t.jsxs("div",{className:"user-levels",children:[t.jsx("h2",{children:"  Users that have been registered to the system "}),t.jsx("div",{className:"inside-user-levels",children:e.map((r,c)=>{if(r.level>0)return t.jsxs("div",{className:"user-level-div",children:[t.jsx("img",{src:F,style:{width:"30px"}}),t.jsx("h4",{onClick:()=>{P()},className:"user-name-edit",children:r.Name}),t.jsx(be,{open:L,onClose:E,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:t.jsxs(ce,{sx:Ze,children:[t.jsxs(Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:[U.map(l=>t.jsx("button",{style:{marginLeft:"10px"},onClick:()=>O(l),children:l.id},l.id)),C&&t.jsxs("div",{children:[t.jsxs("h2",{children:["Selected User: ",C.id]}),Object.entries(C).map(([l,j])=>{if(l!=="id"){const{reason:y,time:b,user:w}=j;return t.jsxs("div",{children:[t.jsxs("p",{children:["Reason: ",y]}),t.jsxs("p",{children:["Time: ",b]}),t.jsx("hr",{})]},l)}return null})]})]}),t.jsx(Z,{id:"modal-modal-description",sx:{mt:2}})]})}),t.jsxs("h4",{children:["User Level: ",r.level]}),t.jsx("form",{onSubmit:l=>{x(c,l)},children:r.level!==11?t.jsx("input",{placeholder:"EDIT USER",onChange:l=>g(l.target.value)}):null}),r.request>""?t.jsx(t.Fragment,{children:t.jsxs("div",{className:"div-request-approval",children:[t.jsx("h3",{className:"request-approval",onClick:()=>W(c),children:" Clear  "}),t.jsxs("h3",{className:"request-approval",children:[" ",r.request,"  "]}),t.jsxs("div",{children:[t.jsx("img",{src:Ke,onClick:()=>v(c),style:{width:"40px",cursor:"pointer"}}),t.jsx("img",{src:He,onClick:()=>N(c),style:{width:"40px",cursor:"pointer"}})]})]})}):null]},c)})}),t.jsx("hr",{className:"hr"})]}),t.jsxs("div",{className:"user-levels-await",children:[t.jsx("h2",{children:" Users awaiting approval"}),t.jsx("div",{children:e.map((r,c)=>{if(r.level===0)return t.jsxs("div",{className:"user-level-div",children:[t.jsx("img",{src:F,style:{width:"30px"}}),t.jsx("h1",{children:r.Name}),t.jsxs("h1",{children:[" User Level: ",r.level]}),t.jsx("form",{onSubmit:l=>{x(c,l)},children:t.jsx("input",{placeholder:"EDIT USER",onChange:l=>g(l.target.value)})})]},c)})})]})]})})]})}const Qe="https://Balanss.github.io/Squarelion/assets/client-acfcdaca.png";_(Se)(({theme:e})=>({backgroundColor:e.palette.mode==="dark"?"#1A2027":"#fff",...e.typography.body2,padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}));function nt(){const[e,s]=p.useState(""),[n,o]=p.useState(""),[a,i]=p.useState(""),[f,m]=p.useState(""),[u,h]=p.useState("waiting"),d=oe(),[g,x]=p.useState(),[v,N]=p.useState([]);function W(r){r.preventDefault();const c=R(T,"partner"),l=k(c,e);q(l,{name:e},{merge:!0});const j=fe(he(),`products/partners/${g.name}`),y=ge(j,g);y.on("state_changed",b=>{b.bytesTransferred/b.totalBytes*100},b=>{console.error(b)},async()=>{const b=await xe(y.snapshot.ref),w=R(T,"partner"),ue=k(w,e);q(ue,{imageUrl:b,name:e,status:0},{merge:!0})},{merge:!0})}const U=r=>{const c=r.target.files[0];x(c)};function $(r){v.map((c,l)=>{l===r&&(localStorage.setItem("partner",c.name),localStorage.setItem("image",c.imageUrl),setTimeout(()=>{d(`/profile/${c.name}`)},2e3))})}p.useEffect(()=>{const r=setTimeout(()=>{u<8&&d("/"),u>8&&clearTimeout(r)},1e3);return()=>{clearTimeout(r)}},[u,d]);const[M,L]=p.useState(!0);p.useEffect(()=>{const r=setTimeout(()=>{L(!1)},1e3);return()=>{clearTimeout(r)}},[]);const[S,P]=p.useState(!1),[E,C]=p.useState(!1),G=()=>{C(!0)},O=()=>{C(!1)};return t.jsxs(t.Fragment,{children:[t.jsx(Ne,{partner:v,setPartner:N}),t.jsxs("div",{className:"signup-main",style:{color:"white"},children:[t.jsx(ie,{setUser:o,user:n,setUuid:i,setIsAccepted:m,level:u,setLevel:h}),a!==""&&u>8&&M===!1&&t.jsx(t.Fragment,{children:t.jsxs("div",{style:{backgroundColor:"#194375",minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[t.jsxs("div",{style:{backgroundColor:"white"},children:[" ",t.jsx(ye,{})," "]}),u>9&&t.jsx(t.Fragment,{children:t.jsx("div",{className:"admin-page-btn-switch hover-container",style:{marginTop:"30px"},children:t.jsxs("h1",{onMouseEnter:G,onMouseLeave:O,className:"switching",onClick:()=>P(S===!1),children:[" ",S===!1?t.jsx("img",{className:"usersimg",src:F}):t.jsx("img",{className:"clientimg",src:Qe}),E&&t.jsx("p",{className:"hover-text",children:S===!1?"Switch to users":"Switch to clients"})]})})}),S===!1&&t.jsx(t.Fragment,{children:t.jsxs("div",{className:"style-admin-page",children:[u>9&&t.jsx(t.Fragment,{children:t.jsxs("form",{onSubmit:W,className:"form-admindb",children:[t.jsx("input",{type:"text",placeholder:"ENTER PARTNER",onChange:r=>s(r.target.value),className:"input-admindb"}),t.jsxs("label",{children:["Image:",t.jsx("input",{type:"file",onChange:U})]}),t.jsx("button",{className:"add-partner",children:" Add Partner "})]})}),t.jsx("div",{className:"partner-links",children:t.jsx(ce,{sx:{flexGrow:1},children:t.jsx(Q,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:v.map((r,c)=>t.jsx(Q,{item:!0,xs:2,sm:4,md:4,children:t.jsx("img",{className:"partner-image",src:r.imageUrl,onClick:()=>{$(c)},style:{cursor:"pointer",backgroundColor:"white"}},c)},c))})})})]})}),S===!0&&t.jsx(Je,{}),t.jsx(we,{})]})}),M===!0&&t.jsx(t.Fragment,{children:t.jsx(pe,{})})]})]})}export{nt as default};
