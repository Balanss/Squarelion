import{r as m,g as Z,a as q,s as _,_ as k,b as H,e as J,c as Q,j as s,d as X,f as U,h as z,i as Y,u as ee,L as se}from"./index-199aed75.js";import{u as te,f as re,_ as W,b as I,c as ne,d as L,U as ie,N as ae,P as oe,m as V}from"./Nav-26d43fc1.js";import{P as ce,B as le,r as ue,g as de,u as pe,a as me}from"./PartnerLogic-44931391.js";import{F as fe}from"./Footer-b72c1d3c.js";const ge=m.createContext(),M=ge;function he(e){return Z("MuiGrid",e)}const xe=[0,1,2,3,4,5,6,7,8,9,10],ve=["column-reverse","column","row-reverse","row"],je=["nowrap","wrap-reverse","wrap"],$=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],C=q("MuiGrid",["root","container","item","zeroMinWidth",...xe.map(e=>`spacing-xs-${e}`),...ve.map(e=>`direction-xs-${e}`),...je.map(e=>`wrap-xs-${e}`),...$.map(e=>`grid-xs-${e}`),...$.map(e=>`grid-sm-${e}`),...$.map(e=>`grid-md-${e}`),...$.map(e=>`grid-lg-${e}`),...$.map(e=>`grid-xl-${e}`)]),Se=["className","columns","columnSpacing","component","container","direction","item","rowSpacing","spacing","wrap","zeroMinWidth"];function w(e){const r=parseFloat(e);return`${r}${String(e).replace(String(r),"")||"px"}`}function be({theme:e,ownerState:r}){let a;return e.breakpoints.keys.reduce((i,n)=>{let t={};if(r[n]&&(a=r[n]),!a)return i;if(a===!0)t={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(a==="auto")t={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const o=U({values:r.columns,breakpoints:e.breakpoints.values}),c=typeof o=="object"?o[n]:o;if(c==null)return i;const u=`${Math.round(a/c*1e8)/1e6}%`;let d={};if(r.container&&r.item&&r.columnSpacing!==0){const l=e.spacing(r.columnSpacing);if(l!=="0px"){const f=`calc(${u} + ${w(l)})`;d={flexBasis:f,maxWidth:f}}}t=k({flexBasis:u,flexGrow:0,maxWidth:u},d)}return e.breakpoints.values[n]===0?Object.assign(i,t):i[e.breakpoints.up(n)]=t,i},{})}function we({theme:e,ownerState:r}){const a=U({values:r.direction,breakpoints:e.breakpoints.values});return z({theme:e},a,i=>{const n={flexDirection:i};return i.indexOf("column")===0&&(n[`& > .${C.item}`]={maxWidth:"none"}),n})}function F({breakpoints:e,values:r}){let a="";Object.keys(r).forEach(n=>{a===""&&r[n]!==0&&(a=n)});const i=Object.keys(e).sort((n,t)=>e[n]-e[t]);return i.slice(0,i.indexOf(a))}function ye({theme:e,ownerState:r}){const{container:a,rowSpacing:i}=r;let n={};if(a&&i!==0){const t=U({values:i,breakpoints:e.breakpoints.values});let o;typeof t=="object"&&(o=F({breakpoints:e.breakpoints.values,values:t})),n=z({theme:e},t,(c,u)=>{var d;const l=e.spacing(c);return l!=="0px"?{marginTop:`-${w(l)}`,[`& > .${C.item}`]:{paddingTop:w(l)}}:(d=o)!=null&&d.includes(u)?{}:{marginTop:0,[`& > .${C.item}`]:{paddingTop:0}}})}return n}function Ne({theme:e,ownerState:r}){const{container:a,columnSpacing:i}=r;let n={};if(a&&i!==0){const t=U({values:i,breakpoints:e.breakpoints.values});let o;typeof t=="object"&&(o=F({breakpoints:e.breakpoints.values,values:t})),n=z({theme:e},t,(c,u)=>{var d;const l=e.spacing(c);return l!=="0px"?{width:`calc(100% + ${w(l)})`,marginLeft:`-${w(l)}`,[`& > .${C.item}`]:{paddingLeft:w(l)}}:(d=o)!=null&&d.includes(u)?{}:{width:"100%",marginLeft:0,[`& > .${C.item}`]:{paddingLeft:0}}})}return n}function $e(e,r,a={}){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[a[`spacing-xs-${String(e)}`]];const i=[];return r.forEach(n=>{const t=e[n];Number(t)>0&&i.push(a[`spacing-${n}-${String(t)}`])}),i}const ke=_("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:a}=e,{container:i,direction:n,item:t,spacing:o,wrap:c,zeroMinWidth:u,breakpoints:d}=a;let l=[];i&&(l=$e(o,d,r));const f=[];return d.forEach(x=>{const h=a[x];h&&f.push(r[`grid-${x}-${String(h)}`])}),[r.root,i&&r.container,t&&r.item,u&&r.zeroMinWidth,...l,n!=="row"&&r[`direction-xs-${String(n)}`],c!=="wrap"&&r[`wrap-xs-${String(c)}`],...f]}})(({ownerState:e})=>k({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},e.wrap!=="wrap"&&{flexWrap:e.wrap}),we,ye,Ne,be);function Ce(e,r){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[`spacing-xs-${String(e)}`];const a=[];return r.forEach(i=>{const n=e[i];if(Number(n)>0){const t=`spacing-${i}-${String(n)}`;a.push(t)}}),a}const Re=e=>{const{classes:r,container:a,direction:i,item:n,spacing:t,wrap:o,zeroMinWidth:c,breakpoints:u}=e;let d=[];a&&(d=Ce(t,u));const l=[];u.forEach(x=>{const h=e[x];h&&l.push(`grid-${x}-${String(h)}`)});const f={root:["root",a&&"container",n&&"item",c&&"zeroMinWidth",...d,i!=="row"&&`direction-xs-${String(i)}`,o!=="wrap"&&`wrap-xs-${String(o)}`,...l]};return Y(f,he,r)},Pe=m.forwardRef(function(r,a){const i=H({props:r,name:"MuiGrid"}),{breakpoints:n}=te(),t=J(i),{className:o,columns:c,columnSpacing:u,component:d="div",container:l=!1,direction:f="row",item:x=!1,rowSpacing:h,spacing:y=0,wrap:E="wrap",zeroMinWidth:G=!1}=t,N=Q(t,Se),R=h||y,T=u||y,j=m.useContext(M),P=l?c||12:j,p={},g=k({},N);n.keys.forEach(v=>{N[v]!=null&&(p[v]=N[v],delete g[v])});const S=k({},t,{columns:P,container:l,direction:f,item:x,rowSpacing:R,columnSpacing:T,wrap:E,zeroMinWidth:G,spacing:y},p,{breakpoints:n.keys}),B=Re(S);return s.jsx(M.Provider,{value:P,children:s.jsx(ke,k({ownerState:S,className:X(B.root,o),as:d,ref:a},g))})}),A=Pe,D="https://Balanss.github.io/Squarelion/assets/user-def15e8d.png";function Ue({setUserPermit:e}){const r=async()=>{try{return re.collection("admin").onSnapshot(i=>{const n=i.docs.map(t=>({id:t.id,...t.data()}));n.sort((t,o)=>t.id-o.id),e(n)})}catch(a){console.error("Error fetching user permit data:",a)}};m.useEffect(()=>{r()},[])}function Ee(){const[e,r]=m.useState([]),[a,i]=m.useState("");function n(t,o){o.preventDefault(),e.map((c,u)=>{if(u===t){const d=W(L,"admin"),l=I(d,c.id),f=parseInt(a);ne(l,{level:f})}})}return s.jsxs(s.Fragment,{children:[s.jsx(Ue,{setUserPermit:r}),s.jsxs("div",{className:"user-settings-admin",children:[s.jsxs("div",{className:"user-levels",children:[s.jsx("h2",{children:"  Users that have been registered to the system "}),s.jsx("div",{className:"inside-user-levels",children:e.map((t,o)=>{if(t.level>0)return s.jsxs("div",{className:"user-level-div",children:[s.jsx("img",{src:D,style:{width:"30px"}}),s.jsx("h4",{children:t.Name}),s.jsxs("h4",{children:["User Level: ",t.level]}),s.jsx("form",{onSubmit:c=>{n(o,c)},children:s.jsx("input",{placeholder:"EDIT USER",onChange:c=>i(c.target.value)})})]},o)})}),s.jsx("hr",{className:"hr"})]}),s.jsxs("div",{className:"user-levels-await",children:[s.jsx("h2",{children:" Users awaiting approval"}),s.jsx("div",{children:e.map((t,o)=>{if(t.level===0)return s.jsxs("div",{className:"user-level-div",children:[s.jsx("img",{src:D,style:{width:"30px"}}),s.jsx("h1",{children:t.Name}),s.jsxs("h1",{children:[" User Level: ",t.level]}),s.jsx("form",{onSubmit:c=>{n(o,c)},children:s.jsx("input",{placeholder:"EDIT USER",onChange:c=>i(c.target.value)})})]},o)})})]})]})," "]})}_(oe)(({theme:e})=>({backgroundColor:e.palette.mode==="dark"?"#1A2027":"#fff",...e.typography.body2,padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}));function Ie(){const[e,r]=m.useState(""),[a,i]=m.useState(""),[n,t]=m.useState(""),[o,c]=m.useState(""),[u,d]=m.useState("waiting"),l=ee(),[f,x]=m.useState(),[h,y]=m.useState([]);function E(p){p.preventDefault();const g=W(L,"partner"),S=I(g,e);V(S,{name:e},{merge:!0});const B=ue(de(),`products/partners/${f.name}`),v=pe(B,f);v.on("state_changed",b=>{b.bytesTransferred/b.totalBytes*100},b=>{console.error(b)},async()=>{const b=await me(v.snapshot.ref),K=W(L,"partner"),O=I(K,e);V(O,{imageUrl:b,name:e,status:0},{merge:!0})},{merge:!0})}const G=p=>{const g=p.target.files[0];x(g)};function N(p){h.map((g,S)=>{S===p&&(localStorage.setItem("partner",g.name),localStorage.setItem("image",g.imageUrl),setTimeout(()=>{l(`/profile/${g.name}`)},2e3))})}m.useEffect(()=>{const p=setTimeout(()=>{u!==10&&l("/"),u===10&&clearTimeout(p)},1e3);return()=>{clearTimeout(p)}},[u,l]);const[R,T]=m.useState(!0);m.useEffect(()=>{const p=setTimeout(()=>{T(!1)},1e3);return()=>{clearTimeout(p)}},[]);const[j,P]=m.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsx(ce,{partner:h,setPartner:y}),s.jsxs("div",{className:"signup-main",style:{color:"white"},children:[s.jsx(ie,{setUser:i,user:a,setUuid:t,setIsAccepted:c,level:u,setLevel:d}),n!==""&&u===10&&R===!1&&s.jsx(s.Fragment,{children:s.jsxs("div",{style:{backgroundColor:"#194375",minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[s.jsxs("div",{style:{backgroundColor:"white"},children:[" ",s.jsx(ae,{})," "]}),s.jsxs("div",{className:"admin-page-btn-switch",style:{marginTop:"30px"},children:[s.jsxs("h1",{className:"switching",onClick:()=>P(j===!1),children:[" ",j===!1?"Switch to Users":"Switch to Partners"," "]})," "]}),j===!1&&s.jsx(s.Fragment,{children:s.jsxs("div",{className:"style-admin-page",children:[s.jsxs("form",{onSubmit:E,className:"form-admindb",children:[s.jsx("input",{type:"text",placeholder:"ENTER PARTNER",onChange:p=>r(p.target.value),className:"input-admindb"}),s.jsxs("label",{children:["Image:",s.jsx("input",{type:"file",onChange:G})]}),s.jsx("button",{className:"add-partner",children:" Add Partner "})]}),s.jsx("div",{className:"partner-links",children:s.jsx(le,{sx:{flexGrow:1},children:s.jsx(A,{container:!0,spacing:{xs:2,md:3},columns:{xs:4,sm:8,md:12},children:h.map((p,g)=>s.jsx(A,{item:!0,xs:2,sm:4,md:4,children:s.jsx("img",{className:"partner-image",src:p.imageUrl,onClick:()=>{N(g)},style:{cursor:"pointer",backgroundColor:"white"}},g)},g))})})})]})}),j===!0&&s.jsx(Ee,{}),s.jsx(fe,{})]})}),R===!0&&s.jsx(s.Fragment,{children:s.jsx(se,{})})]})]})}export{Ie as default};
