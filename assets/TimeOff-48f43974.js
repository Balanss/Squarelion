import{r as s,m as A,u as L,j as e}from"./index-90c5b720.js";import{f as b,U as $,_ as v,b as S,c as D,m as I,a as B,d as R}from"./index.esm2017-2ad2fa45.js";import{T as P}from"./Title-b874387a.js";function _({setWfh:n}){const c=async()=>{try{return b.collection("notInOffice").onSnapshot(d=>{const u=d.docs.map(a=>({id:a.id,...a.data()}));u.sort((a,x)=>a.id-x.id),n(u)})}catch(o){console.error("Error fetching WFH data:",o)}};s.useEffect(()=>{c()},[])}function K(){A();const[n,c]=s.useState(""),[o,d]=s.useState(""),[u,a]=s.useState(""),[x,w]=s.useState("");L();const[r,O]=s.useState(""),[j,q]=s.useState(""),[p,N]=s.useState(""),[l,g]=s.useState("");s.useState("");const[W,y]=s.useState([]);function C(t){t.preventDefault();const i=v(R,"admin"),f=S(i,o);D(f,{notOffice:`${r} - ${j}`,reason:p,typeOfLeave:l,request:"Waiting Request",time:r},{merge:!0});const h=v(R,"notInOffice"),m=S(h,n);I(m,{[r]:{notOffice:`${r} - ${j}`,reason:p,typeOfLeave:l,request:"Waiting Request",user:n,time:r}},{merge:!0})}const[T,F]=s.useState();function k(){return s.useEffect(()=>{B.onAuthStateChanged(t=>{t?b.collection("admin").doc(t.uid).get().then(i=>{F(i.data().request)}):c(null)})},[n]),n}k();function E(){}const H=W.filter(t=>t.id===n);return e.jsxs(e.Fragment,{children:[e.jsx($,{user:n,setUser:c,setUuid:d,setIsAccepted:w,level:u,setLevel:a}),e.jsx(P,{}),e.jsx(_,{setWfh:y}),e.jsx("div",{className:"",children:e.jsxs("div",{className:"info-div-of-users",children:[e.jsxs("div",{className:"wfh-request",children:[e.jsxs("form",{onSubmit:C,className:"wfh-text",children:[e.jsxs("div",{className:"wfh-which",children:[e.jsx("h3",{onClick:()=>g("WFH"),children:" WFH "}),e.jsx("h3",{onClick:()=>g("TimeOff"),children:" TimeOff "})]}),e.jsxs("p",{children:[" ",l," "]}),e.jsxs("div",{className:"share-wfh-input",children:[e.jsx("label",{children:" Start Date : "}),e.jsx("input",{type:"date",name:"start",onChange:t=>O(t.target.value)})]}),e.jsxs("div",{className:"share-wfh-input",children:[e.jsx("label",{children:" Return Date : "}),e.jsx("input",{type:"date",name:"end",onChange:t=>q(t.target.value)})]}),e.jsx("textarea",{placeholder:"reason of WFH",onChange:t=>N(t.target.value)}),e.jsx("button",{children:"Request "})]}),e.jsx("div",{children:e.jsxs("button",{onClick:E,children:[" ",T," "]})})]}),e.jsx("div",{className:"history",children:e.jsx("div",{className:"history-inside",children:H.map(t=>Object.entries(t).map(([i,f])=>{const{reason:h,user:m,time:U}=f;return e.jsxs("div",{children:[e.jsxs("p",{children:[" ",m," "]}),e.jsxs("p",{children:[" ",h]}),e.jsxs("p",{children:[" ",U]}),"------------"]},i)}))})})]})})]})}export{K as default};
