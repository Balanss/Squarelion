import{r as t,j as e,p as ee,u as se,L as ue}from"./index-75200845.js";import{U as _,N as te,f as F,_ as O,c as D,d as V,m as he,a as me,e as E,y as fe}from"./Nav-e401f1e9.js";import{L as pe,a as ge,m as L,b as Y,t as xe,B as Z,P as je}from"./important-6befaa69.js";import{F as re}from"./Footer-bf70f7e8.js";import{u as ye}from"./useLogo-28cee2dd.js";import{T as ne}from"./Title-3b889f94.js";import"./PartnerLogic-91b2192b.js";function ve(){const[r,h]=t.useState(""),[p,j]=t.useState("");return e.jsxs("div",{className:"emptyhomepage",children:[e.jsx(_,{setUser:h,setLevel:j}),e.jsx("div",{style:{backgroundColor:"ghostwhite"},children:e.jsx(te,{})}),e.jsxs("div",{className:"profiletextwait",children:[e.jsxs("h2",{children:[" Hello ",r,", Currently you are waiting approval from an admin "]}),e.jsx("img",{src:ye,alt:"logo",style:{margin:"0 auto"},className:"sql-logo"}),e.jsx("h3",{children:" Sed dapibus tellus at tempor feugiat. Nullam id vehicula lacus. Aliquam erat volutpat. Vestibulum fermentum hendrerit odio, non blandit metus ullamcorper vel. Nulla sed magna diam. Vestibulum semper arcu augue, et facilisis leo ornare nec. Maecenas dictum metus vel enim ultrices efficitur. "})]}),e.jsx(re,{})]})}function Se({privateChat:r,setChat:h,setDesignerChat:p,setMessage:j}){const S=async()=>{try{F.collection("chat").doc(r).onSnapshot(a=>{if(a.exists){const o=a.data(),c=Object.entries(o).filter(([m])=>m!=="timestamp").sort((m,l)=>new Date(l[0])-new Date(m[0])).reduce((m,[l,y])=>({...m,[l]:y}),{});h(c)}else console.log("privateChat document does not exist"),h("")})}catch(d){console.error("Error fetching chat data:",d)}};t.useEffect(()=>{S()},[r]);const g=async()=>{try{return F.collection("designer").orderBy("timestamp","desc").onSnapshot(a=>{const o=a.docs.map(c=>({id:c.id,...c.data()}));p(o)})}catch(d){console.error("Error fetching designer chat data:",d)}};t.useEffect(()=>{g()},[]);const x=async()=>{try{return F.collection("group").orderBy("timestamp","desc").onSnapshot(a=>{const o=a.docs.map(c=>({id:c.id,...c.data()}));j(o)})}catch(d){console.error("Error fetching message data:",d)}};t.useEffect(()=>{x()},[])}function Ne({setWfh:r}){const h=async()=>{try{return F.collection("notInOffice").onSnapshot(j=>{const S=j.docs.map(g=>({id:g.id,...g.data()}));S.sort((g,x)=>g.id-x.id),r(S)})}catch(p){console.error("Error fetching WFH data:",p)}};t.useEffect(()=>{h()},[])}function be(){ee();const[r,h]=t.useState(""),[p,j]=t.useState(""),[S,g]=t.useState(""),[x,d]=t.useState("");se();const[a,o]=t.useState(""),[c,m]=t.useState(""),[l,y]=t.useState(""),[R,C]=t.useState("");t.useState("");const[q,A]=t.useState([]);function T(i){i.preventDefault();const N=O(E,"admin"),u=D(N,p);V(u,{notOffice:`${a} - ${c}`,reason:l,typeOfLeave:R,request:"Waiting Request",time:a},{merge:!0});const f=O(E,"notInOffice"),k=D(f,r);he(k,{[a]:{notOffice:`${a} - ${c}`,reason:l,typeOfLeave:R,request:"Waiting Request",user:r,time:a}},{merge:!0})}const[U,B]=t.useState();function P(){return t.useEffect(()=>{me.onAuthStateChanged(i=>{i?F.collection("admin").doc(i.uid).get().then(N=>{B(N.data().request)}):h(null)})},[r]),r}P();function H(){}const I=q.filter(i=>i.id===r);return e.jsxs(e.Fragment,{children:[e.jsx(_,{user:r,setUser:h,setUuid:j,setIsAccepted:d,level:S,setLevel:g}),e.jsx(ne,{}),e.jsx(Ne,{setWfh:A}),e.jsx("div",{className:"",children:e.jsxs("div",{className:"info-div-of-users",children:[e.jsxs("div",{className:"wfh-request",children:[e.jsxs("form",{onSubmit:T,className:"wfh-text",children:[e.jsxs("div",{className:"wfh-which",children:[e.jsx("h3",{onClick:()=>C("WFH"),children:" WFH "}),e.jsx("h3",{onClick:()=>C("TimeOff"),children:" TimeOff "})]}),e.jsxs("p",{children:[" ",R," "]}),e.jsxs("div",{className:"share-wfh-input",children:[e.jsx("label",{children:" Start Date : "}),e.jsx("input",{type:"date",name:"start",onChange:i=>o(i.target.value)})]}),e.jsxs("div",{className:"share-wfh-input",children:[e.jsx("label",{children:" Return Date : "}),e.jsx("input",{type:"date",name:"end",onChange:i=>m(i.target.value)})]}),e.jsx("textarea",{placeholder:"reason of WFH",onChange:i=>y(i.target.value)}),e.jsx("button",{children:"Request "})]}),e.jsx("div",{children:e.jsxs("button",{onClick:H,children:[" ",U," "]})})]}),e.jsx("div",{className:"history",children:e.jsx("div",{className:"history-inside",children:I.map(i=>Object.entries(i).map(([N,u])=>{const{reason:f,user:k,time:b}=u;return e.jsxs("div",{children:[e.jsxs("p",{children:[" ",k," "]}),e.jsxs("p",{children:[" ",f]}),e.jsxs("p",{children:[" ",b]}),"------------"]},N)}))})})]})})]})}function Ee(){ee();const[r,h]=t.useState(""),[p,j]=t.useState(""),[S,g]=t.useState(""),[x,d]=t.useState("waiting"),[a,o]=t.useState(""),[c,m]=t.useState(""),[l,y]=t.useState("waiting"),R=se(),[C,q]=t.useState([]),A=async()=>{try{return F.collection("admin").onSnapshot(n=>{const v=n.docs.map(w=>({id:w.id,...w.data()}));v.sort((w,de)=>w.id-de.id),q(v)})}catch(s){console.error("Error fetching work data:",s)}};t.useEffect(()=>{A()},[]);const[T,U]=t.useState([]),[B,P]=t.useState([]),[H,I]=t.useState(""),[i,N]=t.useState(),[u,f]=t.useState(!1),[k,b]=t.useState(""),z=C.map(s=>s.Name),J=s=>{const n=O(E,l),v=D(n,s);fe(v).then(()=>{console.log("Document successfully deleted!")}).catch(w=>{console.error("Error removing document:",w)})};function K(s){const n=O(E,"group"),v=D(n,s);V(v,{[r]:0},{merge:!0})}const $=s=>{const n=D(E,"group",s);V(n,{new:"Read"}).then(()=>{console.log("Field successfully updated")}).catch(w=>{})},[ae,ie]=t.useState(!1),[W,ce]=t.useState(!1),[G,oe]=t.useState(!1);t.useEffect(()=>{setTimeout(()=>{ie(!0)},1e3)},[]);const Q=T.map(s=>s[r]).reduce((s,n)=>s+n,null),[M,X]=t.useState(!1);function le(){setTimeout(()=>{R(`/user/Survey/${r}`),window.location.reload()},2e3)}return e.jsxs(e.Fragment,{children:[e.jsx(Se,{privateChat:l,setChat:I,setDesignerChat:P,setMessage:U}),e.jsx(ne,{}),e.jsx(_,{setUser:h,user:r,setUuid:j,setIsAccepted:g,level:x,setLevel:d}),x===0&&e.jsx(e.Fragment,{children:e.jsx("div",{children:e.jsx(ve,{})})}),x>7?e.jsxs(e.Fragment,{children:["  ",e.jsxs("div",{className:"profile",children:[e.jsxs("div",{style:{margin:"auto",backgroundColor:"white",borderBottom:"2px solid gold"},children:[" ",e.jsx(te,{})," "]}),e.jsxs("div",{className:"real-admin-links",children:[e.jsx(pe,{}),e.jsx("button",{onClick:()=>{X(M===!1)},children:" WFH "}),e.jsx("img",{className:"style-meeting",src:ge,style:{cursor:"pointer",width:"50px",height:"50px"},onClick:()=>{f(u!==!0),X(!1)}}),e.jsx("button",{onClick:le,children:" Survey "})]}),e.jsxs("div",{className:"group-text",style:u===!1?{display:"none"}:{display:"block"},children:[e.jsxs("h2",{onClick:()=>oe(G!==!0),children:[" ",G===!1?"Show Priority":"Show All","  "]}),l==="group"&&e.jsx(e.Fragment,{children:G===!0?T.map((s,n)=>e.jsxs("div",{className:"indi-group-text",onClick:()=>$(s.id),children:[" ",s.imp>""?e.jsxs("h2",{className:"style-this-h2",children:["  ",e.jsx("img",{src:L,style:{width:"40px",height:"40px"}})," ",s.text," - ",s.sendBy," "]}):null,s.imp>""?e.jsx("img",{style:{width:"50px",height:"50px",cursor:"pointer"},src:Y,onClick:v=>J(s.id)}):null," ",e.jsx("hr",{})," "]},n)):T.map((s,n)=>e.jsxs("div",{className:"indi-group-text",onClick:()=>$(s.id),children:[e.jsxs("h2",{className:"style-this-h2",onClick:()=>K(s.id),children:["  ",s.imp>""?e.jsx("img",{src:L,style:{width:"40px",height:"40px"}}):null," ",s.text," - ",s.sendBy," "]}),e.jsx("img",{style:{width:"50px",height:"50px",cursor:"pointer"},src:Y,onClick:v=>J(s.id)})," ",e.jsx("hr",{})," "]},n))}),l==="designer"&&e.jsx(e.Fragment,{children:B.map((s,n)=>e.jsx("div",{className:"indi-group-text",onClick:()=>$(s.id),children:e.jsxs("h2",{className:"style-this-h2",onClick:()=>K(s.id),children:["  ",s.imp>""?e.jsx("img",{src:L,style:{width:"40px",height:"40px"}}):null," ",s.text," - ",s.sendBy," "]})},n))}),l!=="group"&&e.jsx(e.Fragment,{children:l&&e.jsx(e.Fragment,{children:Object.entries(H).map(([s,n])=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},className:"style-private-chat",children:[e.jsxs("h2",{className:"indi-group-text",children:["  ",e.jsx("img",{src:xe,style:{width:"20px",height:"20px",marginRight:"10px"}}),"  ",s," "]}),e.jsxs("h2",{children:["   ",n," "]}),e.jsx("hr",{style:{color:"black",width:"100px"}})]},s))})})]}),e.jsxs("form",{className:"form-private",style:u===!1?{display:"none"}:{display:"block"},onSubmit:s=>s.preventDefault(),children:[e.jsxs("label",{children:[" ",`Send message to ${k} ${W===!0&&k==="Group"?" [Priority] ":""}`," "]}),e.jsxs("div",{children:[e.jsx("textarea",{onChange:s=>m(s.target.value),value:c,className:"textarea",placeholder:"Enter"}),e.jsx("img",{src:L,onClick:()=>{ce(W===!1)},className:"img-imp",style:{width:"2rem"}})]}),a==="designer"?e.jsx(Z,{allUid:z,user:r,sendTo:a,text:c,uuid:p,imp:W}):null,a==="group"?e.jsx(Z,{allUid:z,setText:m,user:r,sendTo:a,text:c,uuid:p,imp:W}):null,a!=="designer"&&a!=="group"?e.jsx(je,{user:r,setText:m,sendTo:a,text:c,trueChat:i}):null]}),M===!1&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"list",children:[x>8&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:u===!0?"hidethis":"dont-hide",children:[e.jsxs("h2",{onClick:()=>{o("group"),b("Group"),y("group"),f(u!==!0)},style:{cursor:"pointer"},className:"h2-noti",children:[" Group  ",e.jsxs("p",{style:{fontSize:"14px",color:"red"},children:[" ",Q>0?Q:""," "]})]}),e.jsx("h2",{onClick:()=>{o("designer"),b("designer"),y("designer"),f(u!==!0)},style:{cursor:"pointer"},className:"h2-noti",children:" Designer  "}),C.map((s,n)=>e.jsx("div",{children:e.jsxs("h2",{style:{cursor:"pointer"},onClick:()=>{o("chat"+r+s.Name),y("chat"+r+s.Name),N("chat"+s.Name+r),b(s.Name),f(u!==!0)},children:[" ",s.Name," "]},n)},n))]})}),u&&x===8&&e.jsx(e.Fragment,{children:e.jsxs("div",{style:{backgroundColor:"white",width:"125px",padding:"10px",borderRadius:"10px",color:"black"},children:[e.jsx("h2",{onClick:()=>{o("designer"),b("designer"),y("designer"),f(!1)},style:{cursor:"pointer"},className:"h2-noti",children:" Chat  "}),C.map((s,n)=>e.jsx("div",{children:e.jsxs("h2",{style:{cursor:"pointer"},onClick:()=>{o("chat"+r+s.Name),y("chat"+r+s.Name),b(s.Name),f(!1)},children:[" ",s.Name," "]},n)},n))]})})]})}),M===!0&&e.jsx(e.Fragment,{children:e.jsx(be,{})})]}),"  ",e.jsx(re,{})," "]}):null,ae===!1&&e.jsx(e.Fragment,{children:e.jsx(ue,{})})]})}export{Ee as default};
