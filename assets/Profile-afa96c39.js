import{r as t,j as e,p as Z,u as ee,L as le}from"./index-3bf22f8e.js";import{N as se}from"./Nav-be6b6294.js";import{U as z,f as k,_ as q,d as R,b as T,e as _,m as de,a as ue,y as he}from"./index.esm2017-2aa0089c.js";import{L as me,a as pe,m as O,B as X,P as xe,b as Y,t as fe}from"./important-75378672.js";import{F as te}from"./Footer-d37481b8.js";import{u as ge}from"./useLogo-28cee2dd.js";import{T as re}from"./Title-82866e51.js";import je from"./Survey-82a71122.js";import"./PartnerLogic-bc6a9529.js";function ye(){const[r,u]=t.useState(""),[f,j]=t.useState("");return e.jsxs("div",{className:"emptyhomepage",children:[e.jsx(z,{setUser:u,setLevel:j}),e.jsx("div",{style:{backgroundColor:"ghostwhite"},children:e.jsx(se,{})}),e.jsxs("div",{className:"profiletextwait",children:[e.jsxs("h2",{children:[" Hello ",r,", Currently you are waiting approval from an admin "]}),e.jsx("img",{src:ge,alt:"logo",style:{margin:"0 auto"},className:"sql-logo"}),e.jsx("h3",{children:" Sed dapibus tellus at tempor feugiat. Nullam id vehicula lacus. Aliquam erat volutpat. Vestibulum fermentum hendrerit odio, non blandit metus ullamcorper vel. Nulla sed magna diam. Vestibulum semper arcu augue, et facilisis leo ornare nec. Maecenas dictum metus vel enim ultrices efficitur. "})]}),e.jsx(te,{})]})}function ve({privateChat:r,setChat:u,setDesignerChat:f,setMessage:j}){const N=async()=>{try{k.collection("chat").doc(r).onSnapshot(a=>{if(a.exists){const o=a.data(),c=Object.entries(o).filter(([m])=>m!=="timestamp").sort((m,l)=>new Date(l[0])-new Date(m[0])).reduce((m,[l,y])=>({...m,[l]:y}),{});u(c)}else console.log("privateChat document does not exist"),u("")})}catch(d){console.error("Error fetching chat data:",d)}};t.useEffect(()=>{N()},[r]);const g=async()=>{try{return k.collection("designer").orderBy("timestamp","desc").onSnapshot(a=>{const o=a.docs.map(c=>({id:c.id,...c.data()}));f(o)})}catch(d){console.error("Error fetching designer chat data:",d)}};t.useEffect(()=>{g()},[]);const h=async()=>{try{return k.collection("group").orderBy("timestamp","desc").onSnapshot(a=>{const o=a.docs.map(c=>({id:c.id,...c.data()}));j(o)})}catch(d){console.error("Error fetching message data:",d)}};t.useEffect(()=>{h()},[])}function Se({setWfh:r}){const u=async()=>{try{return k.collection("notInOffice").onSnapshot(j=>{const N=j.docs.map(g=>({id:g.id,...g.data()}));N.sort((g,h)=>g.id-h.id),r(N)})}catch(f){console.error("Error fetching WFH data:",f)}};t.useEffect(()=>{u()},[])}function Ne(){Z();const[r,u]=t.useState(""),[f,j]=t.useState(""),[N,g]=t.useState(""),[h,d]=t.useState("");ee();const[a,o]=t.useState(""),[c,m]=t.useState(""),[l,y]=t.useState(""),[b,D]=t.useState("");t.useState("");const[A,F]=t.useState([]);function U(i){i.preventDefault();const p=q(R,"admin"),x=T(p,f);_(x,{notOffice:`${a} - ${c}`,reason:l,typeOfLeave:b,request:"Waiting Request",time:a},{merge:!0});const C=q(R,"notInOffice"),v=T(C,r);de(v,{[a]:{notOffice:`${a} - ${c}`,reason:l,typeOfLeave:b,request:"Waiting Request",user:r,time:a}},{merge:!0})}const[B,P]=t.useState();function H(){return t.useEffect(()=>{ue.onAuthStateChanged(i=>{i?k.collection("admin").doc(i.uid).get().then(p=>{P(p.data().request)}):u(null)})},[r]),r}H();function I(){}const W=A.filter(i=>i.id===r);return e.jsxs(e.Fragment,{children:[e.jsx(z,{user:r,setUser:u,setUuid:j,setIsAccepted:d,level:N,setLevel:g}),e.jsx(re,{}),e.jsx(Se,{setWfh:F}),e.jsx("div",{className:"",children:e.jsxs("div",{className:"info-div-of-users",children:[e.jsxs("div",{className:"wfh-request",children:[e.jsxs("form",{onSubmit:U,className:"wfh-text",children:[e.jsxs("div",{className:"wfh-which",children:[e.jsx("h3",{onClick:()=>D("WFH"),children:" WFH "}),e.jsx("h3",{onClick:()=>D("TimeOff"),children:" TimeOff "})]}),e.jsxs("p",{children:[" ",b," "]}),e.jsxs("div",{className:"share-wfh-input",children:[e.jsx("label",{children:" Start Date : "}),e.jsx("input",{type:"date",name:"start",onChange:i=>o(i.target.value)})]}),e.jsxs("div",{className:"share-wfh-input",children:[e.jsx("label",{children:" Return Date : "}),e.jsx("input",{type:"date",name:"end",onChange:i=>m(i.target.value)})]}),e.jsx("textarea",{placeholder:"reason of WFH",onChange:i=>y(i.target.value)}),e.jsx("button",{children:"Request "})]}),e.jsx("div",{children:e.jsxs("button",{onClick:I,children:[" ",B," "]})})]}),e.jsx("div",{className:"history",style:W.length>0?{display:"block"}:{display:"none"},children:e.jsx("div",{className:"history-inside",children:W.map(i=>Object.entries(i).map(([p,x])=>{const{reason:C,user:v,time:E}=x;return e.jsxs("div",{children:[e.jsxs("p",{children:[" ",v," "]}),e.jsxs("p",{children:[" ",C]}),e.jsxs("p",{children:[" ",E]}),"------------"]},p)}))})})]})})]})}function Ee(){Z();const[r,u]=t.useState(""),[f,j]=t.useState(""),[N,g]=t.useState(""),[h,d]=t.useState("waiting"),[a,o]=t.useState(""),[c,m]=t.useState(""),[l,y]=t.useState("waiting");ee();const[b,D]=t.useState([]),A=async()=>{try{return k.collection("admin").onSnapshot(n=>{const S=n.docs.map(w=>({id:w.id,...w.data()}));S.sort((w,oe)=>w.id-oe.id),D(S)})}catch(s){console.error("Error fetching work data:",s)}};t.useEffect(()=>{A()},[]);const[F,U]=t.useState([]),[B,P]=t.useState([]),[H,I]=t.useState(""),[W,i]=t.useState(),[p,x]=t.useState(!1),[C,v]=t.useState(""),E=b.map(s=>s.Name),J=s=>{const n=q(R,l),S=T(n,s);he(S).then(()=>{console.log("Document successfully deleted!")}).catch(w=>{console.error("Error removing document:",w)})};function K(s){const n=q(R,"group"),S=T(n,s);_(S,{[r]:0},{merge:!0})}const $=s=>{const n=T(R,"group",s);_(n,{new:"Read"}).then(()=>{console.log("Field successfully updated")}).catch(w=>{})},[ne,ae]=t.useState(!1),[L,ie]=t.useState(!1),[G,ce]=t.useState(!1);t.useEffect(()=>{setTimeout(()=>{ae(!0)},1e3)},[]);const Q=F.map(s=>s[r]).reduce((s,n)=>s+n,null),[M,V]=t.useState("");return e.jsxs(e.Fragment,{children:[e.jsx(ve,{privateChat:l,setChat:I,setDesignerChat:P,setMessage:U}),e.jsx(re,{}),e.jsx(z,{setUser:u,user:r,setUuid:j,setIsAccepted:g,level:h,setLevel:d}),h===0&&e.jsx(e.Fragment,{children:e.jsx("div",{children:e.jsx(ye,{})})}),h>7?e.jsxs(e.Fragment,{children:["  ",e.jsxs("div",{className:"profile",children:[e.jsxs("div",{style:{margin:"auto",backgroundColor:"white",borderBottom:"2px solid gold"},children:[" ",e.jsx(se,{})," "]}),e.jsx("div",{className:"ttt"}),e.jsxs("div",{className:"real-admin-links",children:[e.jsx(me,{}),e.jsx("button",{onClick:()=>{V("wfh")},children:" WFH "}),e.jsx("img",{className:"style-meeting",src:pe,style:{cursor:"pointer",width:"50px",height:"50px"},onClick:()=>{x(p!==!0),V("chat")}}),h===11?e.jsx("button",{onClick:()=>V("survey"),children:" Survey "}):null]}),M==="chat"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"chat-container",children:[e.jsxs("div",{className:"group-text",children:[e.jsxs("h2",{onClick:()=>ce(G!==!0),children:[" ",G===!1?"Show Priority":"Show All","  "]}),e.jsxs("form",{className:"form-private",onSubmit:s=>s.preventDefault(),children:[e.jsxs("div",{children:[e.jsx("textarea",{onChange:s=>m(s.target.value),value:c,className:"textarea",placeholder:`Send message to ${C} ${L===!0&&C==="Group"?" [Priority] ":""}`}),e.jsx("img",{src:O,onClick:()=>{ie(L===!1)},className:"img-imp",style:{width:"2rem"}})]}),a==="designer"?e.jsx(X,{allUid:E,user:r,sendTo:a,text:c,uuid:f,imp:L}):null,a==="group"?e.jsx(X,{allUid:E,setText:m,user:r,sendTo:a,text:c,uuid:f,imp:L}):null,a!=="designer"&&a!=="group"?e.jsx(xe,{user:r,setText:m,sendTo:a,text:c,trueChat:W}):null]}),l==="group"&&e.jsx(e.Fragment,{children:G===!0?F.map((s,n)=>e.jsxs("div",{className:"indi-group-text",onClick:()=>$(s.id),children:[" ",s.imp>""?e.jsxs("h2",{className:"style-this-h2",children:["  ",e.jsx("img",{src:O,style:{width:"40px",height:"40px"}})," ",s.text," - ",s.sendBy," "]}):null,s.imp>""?e.jsx("img",{style:{width:"50px",height:"50px",cursor:"pointer"},src:Y,onClick:S=>J(s.id)}):null," ",e.jsx("hr",{})," "]},n)):F.map((s,n)=>e.jsxs("div",{className:"indi-group-text",onClick:()=>$(s.id),children:[e.jsxs("h2",{className:"style-this-h2",onClick:()=>K(s.id),children:["  ",s.imp>""?e.jsx("img",{src:O,style:{width:"40px",height:"40px"}}):null," ",s.text," - ",s.sendBy," "]}),e.jsx("img",{style:{width:"50px",height:"50px",cursor:"pointer"},src:Y,onClick:S=>J(s.id)})," ",e.jsx("hr",{})," "]},n))}),l==="designer"&&e.jsx(e.Fragment,{children:B.map((s,n)=>e.jsx("div",{className:"indi-group-text",onClick:()=>$(s.id),children:e.jsxs("h2",{className:"style-this-h2",onClick:()=>K(s.id),children:["  ",s.imp>""?e.jsx("img",{src:O,style:{width:"40px",height:"40px"}}):null," ",s.text," - ",s.sendBy," "]})},n))}),l!=="group"&&e.jsx(e.Fragment,{children:l&&e.jsx(e.Fragment,{children:Object.entries(H).map(([s,n])=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},className:"style-private-chat",children:[e.jsxs("h2",{className:"indi-group-text",children:["  ",e.jsx("img",{src:fe,style:{width:"20px",height:"20px",marginRight:"10px"}}),"  ",s," "]}),e.jsxs("h2",{children:["   ",n," "]}),e.jsx("hr",{style:{color:"black",width:"100px"}})]},s))})})]}),e.jsxs("div",{className:"list",children:[h>8&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"dont-hide",children:[e.jsxs("h2",{onClick:()=>{o("group"),v("Group"),y("group"),x(p!==!0)},style:{cursor:"pointer"},className:"h2-noti",children:[" Group  ",e.jsxs("p",{style:{fontSize:"14px",color:"red"},children:[" ",Q>0?Q:""," "]})]}),e.jsx("h2",{onClick:()=>{o("designer"),v("designer"),y("designer"),x(p!==!0)},style:{cursor:"pointer"},className:"h2-noti",children:" Designer  "}),b.map((s,n)=>e.jsx("div",{children:e.jsxs("h2",{style:{cursor:"pointer"},onClick:()=>{o("chat"+r+s.Name),y("chat"+r+s.Name),i("chat"+s.Name+r),v(s.Name),x(p!==!0)},children:[" ",s.Name," "]},n)},n))]})}),p&&h===8&&e.jsx(e.Fragment,{children:e.jsxs("div",{style:{backgroundColor:"white",width:"125px",padding:"10px",borderRadius:"10px",color:"black"},children:[e.jsx("h2",{onClick:()=>{o("designer"),v("designer"),y("designer"),x(!1)},style:{cursor:"pointer"},className:"h2-noti",children:" Chat  "}),b.map((s,n)=>e.jsx("div",{children:e.jsxs("h2",{style:{cursor:"pointer"},onClick:()=>{o("chat"+r+s.Name),y("chat"+r+s.Name),v(s.Name),x(!1)},children:[" ",s.Name," "]},n)},n))]})})]})]})}),M==="wfh"&&e.jsx(e.Fragment,{children:e.jsx(Ne,{})}),M==="survey"&&e.jsx(e.Fragment,{children:e.jsx(je,{})})]}),"  ",e.jsx(te,{})," "]}):null,ne===!1&&e.jsx(e.Fragment,{children:e.jsx(le,{})})]})}export{Ee as default};
