import{r as o,b as U,f as y,a as e,j as s,F as N,ae as F,n as L,h as D,i as S,l as k,z as O,k as C,m as j}from"./index-680c1b13.js";import{L as G}from"./Profile-ba2d3ef7.js";import{Q as I,B as M}from"./ReactToastify-aa7e8f46.js";import"./useLogo-28cee2dd.js";import"./defineProperty-381500fa.js";import"./Version-343360e2.js";function B(){const[r,l]=o.useState(null);return o.useEffect(()=>U.onAuthStateChanged(x=>{x?y.collection("admin").doc(x.uid).get().then(i=>{const a=i.data();l(a.dateJoined)}):(setUser(null),setLevel(null))}),[]),e("div",{className:"lg:float-right pt-6",children:e("header",{className:"text-white phones:text-md text-lg font-bold",children:s("p",{children:["Account created on: ",r]})})})}function H({user:r,level:l}){const[f,x]=o.useState(!1),i=new Date().getHours();let a;i<12?a="Good morning":i<18?a="Good afternoon":a="Good evening";const c=new Date,d="5";return s("div",{className:" phones:mb-4 p-5 border w-[75vw] phones:w-[90vw] border-y-[#2c1f42] phones:m-auto border-x-[#2f3763] rounded-lg shadow text-left bg-[#111d39]  ",children:[s("p",{className:"text-xl xl:text-7xl text-white font-bold pb-5",children:[" ",a,",",e("br",{}),s("span",{className:"text-green-400  font-bold  text-xl  xl:text-4xl",children:[r,"!"]})]}),e("p",{className:"text-gray-400  text-xs md:text-lg",children:c.toString().slice(0,15)}),s("button",{onClick:()=>{x(!f),localStorage.setItem("showNewUpdates",d)},className:"text-white mt-2  focus:ring-4 focus:outline-none  font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center bg-blue-600 hover:bg-blue-700 focus:ring-blue-800",type:"button",children:[localStorage.getItem("showNewUpdates")===d?"No updates":"New Updates",e("svg",{className:"w-2.5 h-2.5 ms-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6",children:e("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 4 4 4-4"})})]}),f&&e("div",{className:"z-10  absolute text-black font-semibold bg-white divide-y divide-gray-100 rounded-bl-xl rounded-br-xl rounded-tl-md rounded-tr-md shadow w-44 ",children:e("ul",{className:"py-2 text-sm ",children:e("li",{children:s("h1",{className:"block px-4 py-2 max-h-[400px] overflow-auto",children:["Hello ",r,"! There have been updates to Media Pilot:",s("ul",{className:"list-disc list-inside mt-2",children:[e("li",{children:"Designers can now see how many post they have open"}),l>9&&s(N,{children:[" ",e("li",{children:" You can now select which desiger to assign  "})," "]})]})]})})})}),e(B,{user:r,level:l})]})}function J({setRound:r,user:l}){const f=async()=>{try{return y.collection("partner").onSnapshot(async i=>{const a=i.docs.map(c=>({id:c.id,...c.data()}));r(a.map(c=>c.name))})}catch{console.log("loading")}};o.useEffect(()=>{f()},[l])}function P({scheduleData:r,setScheduleData:l,level:f,user:x}){const{postSchedule:i,number:a,setNumber:c}=o.useContext(F),d=["bg-gradient-to-r from-green-700 to-green-800","bg-gradient-to-r from-blue-700 to-blue-800","bg-gradient-to-r from-indigo-700 to-indigo-800","bg-gradient-to-r from-purple-700 to-purple-800","bg-gradient-to-r from-pink-700 to-pink-800","bg-gradient-to-r from-teal-700 to-teal-800","bg-gradient-to-r from-lime-700 to-lime-800","bg-gradient-to-r from-emerald-700 to-emerald-800","bg-gradient-to-r from-fuchsia-700 to-fuchsia-800"],[t,h]=o.useState("");o.useEffect(()=>{h(d[Math.floor(Math.random()*d.length)])},[]);const g=i.slice(0,a);return s("div",{className:"inline-flex bg-secondary  flex-col mt-10 gap-5 lg:w-[35vw] border border-y-[#2c1f42] border-x-[#2f3763] phones:p-10 phones:w-screen phones:m-auto  p-4 max-h-[500px] phones:max-h-[300px] overflow-y-auto",children:[s("section",{className:"flex flex-col items-start justify-between",children:[s("h2",{className:"text-white mb-2 phones:text-lg  text-2xl font-semibold",children:["Today's Events - ",i.length]}),s("div",{className:"flex flex-row items-center justify-between gap-6",children:[e("button",{onClick:u=>c(a-5),children:" - "}),e("h1",{children:a}),e("button",{onClick:u=>c(a+5),children:" + "})]}),e("hr",{className:"bg-white w-full"})]}),g.map((u,w)=>{if(u.client!=="Test")return s("div",{className:"grid grid-cols-3 items-start text-center  justify-between text-black p-2 rounded-lg",style:{backgroundColor:u.color},children:[s("p",{children:[" Client: ",u.client]}),s("p",{children:["Scheduled: ",u.month,"-",u.date]}),s("p",{children:["Status: ",u.status]})]},w)})]})}function z({user:r,setData:l,data:f,setMatchingData:x,matchingData:i,month:a}){const c=()=>{try{return y.collection("partner").onSnapshot(h=>{const g=h.docs.map(u=>({id:u.id,...u.data()}));l(g)})}catch(t){console.error("Error fetching data: ",t)}};o.useEffect(()=>{const t=c();return()=>t()},[a]);const d=async()=>{try{const t=f.map(w=>y.collection(w.name).doc(a).get().then(b=>{if(b.exists){const n=b.data();return Object.keys(n).map(p=>{const m=n[p];return m.user?{client:m.client,AssignedTo:m.AssignedTo,month:m.month,post:m.count,Time:m.Time}:null}).filter(p=>p!==null).sort((p,m)=>p.order-m.order)}else return[]})),u=(await Promise.all(t)).flat().filter(w=>w.AssignedTo===r);x(u)}catch(t){console.error("Error fetching data:",t)}};return o.useEffect(()=>{d()},[a]),e(N,{children:i.length===0?e("h1",{className:"text-left",children:"No current task"}):i.map((t,h)=>r===t.AssignedTo?e("div",{className:"max-h-500px phones:max-h-300px overflow-y-auto",children:s("li",{className:"flex flex-row items-center justify-between",children:[s("div",{className:"flex flex-row items-center gap-2",children:[e("div",{className:"w-2 h-2 rounded-full bg-green-500"}),e("p",{className:"text-white",children:t.client})]}),e("p",{className:"text-white",children:t.month}),e("p",{className:"text-white",children:t.post}),e("p",{className:"text-white",children:t.Time})]})},t.id||h):null)})}function W({user:r}){const[l,f]=o.useState([]),[x,i]=o.useState([]),[a,c]=o.useState(""),d=new Date,t=d.getFullYear().toString(),h=(d.getMonth()+1).toString().padStart(2,"0");return o.useEffect(()=>{c(`${t}-${h}`)},[h]),s("div",{className:"inline-flex bg-secondary flex-col mt-10 gap-5 lg:w-[35vw] border border-y-[#2c1f42] border-x-[#2f3763] phones:p-10 phones:w-screen phones:m-auto  p-4 max-h-[400px] lg:max-h-[800px] overflow-y-auto",children:[s("section",{className:"flex flex-col items-start justify-between",children:[e("h2",{className:"text-white mb-2 phones:text-lg  text-2xl font-semibold",children:"Current Task"}),e("input",{date:d,className:"bg-[#2f3763] text-white w-full p-2 rounded-md",type:"month",value:a,onChange:g=>c(g.target.value)}),e("hr",{className:"bg-white w-full mt-2"})]}),e(z,{setData:f,month:a,data:l,user:r,setMatchingData:i,matchingData:x})]})}function Y({user:r,setData:l,data:f,setMatchingData:x,matchingData:i,month:a}){const c=()=>{try{return y.collection("partner").onSnapshot(h=>{const g=h.docs.map(u=>({id:u.id,...u.data()}));l(g)})}catch(t){console.error("Error fetching data: ",t)}};o.useEffect(()=>{const t=c();return()=>t()},[a,r]);const d=async()=>{try{const t=f.map(w=>y.collection(w.name).doc(a).get().then(b=>{if(b.exists){const n=b.data();return Object.keys(n).map(p=>{const m=n[p];return m.user?{client:m.client,month:m.month,post:m.count,Time:m.Time,text:m.TextWrittenBy||m.DesignUploadedBy}:null}).filter(p=>p!==null).sort((p,m)=>p.order-m.order)}else return[]})),u=(await Promise.all(t)).flat().filter(w=>w.Time);x(u)}catch(t){console.error("Error fetching data:",t)}};return o.useEffect(()=>{d()},[a,r,f]),e(N,{children:i.length===0?e("h1",{className:"text-left",children:"No current task"}):i.map((t,h)=>{const g=new Date(t.Time);return Math.abs(new Date-g)/36e5<=24&&e("div",{className:" phones:w-screen  grid grid-cols-1 items-center",children:e("ul",{children:s("li",{className:" grid    justify-items-center  grid-cols-5   gap-5 items-center laptop:justify-between phones:text-xs ",children:[s("div",{className:"flex items-center gap-1",children:[e("div",{className:"w-2 h-2 rounded-full bg-green-500"}),s("p",{className:"text-white phones:w-[30px]",children:[t.client.slice(0,10),".."]})]}),e("p",{className:"text-white phones:w-[50px]",children:t.month}),e("span",{className:"text-white phones:w-[10px]",children:t.post}),e("p",{className:"text-white w-[80px]",children:t.Time.slice()}),e("p",{className:"text-white phones:w-[80px]",children:t.text})]})})},t.id||h)})})}function q({user:r}){const[l,f]=o.useState([]),[x,i]=o.useState([]),[a,c]=o.useState(""),d=new Date,t=d.getFullYear().toString(),h=(d.getMonth()+1).toString().padStart(2,"0");return o.useEffect(()=>{c(`${t}-${h}`)},[h]),s("div",{className:"inline-flex bg-secondary flex-col mt-10 gap-5 w-[70vw] m-auto border border-y-[#2c1f42] border-x-[#2f3763] phones:max-h-[200px] phones:w-screen phones:m-auto  phones:px-10 phones:py-10 p-4 max-h-[400px] lg:max-h-[500px] rounded overflow-x-auto overflow-y-auto",children:[s("section",{className:"flex flex-col items-start justify-between",children:[e("h2",{className:"text-white mb-2 phones:text-lg  text-2xl font-semibold",children:"Latest Task Done"}),e("input",{date:d,className:"bg-[#2f3763] text-white w-full p-2 rounded-md",type:"month",value:a,onChange:g=>c(g.target.value)}),e("hr",{className:"bg-white w-full mt-2"})]}),e(Y,{setData:f,month:a,data:l,user:r,setMatchingData:i,matchingData:x})]})}function V(){const[r,l]=o.useState(new Date().getMonth()+1),[f,x]=o.useState(new Date().toISOString().slice(0,7)),[i,a]=o.useState([]);o.useState([]);const{user:c,pto:d,wfh:t,level:h}=o.useContext(L),g=n=>{const p=n.target.value.split("-")[1];l(parseInt(p,10)),x(n.target.value)},u=async n=>{const{user:p,askedOn:m}=n,v=D(C,"Request"),T=S(v,`${p}`);await k(T,{[`${n.month}/${n.day}`]:{accepted:"Approved"}},{merge:!0}),M.success("granted")};async function w(n){const{uuid:p,type:m,user:v,askedOn:T}=n,E=D(C,"Request"),A=S(E,`${v}`);await k(A,{[`${n.month}/${n.day}`]:{accepted:"Denied"}},{merge:!0}),M.error("Denied");const $=D(C,"admin"),R=S($,p);await k(R,{[m]:O(1)},{merge:!0})}const b=i.flatMap(n=>n.filter(p=>p.user));return s("div",{className:"inline-flex bg-secondary flex-col  mt-10 gap-5  border border-y-[#2c1f42] border-x-[#2f3763] phones:px-8 phones:w-screen phones:m-auto  px-4 max-h-[400px] lg:max-h-[800px] lg:overflow-y-auto",children:[e(G,{user:c,monthNumber:f,setData:a,monthNumbers:f,pto:d,wfh:t}),e(I,{position:"top-center"}),s("section",{className:"flex flex-col items-start justify-between  ",children:[e("h2",{className:"text-white mb-2 phones:text-lg  text-2xl font-semibold",children:"Current Leave"}),e("input",{type:"month",value:f,onChange:g,className:"text-white rounded-md mb-2 bg-[#2f3763]"}),e("hr",{className:"bg-white w-full "}),b&&b.length>0?b.map((n,p)=>e("div",{className:"flex flex-col gap-2 py-2 px-1 text-white  ",children:(n&&n.user&&c===n.user&&h>7||h>9)&&n.month===r?s("section",{className:`${n.accepted?"bg-blue-900 text-white":"bg-red-900"} flex flex-row gap-2 lg:w-[500px]  p-2 rounded-md phones:gap-1 items-center mt-5 max-h-[300px] phones:text-xs`,children:[s("p",{className:"text-white phones:w-[100px]",children:[n.type," "]}),h>9&&n.accepted==="pending"&&s(N,{children:[e("button",{className:"bg-blue-500 text-white p-1 rounded ",onClick:()=>{u(n)},children:"Grand"}),e("button",{className:"bg-red-500 text-white p-1 rounded",onClick:()=>{w(n)},children:"Deny"})]}),e("p",{className:"text-white ",children:n.user}),s("p",{className:"text-white ",children:["Date: ",n.month,"/",n.day]}),e("p",{className:`${n.accepted!==""?"flex":"hidden"} phones:w-[100px]`,children:n.accepted}),e("p",{className:`${n.accepted===""?"flex":"hidden"} text-white phones:w-[100px]`,children:"Waiting"})]}):null},p)):e("div",{className:" lg: min-w-[400px] phones:min-w-screen overflow-hidden",children:e("h1",{className:"text-center",children:"No current leaves"})})]})]})}function te({user:r,level:l}){const[f,x]=o.useState([]);o.useState([]),o.useState([]),o.useState([]);const[i,a]=o.useState([]),c={hidden:{opacity:1,scale:0},visible:{opacity:1,scale:1,transition:{delayChildren:.3,staggerChildren:.2}}},d={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return s("div",{className:" text-center text-white w-[75vw]   phones:w-auto flex items-center justify-start xl:items-start xl:justify-between flex-col lg:flex-row mb-5 mt-5 gap-10 hello",children:[e(J,{setRound:x,user:r}),e(j.div,{className:"inline-flex phones:flex-col phones:gap-2 gap-10",variants:c,initial:"hidden",animate:"visible",children:s(j.div,{className:"",variants:d,children:[e(H,{user:r,level:l}),s("section",{className:"flex gap-3 flex-wrap justify-between phones:flex-col ",children:[l>9||r==="Saskia"?e(q,{user:r,level:l}):null,e(W,{user:r,level:l}),e(P,{user:r,level:l,scheduleData:i,setScheduleData:a}),l>5?e(V,{user:r}):null]}),e("section",{className:"mt-10 flex gap-5 flex-row phones:flex-col"})]})})]})}export{te as default};
