import{r as s,l as $,u as D,j as e}from"./index-bee08673.js";import{f as b,U as B,_ as v,b as S,c as P,m as _,a as G,d as R}from"./index.esm2017-49ab2fc4.js";import{T as z}from"./Title-69549db7.js";function J({setWfh:n}){const c=async()=>{try{return b.collection("notInOffice").onSnapshot(d=>{const u=d.docs.map(a=>({id:a.id,...a.data()}));u.sort((a,m)=>a.id-m.id),n(u)})}catch(o){console.error("Error fetching WFH data:",o)}};s.useEffect(()=>{c()},[])}function V(){$();const[n,c]=s.useState(""),[o,d]=s.useState(""),[u,a]=s.useState(""),[m,q]=s.useState("");D();const[r,w]=s.useState(""),[x,O]=s.useState(""),[j,N]=s.useState(""),[l,p]=s.useState(""),[W,y]=s.useState(""),[C,T]=s.useState([]);s.useEffect(()=>{y(localStorage.getItem("AdminCheck"))},[]);function F(t){t.preventDefault();const i=v(R,"admin"),f=S(i,o);P(f,{notOffice:`${r} - ${x}`,reason:j,typeOfLeave:l,request:"Waiting Request",time:r},{merge:!0});const g=v(R,"notInOffice"),h=S(g,n);_(h,{[r]:{notOffice:`${r} - ${x}`,reason:j,typeOfLeave:l,request:"Waiting Request",user:n,time:r}},{merge:!0})}const[k,E]=s.useState();function I(){return s.useEffect(()=>{G.onAuthStateChanged(t=>{t?b.collection("admin").doc(t.uid).get().then(i=>{E(i.data().request)}):c(null)})},[n]),n}I();function A(){}const H=C.filter(t=>t.id===W);return e.jsxs(e.Fragment,{children:[e.jsx(B,{user:n,setUser:c,setUuid:d,setIsAccepted:q,level:u,setLevel:a}),e.jsx(z,{}),e.jsx(J,{setWfh:T}),e.jsx("div",{className:"",children:e.jsxs("div",{className:"info-div-of-users",children:[e.jsxs("div",{className:"wfh-request",children:[e.jsxs("form",{onSubmit:F,className:"wfh-text",children:[e.jsxs("div",{className:"wfh-which",children:[e.jsx("h3",{onClick:()=>p("WFH"),children:" WFH "}),e.jsx("h3",{onClick:()=>p("TimeOff"),children:" TimeOff "})]}),e.jsxs("p",{children:[" ",l," "]}),e.jsxs("div",{className:"share-wfh-input",children:[e.jsx("label",{children:" Start Date : "}),e.jsx("input",{type:"date",name:"start",onChange:t=>w(t.target.value)})]}),e.jsxs("div",{className:"share-wfh-input",children:[e.jsx("label",{children:" Return Date : "}),e.jsx("input",{type:"date",name:"end",onChange:t=>O(t.target.value)})]}),e.jsx("textarea",{placeholder:"reason of WFH",onChange:t=>N(t.target.value)}),e.jsx("button",{children:"Request "})]}),e.jsx("div",{children:e.jsxs("button",{onClick:A,children:[" ",k," "]})})]}),e.jsx("div",{className:"history",children:e.jsx("div",{className:"history-inside",children:H.map(t=>Object.entries(t).map(([i,f])=>{const{user:g,reason:h,user:U,time:L}=f;return e.jsxs("div",{children:[e.jsxs("p",{children:[" ",U," "]}),e.jsxs("p",{children:[" ",h]}),e.jsxs("p",{children:[" ",L]}),"------------"]},i)}))})})]})})]})}export{V as default};
