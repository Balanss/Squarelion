import{r as s,a as r,F as U,j as e,m as P,g as S,h as ee,_ as T,c as z,d as I,y as $e,R as je,e as Le,U as Oe,Q as ze,K as C}from"./index-c0bd30d0.js";import{r as ae,g as se,u as re,a as oe,N as Ae,m as te}from"./Nav-2de9139c.js";import{M as Ve,B as _e,T as Je,D as Ke}from"./DesignerFunctions-437190b6.js";import{T as Qe}from"./Typography-3dd98774.js";function We(){const[d,c]=s.useState(!1);return r(U,{children:[r("div",{className:"border-yellow-500 border-t-2 mt-3 bg-slate-700 flex items-center w-full justify-center gap-10 p-5",children:[e("h1",{className:"text-4xl font-sans font-bold text-slate-200 text-center ",children:"Squarelion Designer Page"}),e("div",{className:"text-center bg-slate-700 ",children:e("button",{onClick:()=>c(!d),style:{backgroundColor:"#f8f9fa",color:"#333",border:"1px solid #ced4da",borderRadius:"4px",padding:"10px 20px",fontSize:"16px",cursor:"pointer",transition:"all 0.3s ease"},onMouseOver:m=>m.currentTarget.style.backgroundColor="#e9ecef",onMouseOut:m=>m.currentTarget.style.backgroundColor="#f8f9fa",children:d?"Close tooltip":"Open tooltip"})}),e("h6",{className:"fixed bottom-1 left-2 text-[10px] text-white",children:"V 0.6"})]}),e("div",{children:d&&r("article",{className:"flex flex-row items-stretch justify-around w-full h-full p-10 bg-gray-100  dark:bg-slate-700",children:[r("div",{className:"block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700",children:[e("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white",children:"Click upload image"}),e("p",{className:"font-normal text-gray-700 dark:text-gray-400",children:"Step 1"})]}),r("div",{className:"block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700",children:[e("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white",children:"Click finish to complete"}),e("p",{className:"font-normal text-gray-700 dark:text-gray-400",children:"Step 2"})]}),r("div",{className:"block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700",children:[e("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white",children:"To see the instructions click on the view button"}),e("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white",children:"For now you can only upload 4 image at a time and 1 pdf file"}),e("p",{className:"font-normal text-gray-700 dark:text-gray-400",children:"Note"})]})]})})]})}function Ye({name:d,user:c,dPost:m,dMonth:g,dPage:l,setSuccessfully:u,setImageUrls:b,setFiles:y}){return r("label",{children:[e("input",{type:"file",accept:"image/*",multiple:!0,onChange:async a=>{const h=a.target.files;if(!h||h.length>4){alert("You can only upload a maximum of 4 files at once.");return}const w=Array.from(h).map(i=>{const p=ae(se(),`products/${d}/${i.name}`),n=re(p,i);return new Promise((N,v)=>{n.on("state_changed",o=>{const R=o.bytesTransferred/o.totalBytes*100;u(`Uploading ${R}%`)},o=>{console.error("Upload Error:",o),v(o)},async()=>{const o=await oe(n.snapshot.ref);N({url:o,type:i.type})})})});try{const i=await Promise.all(w),p=i.filter(o=>o.type==="application/pdf").map(o=>o.url),n=i.filter(o=>o.type.startsWith("image/")).map(o=>o.url),N={designer:n[0]||"",designer1:n[1]||"",designer2:n[2]||"",designer3:n[3]||""},v={pdf:p[0]||""};if(n[0]){const o={...N,DesignedUploadedBy:c};await P(S(ee,"DesignerPage",m+g+l),o,{merge:!0})}else if(p[0]){const o={...v,DesignedUploadedBy:c};await P(S(ee,"DesignerPage",m+g+l),o,{merge:!0})}b(n),y(h),u("Files have been uploaded. Click view button to view them!"),setTimeout(()=>{u("")},7e3)}catch(i){console.error("Error updating Firestore:",i)}}})," Upload"]})}function qe({user:d,message:c,setMessage:m,dPost:g,dMonth:l,setContent:u,dPage:b,arrayUnion:y}){return r("form",{onSubmit:async a=>{a.preventDefault();const h=T(I,"DesignerPage"),w=S(h,g+l+b);z(w,{subject:y(c+" - "+d),New:!1});const i=T(I,b),p=S(i,l);P(p,{[g+l]:{color:"#FF4500",status:"Feedback",statusText:"Feedback"}},{merge:!0}).catch(n=>console.error("Error updating document:",n)),u(n=>[...n,c+" - "+d]),setTimeout(()=>{m("")},2e3)},children:[e("input",{type:"text",value:c,onChange:a=>m(a.target.value),placeholder:"Enter your message here",className:"border-2 border-black p-2 rounded-md"}),e("button",{className:"bg-blue-700 text-white p-2 rounded-md hover:bg-blue-800  ml-1 cursor-pointer",children:"Send"})]})}const Ge={position:"absolute",bottom:"0",top:"35%",left:"60%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,overflow:"scroll"};function Xe({openModal:d,handleClose:c,image:m,image1:g,image2:l,image3:u,content:b,user:y,message:f,setMessage:a,dPost:h,dMonth:w,dPage:i,setContent:p,arrayUnion:n,exampleImg:N,exampleImg1:v,exampleImg2:o,exampleImg3:R}){const F={user:y,message:f,setMessage:a,dPost:h,dMonth:w,dPage:i,setContent:p,arrayUnion:n};return e(Ve,{open:d,onClose:c,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",className:"max-w-[80vw] max-h-[80vw]  ",children:e(_e,{sx:Ge,children:r(Qe,{id:"modal-modal-title",variant:"h6",component:"h2",style:{textAlign:"center"},children:[e("div",{children:e("button",{className:"bg-red-700 text-white p-2 rounded-md hover:bg-red-800  mb-5 cursor-pointer",onClick:c,children:"Close"})}),r("section",{className:"flex lg:w-[90vw] flex-row items-center flex-wrap content-center  gap-5 justify-center",children:[e("img",{className:"w-[300px]",src:m}),e("img",{className:"w-[300px]",src:g}),e("img",{className:"w-[300px]",src:l}),e("img",{className:"w-[300px]",src:u}),e("hr",{className:"w-full border-2 border-black"}),r("div",{children:[b.map((M,B)=>r("div",{className:"text-left ",children:[r("p",{className:"w-[80%] m-auto whitespace-pre-wrap ",children:[" ",M]}),e("br",{})]},B)),e(qe,{...F}),r("div",{className:"flex flex-row items-center mt-3",children:[e("img",{className:"w-[200px]",src:N}),e("img",{className:"w-[200px]",src:v}),e("img",{className:"w-[200px]",src:o}),e("img",{className:"w-[200px]",src:R})]})]})]})]})})})}function Ze({newDesigner:d,db:c,id:m,collection:g,doc:l,setDoc:u,user:b,setImageUrl:y}){return e("button",{className:"bg-slate-800 text-white p-2 rounded-md hover:bg-gray-900 cursor-pointer",onClick:async()=>{d.map((a,h)=>{if(m===h){if(console.log("success",a.post),a.month.includes("2023")){const p=g(c,a.page),n=l(p,a.post+a.month);u(n,{designer:a.designer||"",designer1:a.designer1||"",designer2:a.designer2||"",designer3:a.designer3||"",pdf:a.pdf||a.psd,hide:!0,color:"#00eaff",status:"Design Done",StatusText:"Design Done",DesignUploadedBy:b},{merge:!0})}else{const p=g(c,a.page),n=l(p,a.month);u(n,{[a.post+a.month]:{designer:a.designer||"",designer1:a.designer1||"",designer2:a.designer2||"",designer3:a.designer3||"",pdf:a.pdf||a.psd,hide:!0,color:"#00eaff",status:"Design Done",StatusText:"Design Done",DesignUploadedBy:b,Time:new Date().toLocaleString()}},{merge:!0})}const w=g(c,"DesignerPage"),i=l(w,a.post+a.month+a.page);$e(i),y("")}})},children:"Send"})}function lt(){const[d,c]=s.useState([]),[m,g]=s.useState([]),[l,u]=s.useState(""),[b,y]=s.useState(""),[f,a]=s.useState(""),[h,w]=s.useState(""),[i,p]=s.useState(""),[n,N]=s.useState(""),[v,o]=s.useState(""),[R,F]=s.useState(""),[M,B]=s.useState(""),[ne,le]=s.useState(""),[ce,ie]=s.useState(""),[de,me]=s.useState(""),[pe,E]=s.useState(""),[ge,A]=s.useState([]),[et,ue]=s.useState([]),[tt,he]=s.useState([]),[be,V]=je.useState(!1),fe=()=>V(!0),xe=()=>V(!1),[ye,we]=s.useState(""),[at,Ne]=s.useState(),[_,J]=s.useState(""),[K,Q]=s.useState(""),[W,Y]=s.useState(""),[ve,H]=s.useState(!1),[Se,ke]=s.useState(""),[De,Re]=s.useState(""),[Ce,Te]=s.useState(""),$=d.filter(t=>f!==11?!t.id.endsWith("Test"):!0);function Ie(t){$.map((x,Be)=>{if(t===Be){const j=m,Ee=ae(se(),`products/${j.name}`),X=re(Ee,j);X.on("state_changed",D=>{const L=D.bytesTransferred/D.totalBytes*100;me(`Uploading ${L}%`)},D=>{console.error(D)},async()=>{const D=await oe(X.snapshot.ref),L=T(I,"DesignerPage"),He=S(L,x.post+x.month+x.page),O=j.type==="application/pdf"?"pdf":"designer",Z={};Z[O]=D,await z(He,Z,{merge:!0}),console.log("success"),E(`${O.toUpperCase()} has been uploaded. Click view button to view ${O}!`),setTimeout(()=>{E("")},7e3)})}else return console.log("error")})}function Ue(){H(!0)}const[q,Pe]=s.useState(!0);s.useEffect(()=>{setTimeout(()=>{Pe(!1)},1e3)});const Fe={name,user:l,dPost:_,dMonth:K,dPage:W,setSuccessfully:E,setImageUrls:ue,setFiles:he},Me={initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3}},[k,G]=s.useState(JSON.parse(localStorage.getItem("hiddenRows"))||[]);return s.useEffect(()=>{localStorage.setItem("hiddenRows",JSON.stringify(k))},[k]),r(U,{children:[q&&e(U,{children:e(Le,{})}),r("div",{className:" min-h-[100vh] pb-10 bg-primary",children:[e(Ae,{})," ",r("div",{className:"",children:[e(Oe,{user:l,setUser:u,setUuid:y,uuid:b,setLevel:a}),e(Je,{}),e("section",{children:e(We,{level:f})}),r("div",{className:" pt-[50px]",children:[r("div",{className:"flex flex-col items-center px-10 overflow-x-hidden",children:[e(Ke,{setDesignerData:c,designerData:d,user:l,setNoti:Ne}),e("div",{className:"mb-5",children:k.length>0&&r("button",{onClick:()=>G([]),className:"bg-blue-700 text-white p-2 rounded-md hover:bg-blue-800 cursor-pointer relative z-[2]",children:["Show ",k.length," hidden rows"]})}),!q&&e(te.section,{...Me,children:r("table",{className:"w-full text-sm text-left text-gray-300 shadow-md shadow-slate-800",children:[e("thead",{className:'className="text-xs  uppercase  bg-gray-700 text-gray-200',children:r("tr",{className:"text-center",children:[e("th",{className:"p-[1px]"}),e("th",{className:"px-4 py-2",children:"Image"}),e("th",{className:"px-4 py-2",children:"Date"}),e("th",{className:"px-4 py-2",children:"Client"}),e("th",{className:"px-4 py-2",children:"Priority"}),e("th",{className:"px-4 py-2",children:"Instructions"}),e("th",{className:"px-4 py-2",children:"Actions"}),f>8&&e("th",{className:"px-4 py-2",children:"Assigned"}),e("th",{className:"px-4 py-2",children:"Send"}),e("th",{className:"px-4 py-2",children:"Reset"}),e("th",{className:"px-4 py-2"})]})}),r("tbody",{children:[$.map((t,x)=>(t.SendTo===l||f>9||l==="Saskia")&&t.hide!==!0?r("tr",{className:`border-b bg-gray-600 border-gray-700 shadow-md shadow-black ${k.includes(x)?"hidden":""}`,children:[e("td",{className:`${t.New?"border-l-[5px] border-blue-700  animate-pulse animate-thrice animate-duration-[3000ms] animate-ease-out ":""} `}),e("td",{className:"border px-4 py-2",children:e("img",{src:t.img,className:"w-[50px] h-[50px] rounded-md mr-4"})}),e("td",{className:"border px-2 py-2",children:t.newDate}),e("td",{className:"border px-4 py-2",children:t.page}),e("td",{className:`border px-4 py-2 ${t.prio==="Prio"?"bg-red-600":"bg-gray-600"}`,children:t.prio}),r("td",{className:"border px-4 py-2",children:[e("h1",{className:"cursor-pointer text-black bg-white text-md border-black border-2 p-2 hover:scale-110 transition-transform",onClick:()=>{fe(),w(t.designer),p(t.designer1),N(t.designer2),o(t.designer3),A(t.subject),F(t.img1),B(t.img2),le(t.img3),ie(t.img4),J(t.post),Q(t.month),Y(t.page)},children:" View "}),t.pdf===void 0||t.pdf===""?null:e("h1",{className:"cursor-pointer text-black bg-white text-md border-black border-2 p-2 hover:scale-110 transition-transform",onClick:()=>{window.open(t.pdf)},children:" View Pdf "})]}),e("td",{className:"border px-4 py-2",children:e("form",{onSubmit:()=>{Ie(x)},className:"designer-upload  mr-5 ml-4",children:e(te.label,{whileHover:{scale:1.1},transition:{type:"spring",stiffness:400,damping:10},onClick:()=>{J(t.post),Q(t.month),Y(t.page)},className:"custom-file-upload cursor-pointer text-white hover:bg-gray-900 focus:outline-none focus:ring-4 focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 bg-gray-800 dark:hover:bg-gray-700 dark:focus:ring-gray-700 dark:border-gray-700 lg:w-[120px]",children:e(Ye,{...Fe})})})}),f>8&&e("td",{className:"border px-4 py-2 font-bold",children:t.SendTo}),e("td",{className:"border px-4 py-2",children:e("div",{children:t.designer!==void 0||t.pdf!==void 0?e(Ze,{newDesigner:$,id:x,db:I,collection:T,doc:S,setDoc:P,user:l,setImageUrl:g}):null})}),e("td",{className:"border px-4 py-2",children:t.designer!==void 0||t.pdf!==void 0?r("button",{onClick:()=>{Ue(),ke(t.post),Re(t.month),Te(t.page)},className:"bg-red-700 text-white p-2 rounded-md hover:bg-red-800 cursor-pointer relative z-[2]",children:[" ","Reset"," "]}):null}),e("td",{className:"border px-4 py-2",children:e("button",{onClick:()=>G([...k,x]),className:"bg-blue-700 text-white p-2 rounded-md hover:bg-blue-800 cursor-pointer relative z-[2]",children:"Hide"})})]},x):null),ve&&e(U,{children:e("div",{className:"fixed top-0 z-[1000] left-0 w-full h-full bg-slate-400/20 gap-4  flex justify-center items-center",children:r("div",{className:"flex gap-3 flex-col bg-white p-5 rounded-md",children:[e("p",{className:"text-black font-semibold text-xl",children:"Are you sure you want to reset this?"}),e("button",{onClick:()=>{const t=T(I,"DesignerPage"),x=S(t,Se+De+Ce);z(x,{designer:C(),designer1:C(),designer2:C(),designer3:C(),pdf:C()},{merge:!0}),setTimeout(()=>{H(!1)},500)},className:"bg-red-700 text-white p-2 rounded-md hover:bg-red-800 cursor-pointer",children:"Yes"}),e("button",{onClick:()=>H(!1),className:"bg-green-700 text-white p-2 rounded-md hover:bg-green-800 cursor-pointer",children:"No"})]})})})]})]})})]}),r("div",{className:"fixed bottom-0 bg-slate-200 w-full  ",children:[e("h2",{className:"text-xl ml-4",children:de}),e("h2",{className:"text-xl ml-4",children:pe})]})]}),e(Xe,{openModal:be,handleClose:xe,image:h,image1:i,image2:n,image3:v,content:ge,user:l,message:ye,setMessage:we,dPost:_,dMonth:K,dPage:W,setContent:A,arrayUnion:ze,exampleImg:R,exampleImg1:M,exampleImg2:ne,exampleImg3:ce})]})," "]})]})}export{lt as default};
