import{r,u as v,j as t,F as h,a,E as D,h as g}from"./index-3d21f9c5.js";function j({user:u,level:p,uuid:P}){const[l,f]=r.useState([]),x=v();r.useState(""),r.useState(""),r.useState("");const w=async()=>{try{return g.collection("partner").onSnapshot(n=>{const s=n.docs.map(c=>({id:c.id,...c.data()}));f(s)})}catch(e){console.error("Error fetching data: ",e)}};r.useEffect(()=>{w()},[u]);const[m,d]=r.useState([]),y=async()=>{try{const e=JSON.parse(localStorage.getItem("cachedData")||"[]");if(e.length>0){d(e);return}const n=l.map(o=>g.collection(o.name).where("status","==","pending").get().then(S=>S.docs.map(i=>({id:i.id,status:i.data().status,...i.data()})))),c=(await Promise.all(n)).flat();localStorage.setItem("cachedData",JSON.stringify(c)),d(c.filter(o=>o.status!==0))}catch(e){console.error("Error fetching data:",e)}};r.useEffect(()=>{y()},[l]);const[N,b]=r.useState(!1);return t(h,{children:a("div",{className:" animate-fade-right animate-once animate-duration-[3000ms] animate-ease-in  overflow-hidden flex flex-wrap items-center gap-2 justify-center sm:w-[70vw] laptop:w-[80vw] laptop:content-start laptopL:overflow-y-scroll phones:p-0  p-5 m-auto  border-2 border-slate-700/50 ",children:[t("section",{className:"",children:N&&a("div",{className:" flex-col  fixed top-0 w-[100vw] bg-slate-600 left-0 z-[100] flex items-center justify-center h-[100vh]",children:[t("img",{src:D,className:"w-[100px] h-[100px]"}),t("p",{className:"text-white text-2xl animate-bounce",children:"Loading..."})]})}),a("table",{className:"w-full text-sm text-left text-gray-400 shadow-md shadow-slate-800",children:[a("caption",{className:"p-5 text-lg font-semibold text-left phones:text-center  text-white bg-gray-800",children:["Squarelion Agency Partners",t("p",{className:"mt-1 text-sm font-normal text-gray-400",children:"Click on any of the images to view the partner page"})]}),t("thead",{className:"text-xs  uppercase bg-gray-700 text-gray-400",children:a("tr",{children:[t("th",{scope:"col",className:"px-2 py-3",children:"Source"}),t("th",{scope:"col",className:"px-6 py-3",children:"Name"}),t("th",{scope:"col",className:" py-3",children:"Pending Post"})]})}),t("tbody",{children:l.map((e,n)=>e.name!=="Test"&&a("tr",{className:" border-b bg-gray-800 border-gray-700",children:[t("th",{scope:"row",className:"px-1 py-1 font-medium  whitespace-nowrap text-white",children:t("img",{className:"bg-slate-200 ml-3 mt-3 mb-3 mr-3 w-[30px] h-[30px] rounded-md cursor-pointer hover:scale-105 transition duration-300 ease-in-out",src:e.imageUrl,onClick:()=>{localStorage.setItem("partner",e.name),localStorage.setItem("image",e.imageUrl),localStorage.setItem("preset",e.Preset||"No preset available"),b(!0),setTimeout(()=>{x(`/profile/${e.name}`)},500)}})}),t("th",{scope:"row",className:"px-1 py-1 font-medium  whitespace-nowrap text-white",children:e.name}),a("td",{className:"px-1 py-1",children:[p>8&&e.name!=="Test"&&t(h,{children:a("p",{children:["Pending:"," ",m.filter(s=>s.client===e.name&&s.status!=="Approved").length," "]})}),p===8&&t(h,{children:e.name!=="Test"?a("p",{children:[" ","Pending :"," ",m.filter(s=>s.client===e.name&&s.status=="Designer"&&e.name!=="Test").length," "]}):null})]})]},n))})]})]})})}export{j as default};
