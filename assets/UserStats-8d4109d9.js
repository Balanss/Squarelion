import{r as i,b as _,h as w,j as t,a as d,I as P,_ as M,R as O,g as C,y as k,d as T,F as S}from"./index-f662206b.js";import{m as y}from"./Nav-9e453dca.js";function B(){const[e,n]=i.useState(null);return i.useEffect(()=>_.onAuthStateChanged(h=>{h?w.collection("admin").doc(h.uid).get().then(u=>{const o=u.data();n(o.dateJoined)}):(setUser(null),setLevel(null))}),[]),t("div",{className:"lg:float-right pt-6",children:t("header",{className:"text-white phones:text-md text-lg font-bold",children:d("p",{children:["Account created on: ",e]})})})}function $({user:e,level:n}){const[a,h]=i.useState(!1),u=new Date().getHours();let o;u<12?o="Good morning":u<18?o="Good afternoon":o="Good evening";const r=new Date,c="4";return d("div",{className:" p-5 border w-[75vw] phones:w-[90vw] border-y-[#2c1f42] border-x-[#2f3763] rounded-lg shadow text-left bg-[#111d39]  ",children:[d("p",{className:"text-xl xl:text-7xl text-white font-bold pb-5",children:[" ",o,",",t("br",{}),d("span",{className:"text-green-400  font-bold  text-xl  xl:text-4xl",children:[e,"!"]})]}),t("p",{className:"text-gray-400  text-xs md:text-lg",children:r.toString().slice(0,15)}),d("button",{onClick:()=>{h(!a),localStorage.setItem("showNewUpdates",c)},className:"text-white mt-2  focus:ring-4 focus:outline-none  font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center bg-blue-600 hover:bg-blue-700 focus:ring-blue-800",type:"button",children:[localStorage.getItem("showNewUpdates")===c?"No updates":"New Updates",t("svg",{className:"w-2.5 h-2.5 ms-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6",children:t("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 4 4 4-4"})})]}),a&&t("div",{className:"z-10  absolute text-black font-semibold bg-white divide-y divide-gray-100 rounded-bl-xl rounded-br-xl rounded-tl-md rounded-tr-md shadow w-44 ",children:t("ul",{className:"py-2 text-sm ",children:t("li",{children:d("h1",{className:"block px-4 py-2 max-h-[400px] overflow-auto",children:["Hello ",e,"! There have been updates to Media Pilot:",d("ul",{className:"list-disc list-inside mt-2",children:[t("li",{children:"New profile ui screen"}),t("li",{children:" Content writers new ui screen for 2024 "}),t("li",{children:"New Designer ui screen"}),t("li",{children:" Added new current task - this will show your assigned task "}),t("li",{children:" Content writers new ui screen for 2024 "}),n>9||e==="Saskia"?t("li",{children:" You can now see the lastest task finished in the last 24 hours "}):null]})]})})})}),t(B,{user:e,level:n})]})}function F({setRound:e,user:n}){const a=async()=>{try{return w.collection("partner").onSnapshot(async u=>{const o=u.docs.map(r=>({id:r.id,...r.data()}));e(o.map(r=>r.name))})}catch{console.log("loading")}};i.useEffect(()=>{a()},[n])}function L({scheduleData:e,setScheduleData:n}){i.useEffect(()=>P(M(T,"schedule"),c=>{const s=[];c.forEach(l=>{s.push({id:l.id,...l.data()})}),s.sort((l,m)=>new Date(l.selectedDate)-new Date(m.selectedDate)),n(s)}),[]);const a=["bg-gradient-to-r from-green-700 to-green-800","bg-gradient-to-r from-blue-700 to-blue-800","bg-gradient-to-r from-indigo-700 to-indigo-800","bg-gradient-to-r from-purple-700 to-purple-800","bg-gradient-to-r from-pink-700 to-pink-800","bg-gradient-to-r from-teal-700 to-teal-800","bg-gradient-to-r from-lime-700 to-lime-800","bg-gradient-to-r from-emerald-700 to-emerald-800","bg-gradient-to-r from-fuchsia-700 to-fuchsia-800"],[h,u]=i.useState("");i.useEffect(()=>{u(a[Math.floor(Math.random()*a.length)])},[]);const o=async r=>{e.map((c,s)=>{if(s!==r)console.log("not equal");else{const l=M(T,"schedule"),m=C(l,c.id);k(m)}})};return d("div",{className:"inline-flex bg-secondary  flex-col mt-10 gap-5 lg:w-[35vw] border border-y-[#2c1f42] border-x-[#2f3763]  p-4 max-h-[400px] lg:max-h-[800px] overflow-y-auto",children:[d("section",{className:"flex flex-col items-start justify-between",children:[t("h2",{className:"text-white mb-2 phones:text-lg  text-2xl font-semibold",children:"Upcoming Events"}),t("hr",{className:"bg-white w-full"})]}),e.length===0?t("p",{className:"text-white phones:text-lg  text-2xl font-bold",children:"No events scheduled"}):e.map((r,c)=>{const s=a[Math.floor(Math.random()*a.length)],l=new Date;l.setHours(0,0,0,0);const m=new Date(r.selectedDate);return m.setDate(m.getDate()+1),m.setHours(0,0,0,0),m<l&&o(c),d(O.Fragment,{children:[d(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.75,delay:c*.3},className:`text-white text-xs ${s} p-2 mt-2 rounded-md inline-flex flex-col max-w-[200px] lg:max-w-[500px] break-words `,children:[d("h1",{className:"font-bold mb-2 flex justify-between",children:[r.user," ",d("span",{className:"cursor-pointer hover:text-red-700 ",onClick:()=>{const f=M(T,"schedule"),b=C(f,r.id);k(b)},children:[" ","X"," "]})," "]}),d("p",{children:[r.selectedDate.replace("T"," "),d("span",{className:"ml-1 ",children:[" @ ",r.timer,"  "]}),d("span",{className:"ml-1",children:[" | ",r.Title,"  "]})]})]}),t("hr",{className:"opacity-25"})]},c)})]})}function U({user:e,setData:n,data:a,setMatchingData:h,matchingData:u,month:o}){const r=()=>{try{return w.collection("partner").onSnapshot(l=>{const m=l.docs.map(p=>({id:p.id,...p.data()}));n(m)})}catch(s){console.error("Error fetching data: ",s)}};i.useEffect(()=>{const s=r();return()=>s()},[o]);const c=async()=>{try{const s=a.map(f=>w.collection(f.name).doc(o).get().then(b=>{if(b.exists){const v=b.data();return Object.keys(v).map(x=>{const g=v[x];return g.user?{client:g.client,AssignedTo:g.AssignedTo,month:g.month,post:g.count,Time:g.Time}:null}).filter(x=>x!==null).sort((x,g)=>x.order-g.order)}else return console.log("No such document!"),[]})),p=(await Promise.all(s)).flat().filter(f=>f.AssignedTo===e);h(p)}catch(s){console.error("Error fetching data:",s)}};return i.useEffect(()=>{c()},[o]),t(S,{children:u.length===0?t("h1",{children:"No current task"}):u.map((s,l)=>e===s.AssignedTo?t("div",{className:"max-h-500px phones:max-h-300px overflow-y-auto",children:d("li",{className:"flex flex-row items-center justify-between",children:[d("div",{className:"flex flex-row items-center gap-2",children:[t("div",{className:"w-2 h-2 rounded-full bg-green-500"}),t("p",{className:"text-white",children:s.client})]}),t("p",{className:"text-white",children:s.month}),t("p",{className:"text-white",children:s.post}),t("p",{className:"text-white",children:s.Time})]})},s.id||l):null)})}function R({user:e}){const[n,a]=i.useState([]),[h,u]=i.useState([]),[o,r]=i.useState(""),c=new Date,s=c.getFullYear().toString(),l=(c.getMonth()+1).toString().padStart(2,"0");return i.useEffect(()=>{r(`${s}-${l}`)},[l]),d("div",{className:"inline-flex bg-secondary flex-col mt-10 gap-5 lg:w-[35vw] border border-y-[#2c1f42] border-x-[#2f3763]  p-4 max-h-[400px] lg:max-h-[800px] overflow-y-auto",children:[d("section",{className:"flex flex-col items-start justify-between",children:[t("h2",{className:"text-white mb-2 phones:text-lg  text-2xl font-semibold",children:"Current Task"}),t("input",{date:c,className:"bg-[#2f3763] text-white w-full p-2 rounded-md",type:"month",value:o,onChange:m=>r(m.target.value)}),t("hr",{className:"bg-white w-full"})]}),t(U,{setData:a,month:o,data:n,user:e,setMatchingData:u,matchingData:h})]})}var Y=Object.defineProperty,W=Object.defineProperties,q=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,j=(e,n,a)=>n in e?Y(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,N=(e,n)=>{for(var a in n||(n={}))I.call(n,a)&&j(e,a,n[a]);if(A)for(var a of A(n))H.call(n,a)&&j(e,a,n[a]);return e},D=(e,n)=>W(e,q(n)),E=class extends i.Component{constructor(e){super(e),this.ref=O.createRef(),this.state={style:{}};const n={reverse:!1,max:35,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:"1.1",speed:"1000",transition:!0,axis:null,reset:!0};this.width=null,this.height=null,this.left=null,this.top=null,this.transitionTimeout=null,this.updateCall=null,this.element=null,this.settings=Object.assign({},n,this.props.options),this.reverse=this.settings.reverse?-1:1,this.onMouseEnter=this.onMouseEnter.bind(this,this.props.onMouseEnter),this.onMouseMove=this.onMouseMove.bind(this,this.props.onMouseMove),this.onMouseLeave=this.onMouseLeave.bind(this,this.props.onMouseLeave)}componentDidMount(){this.element=this.ref.current,setTimeout(()=>{this.element.parentElement.querySelector(":hover")===this.element&&this.onMouseEnter()},0)}componentWillUnmount(){clearTimeout(this.transitionTimeout),cancelAnimationFrame(this.updateCall)}onMouseEnter(e=()=>{},n){return this.updateElementPosition(),this.setState(Object.assign({},this.state,{style:D(N({},this.state.style),{willChange:"transform"})})),this.setTransition(),e(n)}reset(){window.requestAnimationFrame(()=>{this.setState(Object.assign({},this.state,{style:D(N({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)`})}))})}onMouseMove(e=()=>{},n){return n.persist(),this.updateCall!==null&&window.cancelAnimationFrame(this.updateCall),this.event=n,this.updateCall=requestAnimationFrame(this.update.bind(this,n)),e(n)}setTransition(){clearTimeout(this.transitionTimeout),this.setState(Object.assign({},this.state,{style:D(N({},this.state.style),{transition:`${this.settings.speed}ms ${this.settings.easing}`})})),this.transitionTimeout=setTimeout(()=>{this.setState(Object.assign({},this.state,{style:D(N({},this.state.style),{transition:""})}))},this.settings.speed)}onMouseLeave(e=()=>{},n){return this.setTransition(),this.settings.reset&&this.reset(),e(n)}getValues(e){const n=(e.nativeEvent.clientX-this.left)/this.width,a=(e.nativeEvent.clientY-this.top)/this.height,h=Math.min(Math.max(n,0),1),u=Math.min(Math.max(a,0),1),o=(this.reverse*(this.settings.max/2-h*this.settings.max)).toFixed(2),r=(this.reverse*(u*this.settings.max-this.settings.max/2)).toFixed(2),c=h*100,s=u*100;return{tiltX:o,tiltY:r,percentageX:c,percentageY:s}}updateElementPosition(){const e=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=e.left,this.top=e.top}update(e){const n=this.getValues(e);this.setState(Object.assign({},this.state,{style:D(N({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(${this.settings.axis==="x"?0:n.tiltY}deg) rotateY(${this.settings.axis==="y"?0:n.tiltX}deg) scale3d(${this.settings.scale}, ${this.settings.scale}, ${this.settings.scale})`})})),this.updateCall=null}render(){const e=Object.assign({},this.props.style,this.state.style);return t("div",{style:e,ref:this.ref,className:this.props.className,onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,children:this.props.children})}};function X({writtenBy:e,setWrittenBy:n,user:a,round:h,item:u}){const o=async()=>{try{const s=[];for(const l of h){const p=(await w.collection(l).where("TextWrittenBy","==",a).get()).docs.map(f=>({id:f.id,TextWrittenBy:f.data().TextWrittenBy,...f.data()}));s.push(...p)}n(s)}catch(s){console.error(s)}};i.useEffect(()=>{(async()=>{o()})()},[a,h]);const[r,c]=i.useState("Loading");return i.useEffect(()=>{setTimeout(()=>{c(0)},5e3)},[e]),t(S,{children:t(E,{children:d(y.div,{variants:u,className:"block max-w-sm p-6 phones:w-[125px]  xl:w-[250px] text-left text-white border border-y-[#2c1f42] border-x-[#2f3763] rounded-lg  bg-[#111d39] shadow-card ",children:[d("h5",{className:' "mb-2 text-4xl font-bold tracking-tight  " ',children:[e.length===0?t("div",{className:"px-3 py-1 text-xs font-medium leading-none text-center  rounded-full animate-pulse bg-blue-900 text-blue-200",children:"loading..."}):e.length!==0?e.length:0," "]}),t("p",{className:"font-normal text-xs xl:text-2xl text-gray-400 ",children:"Written Content"})]})})})}function G({uploadedBy:e,setUploadedBy:n,user:a,round:h,item:u}){const o=async()=>{try{const s=[];for(const l of h){const p=(await w.collection(l).where("DesignUploadedBy","==",a).get()).docs.map(f=>({id:f.id,DesignUploadedBy:f.data().DesignUploadedBy,...f.data()}));s.push(...p)}n(s),localStorage.setItem("uploadedBy",JSON.stringify(s))}catch(s){console.error(s)}};i.useEffect(()=>{(async()=>{o()})()},[a,h]);const[r,c]=i.useState("Loading");return i.useEffect(()=>{setTimeout(()=>{c(0)},5e3)},[e]),t(S,{children:t(E,{children:d(y.div,{variants:u,className:"block max-w-sm p-6 phones:w-[125px]  xl:w-[250px] border border-y-[#2c1f42] border-x-[#2f3763] rounded-lg shadow-card text-left bg-[#111d39] ",children:[t("h5",{className:" 'mb-2 text-4xl  font-bold tracking-tight '",children:e.length===0?r===0?r:t("div",{className:"px-3 py-1 text-xs font-medium leading-none text-center  rounded-full animate-pulse bg-blue-900 text-blue-200",children:r}):e.length}),t("p",{className:"font-normal text-xs xl:text-2xl text-gray-400 ",children:"Design Content"})]})})})}function J({data:e,setData:n,user:a,round:h,item:u}){const o=async()=>{try{const s=[];for(const l of h){const p=(await w.collection(l).where("CreatedBY","==",a).get()).docs.map(f=>({id:f.id,CreatedBY:f.data().CreatedBY}));s.push(...p)}n(s)}catch(s){console.error(s)}};i.useEffect(()=>{(async()=>{o()})()},[a,h]);const[r,c]=i.useState("Loading");return i.useEffect(()=>{setTimeout(()=>{c(0)},5e3)},[e]),t(S,{children:e===0?null:t(E,{children:d(y.div,{variants:u,className:"block max-w-sm p-6 phones:w-[125px] xl:w-[250px] text-white border border-y-[#2c1f42] border-x-[#2f3763] rounded-lg shadow-card text-left bg-[#111d39] ",children:[t("h5",{className:" 'mb-2 text-4xl font-bold tracking-tight ",children:e.length===0?r===0?r:t("div",{className:"px-3 py-1 text-xs font-medium leading-none text-center  rounded-full animate-pulse bg-blue-900 text-blue-200",children:r}):e.length!==0?e.length:0}),t("p",{className:"font-normal text-xs xl:text-2xl text-gray-400 ",children:"Created Content"})]})})})}function V({user:e,setData:n,data:a,setMatchingData:h,matchingData:u,month:o}){const r=()=>{try{return w.collection("partner").onSnapshot(l=>{const m=l.docs.map(p=>({id:p.id,...p.data()}));n(m)})}catch(s){console.error("Error fetching data: ",s)}};i.useEffect(()=>{const s=r();return()=>s()},[o]);const c=async()=>{try{const s=a.map(f=>w.collection(f.name).doc(o).get().then(b=>{if(b.exists){const v=b.data();return Object.keys(v).map(x=>{const g=v[x];return g.user?{client:g.client,month:g.month,post:g.count,Time:g.Time,text:g.TextWrittenBy}:null}).filter(x=>x!==null).sort((x,g)=>x.order-g.order)}else return console.log("No such document!"),[]})),p=(await Promise.all(s)).flat().filter(f=>f.Time);h(p)}catch(s){console.error("Error fetching data:",s)}};return i.useEffect(()=>{c()},[o]),t(S,{children:u.length===0?t("h1",{children:"No current task"}):u.map((s,l)=>{const m=new Date(s.Time);return Math.abs(new Date-m)/36e5<=24&&t("div",{className:"max-h-500px phones:max-h-300px overflow-y-auto",children:d("li",{className:"flex flex-row items-center justify-between",children:[d("div",{className:"flex flex-row items-center gap-2",children:[t("div",{className:"w-2 h-2 rounded-full bg-green-500"}),t("p",{className:"text-white",children:s.client})]}),t("p",{className:"text-white",children:s.month}),t("p",{className:"text-white",children:s.post}),t("p",{className:"text-white",children:s.Time.slice(11)}),t("p",{className:"text-white",children:s.text})]})},s.id||l)})})}function z({user:e}){const[n,a]=i.useState([]),[h,u]=i.useState([]),[o,r]=i.useState(""),c=new Date,s=c.getFullYear().toString(),l=(c.getMonth()+1).toString().padStart(2,"0");return i.useEffect(()=>{r(`${s}-${l}`)},[l]),d("div",{className:"inline-flex bg-secondary flex-col mt-10 gap-5 lg:w-[35vw] border border-y-[#2c1f42] border-x-[#2f3763]  p-4 max-h-[400px] lg:max-h-[800px] overflow-y-auto",children:[d("section",{className:"flex flex-col items-start justify-between",children:[t("h2",{className:"text-white mb-2 phones:text-lg  text-2xl font-semibold",children:"Latest Task Done"}),t("input",{date:c,className:"bg-[#2f3763] text-white w-full p-2 rounded-md",type:"month",value:o,onChange:m=>r(m.target.value)}),t("hr",{className:"bg-white w-full"})]}),t(V,{setData:a,month:o,data:n,user:e,setMatchingData:u,matchingData:h})]})}function Z({user:e,level:n}){const[a,h]=i.useState([]),[u,o]=i.useState([]),[r,c]=i.useState([]),[s,l]=i.useState([]),[m,p]=i.useState([]),f={hidden:{opacity:1,scale:0},visible:{opacity:1,scale:1,transition:{delayChildren:.3,staggerChildren:.2}}},b={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return d("div",{className:" text-center text-white w-[75vw]  phones:w-auto flex items-center justify-start xl:items-start xl:justify-between flex-col lg:flex-row mb-5 mt-5 gap-10",children:[t(F,{setRound:h,user:e}),t(y.div,{className:"inline-flex phones:flex-col phones:gap-2 gap-10",variants:f,initial:"hidden",animate:"visible",children:d(y.div,{className:"",variants:b,children:[t($,{user:e,level:n}),d("section",{className:"flex gap-3 flex-wrap justify-between phones:flex-col ",children:[n>9||e==="Saskia"?t(z,{user:e,level:n}):null,t(R,{user:e,level:n}),t(L,{user:e,level:n,scheduleData:m,setScheduleData:p})]}),t("section",{className:"mt-10 flex gap-5 flex-row phones:flex-col"}),d("section",{className:"mt-10 flex gap-5 items-center justify-center flex-row phones:flex-col ",children:[t(X,{user:e,setWrittenBy:l,level:n,round:a,writtenBy:s}),t(G,{user:e,setUploadedBy:c,level:n,round:a,uploadedBy:r}),t(J,{user:e,setData:o,level:n,round:a,data:u})]})]})})]})}export{Z as default};
