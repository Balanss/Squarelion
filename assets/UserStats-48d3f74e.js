import{r as l,g as E,d as M,G as _,a as r,j as t,b as P,h as w,F as v,I as $,_ as T,R as k,y as j}from"./index-a80a2683.js";import{m as y}from"./Nav-2f1ffc4c.js";function B({user:e,monthNumbers:n,setData:a}){l.useEffect(()=>{(async()=>{const h=[],i=E(M,"Request",`${e}`),o=await _(i);o.exists()&&h.push(o.data()),a(h)})()},[e,n])}function F({user:e}){const[n,a]=l.useState(""),[m,h]=l.useState(""),[i,o]=l.useState([]),u=d=>{a(d.target.value);const p=d.target.value.split("-")[1];h(parseInt(p,10))},[s,c]=l.useState([]);return l.useEffect(()=>{if(i[0]){const d=Object.values(i[0]);c(d.map(p=>({type:p.type,to:p.to,from:p.from})))}else console.log("data[0] is undefined or null")},[i]),r("div",{className:"inline-flex bg-secondary flex-col mt-10 gap-5 lg:w-[35vw] border border-y-[#2c1f42] border-x-[#2f3763]  p-4 max-h-[400px] lg:max-h-[800px] overflow-y-auto",children:[t(B,{user:e,monthNumber:m,setData:o}),r("section",{className:"flex flex-col items-start justify-between w-screen",children:[t("h2",{className:"text-white mb-2 phones:text-lg  text-2xl font-semibold",children:"Current Leave"}),r("label",{children:["  Month: ",t("input",{type:"month",value:n,onChange:u,className:"text-black mb-2"})," "]}),t("hr",{className:"bg-white w-full"}),s.map((d,p)=>t("div",{className:"flex flex-col gap-2 text-white ",children:r("section",{className:"flex flex-row gap-10 overflow-y-scroll ",children:[r("p",{className:"text-white",children:["type: ",d.type]}),r("p",{className:"text-white",children:["From: ",d.from]}),r("p",{className:"text-white",children:["To: ",d.to]}),r("p",{className:"text-white",children:["User: ",d.user]})]})},p))]})]})}function L(){const[e,n]=l.useState(null);return l.useEffect(()=>P.onAuthStateChanged(m=>{m?w.collection("admin").doc(m.uid).get().then(h=>{const i=h.data();n(i.dateJoined)}):(setUser(null),setLevel(null))}),[]),t("div",{className:"lg:float-right pt-6",children:t("header",{className:"text-white phones:text-md text-lg font-bold",children:r("p",{children:["Account created on: ",e]})})})}function R({user:e,level:n}){const[a,m]=l.useState(!1),h=new Date().getHours();let i;h<12?i="Good morning":h<18?i="Good afternoon":i="Good evening";const o=new Date,u="5";return r("div",{className:" p-5 border w-[75vw] phones:w-[90vw] border-y-[#2c1f42] border-x-[#2f3763] rounded-lg shadow text-left bg-[#111d39]  ",children:[r("p",{className:"text-xl xl:text-7xl text-white font-bold pb-5",children:[" ",i,",",t("br",{}),r("span",{className:"text-green-400  font-bold  text-xl  xl:text-4xl",children:[e,"!"]})]}),t("p",{className:"text-gray-400  text-xs md:text-lg",children:o.toString().slice(0,15)}),r("button",{onClick:()=>{m(!a),localStorage.setItem("showNewUpdates",u)},className:"text-white mt-2  focus:ring-4 focus:outline-none  font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center bg-blue-600 hover:bg-blue-700 focus:ring-blue-800",type:"button",children:[localStorage.getItem("showNewUpdates")===u?"No updates":"New Updates",t("svg",{className:"w-2.5 h-2.5 ms-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6",children:t("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 4 4 4-4"})})]}),a&&t("div",{className:"z-10  absolute text-black font-semibold bg-white divide-y divide-gray-100 rounded-bl-xl rounded-br-xl rounded-tl-md rounded-tr-md shadow w-44 ",children:t("ul",{className:"py-2 text-sm ",children:t("li",{children:r("h1",{className:"block px-4 py-2 max-h-[400px] overflow-auto",children:["Hello ",e,"! There have been updates to Media Pilot:",r("ul",{className:"list-disc list-inside mt-2",children:[t("li",{children:"Designers can now see how many post they have open"}),n>9&&r(v,{children:[" ",t("li",{children:" You can now select which desiger to assign  "})," "]})]})]})})})}),t(L,{user:e,level:n})]})}function U({setRound:e,user:n}){const a=async()=>{try{return w.collection("partner").onSnapshot(async h=>{const i=h.docs.map(o=>({id:o.id,...o.data()}));e(i.map(o=>o.name))})}catch{console.log("loading")}};l.useEffect(()=>{a()},[n])}function Y({scheduleData:e,setScheduleData:n}){l.useEffect(()=>$(T(M,"schedule"),u=>{const s=[];u.forEach(c=>{s.push({id:c.id,...c.data()})}),s.sort((c,d)=>new Date(c.selectedDate)-new Date(d.selectedDate)),n(s)}),[]);const a=["bg-gradient-to-r from-green-700 to-green-800","bg-gradient-to-r from-blue-700 to-blue-800","bg-gradient-to-r from-indigo-700 to-indigo-800","bg-gradient-to-r from-purple-700 to-purple-800","bg-gradient-to-r from-pink-700 to-pink-800","bg-gradient-to-r from-teal-700 to-teal-800","bg-gradient-to-r from-lime-700 to-lime-800","bg-gradient-to-r from-emerald-700 to-emerald-800","bg-gradient-to-r from-fuchsia-700 to-fuchsia-800"],[m,h]=l.useState("");l.useEffect(()=>{h(a[Math.floor(Math.random()*a.length)])},[]);const i=async o=>{e.map((u,s)=>{if(s!==o)console.log("not equal");else{const c=T(M,"schedule"),d=E(c,u.id);j(d)}})};return r("div",{className:"inline-flex bg-secondary  flex-col mt-10 gap-5 lg:w-[35vw] border border-y-[#2c1f42] border-x-[#2f3763]  p-4 max-h-[400px] lg:max-h-[800px] overflow-y-auto",children:[r("section",{className:"flex flex-col items-start justify-between",children:[t("h2",{className:"text-white mb-2 phones:text-lg  text-2xl font-semibold",children:"Upcoming Events"}),t("hr",{className:"bg-white w-full"})]}),e.length===0?t("p",{className:"text-white phones:text-lg  text-2xl font-bold",children:"No events scheduled"}):e.map((o,u)=>{const s=a[Math.floor(Math.random()*a.length)],c=new Date;c.setHours(0,0,0,0);const d=new Date(o.selectedDate);return d.setDate(d.getDate()+1),d.setHours(0,0,0,0),d<c&&i(u),r(k.Fragment,{children:[r(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.75,delay:u*.3},className:`text-white text-xs ${s} p-2 mt-2 rounded-md inline-flex flex-col max-w-[200px] lg:max-w-[500px] break-words `,children:[r("h1",{className:"font-bold mb-2 flex justify-between",children:[o.user," ",r("span",{className:"cursor-pointer hover:text-red-700 ",onClick:()=>{const f=T(M,"schedule"),b=E(f,o.id);j(b)},children:[" ","X"," "]})," "]}),r("p",{children:[o.selectedDate.replace("T"," "),r("span",{className:"ml-1 ",children:[" @ ",o.timer,"  "]}),r("span",{className:"ml-1",children:[" | ",o.Title,"  "]})]})]}),t("hr",{className:"opacity-25"})]},u)})]})}function q({user:e,setData:n,data:a,setMatchingData:m,matchingData:h,month:i}){const o=()=>{try{return w.collection("partner").onSnapshot(c=>{const d=c.docs.map(p=>({id:p.id,...p.data()}));n(d)})}catch(s){console.error("Error fetching data: ",s)}};l.useEffect(()=>{const s=o();return()=>s()},[i]);const u=async()=>{try{const s=a.map(f=>w.collection(f.name).doc(i).get().then(b=>{if(b.exists){const N=b.data();return Object.keys(N).map(x=>{const g=N[x];return g.user?{client:g.client,AssignedTo:g.AssignedTo,month:g.month,post:g.count,Time:g.Time}:null}).filter(x=>x!==null).sort((x,g)=>x.order-g.order)}else return console.log("No such document!"),[]})),p=(await Promise.all(s)).flat().filter(f=>f.AssignedTo===e);m(p)}catch(s){console.error("Error fetching data:",s)}};return l.useEffect(()=>{u()},[i]),t(v,{children:h.length===0?t("h1",{children:"No current task"}):h.map((s,c)=>e===s.AssignedTo?t("div",{className:"max-h-500px phones:max-h-300px overflow-y-auto",children:r("li",{className:"flex flex-row items-center justify-between",children:[r("div",{className:"flex flex-row items-center gap-2",children:[t("div",{className:"w-2 h-2 rounded-full bg-green-500"}),t("p",{className:"text-white",children:s.client})]}),t("p",{className:"text-white",children:s.month}),t("p",{className:"text-white",children:s.post}),t("p",{className:"text-white",children:s.Time})]})},s.id||c):null)})}function W({user:e}){const[n,a]=l.useState([]),[m,h]=l.useState([]),[i,o]=l.useState(""),u=new Date,s=u.getFullYear().toString(),c=(u.getMonth()+1).toString().padStart(2,"0");return l.useEffect(()=>{o(`${s}-${c}`)},[c]),r("div",{className:"inline-flex bg-secondary flex-col mt-10 gap-5 lg:w-[35vw] border border-y-[#2c1f42] border-x-[#2f3763]  p-4 max-h-[400px] lg:max-h-[800px] overflow-y-auto",children:[r("section",{className:"flex flex-col items-start justify-between",children:[t("h2",{className:"text-white mb-2 phones:text-lg  text-2xl font-semibold",children:"Current Task"}),t("input",{date:u,className:"bg-[#2f3763] text-white w-full p-2 rounded-md",type:"month",value:i,onChange:d=>o(d.target.value)}),t("hr",{className:"bg-white w-full"})]}),t(q,{setData:a,month:i,data:n,user:e,setMatchingData:h,matchingData:m})]})}var I=Object.defineProperty,H=Object.defineProperties,X=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,G=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable,O=(e,n,a)=>n in e?I(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,D=(e,n)=>{for(var a in n||(n={}))G.call(n,a)&&O(e,a,n[a]);if(A)for(var a of A(n))J.call(n,a)&&O(e,a,n[a]);return e},S=(e,n)=>H(e,X(n)),C=class extends l.Component{constructor(e){super(e),this.ref=k.createRef(),this.state={style:{}};const n={reverse:!1,max:35,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:"1.1",speed:"1000",transition:!0,axis:null,reset:!0};this.width=null,this.height=null,this.left=null,this.top=null,this.transitionTimeout=null,this.updateCall=null,this.element=null,this.settings=Object.assign({},n,this.props.options),this.reverse=this.settings.reverse?-1:1,this.onMouseEnter=this.onMouseEnter.bind(this,this.props.onMouseEnter),this.onMouseMove=this.onMouseMove.bind(this,this.props.onMouseMove),this.onMouseLeave=this.onMouseLeave.bind(this,this.props.onMouseLeave)}componentDidMount(){this.element=this.ref.current,setTimeout(()=>{this.element.parentElement.querySelector(":hover")===this.element&&this.onMouseEnter()},0)}componentWillUnmount(){clearTimeout(this.transitionTimeout),cancelAnimationFrame(this.updateCall)}onMouseEnter(e=()=>{},n){return this.updateElementPosition(),this.setState(Object.assign({},this.state,{style:S(D({},this.state.style),{willChange:"transform"})})),this.setTransition(),e(n)}reset(){window.requestAnimationFrame(()=>{this.setState(Object.assign({},this.state,{style:S(D({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)`})}))})}onMouseMove(e=()=>{},n){return n.persist(),this.updateCall!==null&&window.cancelAnimationFrame(this.updateCall),this.event=n,this.updateCall=requestAnimationFrame(this.update.bind(this,n)),e(n)}setTransition(){clearTimeout(this.transitionTimeout),this.setState(Object.assign({},this.state,{style:S(D({},this.state.style),{transition:`${this.settings.speed}ms ${this.settings.easing}`})})),this.transitionTimeout=setTimeout(()=>{this.setState(Object.assign({},this.state,{style:S(D({},this.state.style),{transition:""})}))},this.settings.speed)}onMouseLeave(e=()=>{},n){return this.setTransition(),this.settings.reset&&this.reset(),e(n)}getValues(e){const n=(e.nativeEvent.clientX-this.left)/this.width,a=(e.nativeEvent.clientY-this.top)/this.height,m=Math.min(Math.max(n,0),1),h=Math.min(Math.max(a,0),1),i=(this.reverse*(this.settings.max/2-m*this.settings.max)).toFixed(2),o=(this.reverse*(h*this.settings.max-this.settings.max/2)).toFixed(2),u=m*100,s=h*100;return{tiltX:i,tiltY:o,percentageX:u,percentageY:s}}updateElementPosition(){const e=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=e.left,this.top=e.top}update(e){const n=this.getValues(e);this.setState(Object.assign({},this.state,{style:S(D({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(${this.settings.axis==="x"?0:n.tiltY}deg) rotateY(${this.settings.axis==="y"?0:n.tiltX}deg) scale3d(${this.settings.scale}, ${this.settings.scale}, ${this.settings.scale})`})})),this.updateCall=null}render(){const e=Object.assign({},this.props.style,this.state.style);return t("div",{style:e,ref:this.ref,className:this.props.className,onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,children:this.props.children})}};function V({writtenBy:e,setWrittenBy:n,user:a,round:m,item:h}){const i=async()=>{try{const s=[];for(const c of m){const p=(await w.collection(c).where("TextWrittenBy","==",a).get()).docs.map(f=>({id:f.id,TextWrittenBy:f.data().TextWrittenBy,...f.data()}));s.push(...p)}n(s)}catch(s){console.error(s)}};l.useEffect(()=>{(async()=>{i()})()},[a,m]);const[o,u]=l.useState("Loading");return l.useEffect(()=>{setTimeout(()=>{u(0)},5e3)},[e]),t(v,{children:t(C,{children:r(y.div,{variants:h,className:"block max-w-sm p-6 phones:w-[125px]  xl:w-[250px] text-left text-white border border-y-[#2c1f42] border-x-[#2f3763] rounded-lg  bg-[#111d39] shadow-card ",children:[r("h5",{className:' "mb-2 text-4xl font-bold tracking-tight  " ',children:[e.length===0?t("div",{className:"px-3 py-1 text-xs font-medium leading-none text-center  rounded-full animate-pulse bg-blue-900 text-blue-200",children:"loading..."}):e.length!==0?e.length:0," "]}),t("p",{className:"font-normal text-xs xl:text-2xl text-gray-400 ",children:"Written Content"})]})})})}function z({uploadedBy:e,setUploadedBy:n,user:a,round:m,item:h}){const i=async()=>{try{const s=[];for(const c of m){const p=(await w.collection(c).where("DesignUploadedBy","==",a).get()).docs.map(f=>({id:f.id,DesignUploadedBy:f.data().DesignUploadedBy,...f.data()}));s.push(...p)}n(s),localStorage.setItem("uploadedBy",JSON.stringify(s))}catch(s){console.error(s)}};l.useEffect(()=>{(async()=>{i()})()},[a,m]);const[o,u]=l.useState("Loading");return l.useEffect(()=>{setTimeout(()=>{u(0)},5e3)},[e]),t(v,{children:t(C,{children:r(y.div,{variants:h,className:"block max-w-sm p-6 phones:w-[125px]  xl:w-[250px] border border-y-[#2c1f42] border-x-[#2f3763] rounded-lg shadow-card text-left bg-[#111d39] ",children:[t("h5",{className:" 'mb-2 text-4xl  font-bold tracking-tight '",children:e.length===0?o===0?o:t("div",{className:"px-3 py-1 text-xs font-medium leading-none text-center  rounded-full animate-pulse bg-blue-900 text-blue-200",children:o}):e.length}),t("p",{className:"font-normal text-xs xl:text-2xl text-gray-400 ",children:"Design Content"})]})})})}function K({data:e,setData:n,user:a,round:m,item:h}){const i=async()=>{try{const s=[];for(const c of m){const p=(await w.collection(c).where("CreatedBY","==",a).get()).docs.map(f=>({id:f.id,CreatedBY:f.data().CreatedBY}));s.push(...p)}n(s)}catch(s){console.error(s)}};l.useEffect(()=>{(async()=>{i()})()},[a,m]);const[o,u]=l.useState("Loading");return l.useEffect(()=>{setTimeout(()=>{u(0)},5e3)},[e]),t(v,{children:e===0?null:t(C,{children:r(y.div,{variants:h,className:"block max-w-sm p-6 phones:w-[125px] xl:w-[250px] text-white border border-y-[#2c1f42] border-x-[#2f3763] rounded-lg shadow-card text-left bg-[#111d39] ",children:[t("h5",{className:" 'mb-2 text-4xl font-bold tracking-tight ",children:e.length===0?o===0?o:t("div",{className:"px-3 py-1 text-xs font-medium leading-none text-center  rounded-full animate-pulse bg-blue-900 text-blue-200",children:o}):e.length!==0?e.length:0}),t("p",{className:"font-normal text-xs xl:text-2xl text-gray-400 ",children:"Created Content"})]})})})}function Q({user:e,setData:n,data:a,setMatchingData:m,matchingData:h,month:i}){const o=()=>{try{return w.collection("partner").onSnapshot(c=>{const d=c.docs.map(p=>({id:p.id,...p.data()}));n(d)})}catch(s){console.error("Error fetching data: ",s)}};l.useEffect(()=>{const s=o();return()=>s()},[i,e]);const u=async()=>{try{const s=a.map(f=>w.collection(f.name).doc(i).get().then(b=>{if(b.exists){const N=b.data();return Object.keys(N).map(x=>{const g=N[x];return g.user?{client:g.client,month:g.month,post:g.count,Time:g.Time,text:g.TextWrittenBy}:null}).filter(x=>x!==null).sort((x,g)=>x.order-g.order)}else return console.log("No such document!"),[]})),p=(await Promise.all(s)).flat().filter(f=>f.Time);m(p)}catch(s){console.error("Error fetching data:",s)}};return l.useEffect(()=>{u()},[i,e,a]),t(v,{children:h.length===0?t("h1",{children:"No current task"}):h.map((s,c)=>{const d=new Date(s.Time);return Math.abs(new Date-d)/36e5<=24&&t("div",{className:"max-h-500px phones:max-h-300px overflow-y-auto",children:t("ul",{children:r("li",{className:"flex flex-row gap-10 items-center justify-between",children:[r("div",{className:"flex items-center gap-1",children:[t("div",{className:"w-2 h-2 rounded-full bg-green-500"}),r("p",{className:"text-white",children:[s.client.slice(0,10),".."]})]}),t("p",{className:"text-white",children:s.month}),t("p",{className:"text-white",children:s.post}),t("p",{className:"text-white",children:s.Time.slice()})]})})},s.id||c)})})}function Z({user:e}){const[n,a]=l.useState([]),[m,h]=l.useState([]),[i,o]=l.useState(""),u=new Date,s=u.getFullYear().toString(),c=(u.getMonth()+1).toString().padStart(2,"0");return l.useEffect(()=>{o(`${s}-${c}`)},[c]),r("div",{className:"inline-flex bg-secondary flex-col mt-10 gap-5 lg:w-[35vw] border border-y-[#2c1f42] border-x-[#2f3763]  p-4 max-h-[400px] lg:max-h-[800px] overflow-y-auto",children:[r("section",{className:"flex flex-col items-start justify-between",children:[t("h2",{className:"text-white mb-2 phones:text-lg  text-2xl font-semibold",children:"Latest Task Done"}),t("input",{date:u,className:"bg-[#2f3763] text-white w-full p-2 rounded-md",type:"month",value:i,onChange:d=>o(d.target.value)}),t("hr",{className:"bg-white w-full"})]}),t(Q,{setData:a,month:i,data:n,user:e,setMatchingData:h,matchingData:m})]})}function se({user:e,level:n}){const[a,m]=l.useState([]),[h,i]=l.useState([]),[o,u]=l.useState([]),[s,c]=l.useState([]),[d,p]=l.useState([]),f={hidden:{opacity:1,scale:0},visible:{opacity:1,scale:1,transition:{delayChildren:.3,staggerChildren:.2}}},b={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return r("div",{className:" text-center text-white w-[75vw]  phones:w-auto flex items-center justify-start xl:items-start xl:justify-between flex-col lg:flex-row mb-5 mt-5 gap-10",children:[t(U,{setRound:m,user:e}),t(y.div,{className:"inline-flex phones:flex-col phones:gap-2 gap-10",variants:f,initial:"hidden",animate:"visible",children:r(y.div,{className:"",variants:b,children:[t(R,{user:e,level:n}),r("section",{className:"flex gap-3 flex-wrap justify-between phones:flex-col ",children:[n>9||e==="Saskia"?t(Z,{user:e,level:n}):null,t(W,{user:e,level:n}),t(Y,{user:e,level:n,scheduleData:d,setScheduleData:p}),n>10?t(F,{user:e}):null]}),t("section",{className:"mt-10 flex gap-5 flex-row phones:flex-col"}),r("section",{className:"mt-10 flex gap-5 items-center justify-center flex-row phones:flex-col ",children:[t(V,{user:e,setWrittenBy:c,level:n,round:a,writtenBy:s}),t(z,{user:e,setUploadedBy:u,level:n,round:a,uploadedBy:o}),t(K,{user:e,setData:i,level:n,round:a,data:h})]})]})})]})}export{se as default};
