import{r as t,j as e,m as ne,u as oe,L as le}from"./index-64ee0e06.js";import{N as q}from"./Nav-c7daedd6.js";import{U as V,f as C,_ as G,b as T,y as ce,c as H,d as R}from"./index.esm2017-42057b5a.js";import{L as de,a as ue,m as b,b as M,t as he,B as O,P as me}from"./important-b0742725.js";import{F as _}from"./Footer-f6fc9ff6.js";import{u as pe}from"./useLogo-28cee2dd.js";import{T as ge}from"./Title-8831daa5.js";import xe from"./TimeOff-dfaf6054.js";import"./PartnerLogic-d9c5f6ff.js";function fe(){const[a,f]=t.useState(""),[j,y]=t.useState("");return e.jsxs("div",{className:"emptyhomepage",children:[e.jsx(V,{setUser:f,setLevel:y}),e.jsx("div",{style:{backgroundColor:"ghostwhite"},children:e.jsx(q,{})}),e.jsxs("div",{className:"profiletextwait",children:[e.jsxs("h2",{children:[" Hello ",a,", Currently you are waiting approval from an admin "]}),e.jsx("img",{src:pe,alt:"logo",style:{margin:"0 auto"},className:"sql-logo"}),e.jsx("h3",{children:" Sed dapibus tellus at tempor feugiat. Nullam id vehicula lacus. Aliquam erat volutpat. Vestibulum fermentum hendrerit odio, non blandit metus ullamcorper vel. Nulla sed magna diam. Vestibulum semper arcu augue, et facilisis leo ornare nec. Maecenas dictum metus vel enim ultrices efficitur. "})]}),e.jsx(_,{})]})}function je({privateChat:a,setChat:f,setDesignerChat:j,setMessage:y}){const L=async()=>{try{C.collection("chat").doc(a).onSnapshot(i=>{if(i.exists){const o=i.data(),n=Object.entries(o).filter(([d])=>d!=="timestamp").sort((d,c)=>new Date(c[0])-new Date(d[0])).reduce((d,[c,p])=>({...d,[c]:p}),{});f(n)}else console.log("privateChat document does not exist"),f("")})}catch(l){console.error("Error fetching chat data:",l)}};t.useEffect(()=>{L()},[a]);const S=async()=>{try{return C.collection("designer").orderBy("timestamp","desc").onSnapshot(i=>{const o=i.docs.map(n=>({id:n.id,...n.data()}));j(o)})}catch(l){console.error("Error fetching designer chat data:",l)}};t.useEffect(()=>{S()},[]);const m=async()=>{try{return C.collection("group").orderBy("timestamp","desc").onSnapshot(i=>{const o=i.docs.map(n=>({id:n.id,...n.data()}));y(o)})}catch(l){console.error("Error fetching message data:",l)}};t.useEffect(()=>{m()},[])}function De(){ne();const[a,f]=t.useState(""),[j,y]=t.useState(""),[L,S]=t.useState(""),[m,l]=t.useState("waiting"),[i,o]=t.useState(""),[n,d]=t.useState(""),[c,p]=t.useState("waiting");oe();const[k,$]=t.useState([]),z=async()=>{try{return C.collection("admin").onSnapshot(r=>{const u=r.docs.map(x=>({id:x.id,...x.data()}));u.sort((x,ie)=>x.id-ie.id),$(u)})}catch(s){console.error("Error fetching work data:",s)}};t.useEffect(()=>{z()},[]);const[w,J]=t.useState([]),[K,Q]=t.useState([]),[X,Y]=t.useState(""),[Z,ee]=t.useState(),[h,g]=t.useState(!1),[A,N]=t.useState(""),B=k.map(s=>s.Name),P=s=>{const r=G(R,c),u=T(r,s);ce(u).then(()=>{console.log("Document successfully deleted!")}).catch(x=>{console.error("Error removing document:",x)})};function U(s){const r=G(R,"group"),u=T(r,s);H(u,{[a]:0},{merge:!0})}const F=s=>{const r=T(R,"group",s);H(r,{new:"Read"}).then(()=>{console.log("Field successfully updated")}).catch(x=>{})},[se,te]=t.useState(!1),[v,re]=t.useState(!1),[D,ae]=t.useState(!1);t.useEffect(()=>{setTimeout(()=>{te(!0)},1e3)},[]);const W=w.map(s=>s[a]).reduce((s,r)=>s+r,null),[E,I]=t.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(je,{privateChat:c,setChat:Y,setDesignerChat:Q,setMessage:J}),e.jsx(ge,{}),e.jsx(V,{setUser:f,user:a,setUuid:y,setIsAccepted:S,level:m,setLevel:l}),m===0&&e.jsx(e.Fragment,{children:e.jsx("div",{children:e.jsx(fe,{})})}),m>7?e.jsxs(e.Fragment,{children:["  ",e.jsxs("div",{className:"profile",children:[e.jsxs("div",{style:{margin:"auto",backgroundColor:"white",borderBottom:"2px solid gold"},children:[" ",e.jsx(q,{})," "]}),e.jsxs("div",{className:"real-admin-links",children:[e.jsx(de,{}),e.jsx("button",{onClick:()=>{I(E===!1)},children:" WFH "}),e.jsx("img",{className:"style-meeting",src:ue,style:{cursor:"pointer",width:"50px",height:"50px"},onClick:()=>{g(h!==!0),I(!1)}}),"  "]}),e.jsxs("div",{className:"group-text",style:h===!1?{display:"none"}:{display:"block"},children:[e.jsxs("h2",{onClick:()=>ae(D!==!0),children:[" ",D===!1?"Show Priority":"Show All","  "]}),c==="group"&&e.jsx(e.Fragment,{children:D===!0?w.map((s,r)=>e.jsxs("div",{className:"indi-group-text",onClick:()=>F(s.id),children:[" ",s.imp>""?e.jsxs("h2",{className:"style-this-h2",children:["  ",e.jsx("img",{src:b,style:{width:"40px",height:"40px"}})," ",s.text," - ",s.sendBy," "]}):null,s.imp>""?e.jsx("img",{style:{width:"50px",height:"50px",cursor:"pointer"},src:M,onClick:u=>P(s.id)}):null," ",e.jsx("hr",{})," "]},r)):w.map((s,r)=>e.jsxs("div",{className:"indi-group-text",onClick:()=>F(s.id),children:[e.jsxs("h2",{className:"style-this-h2",onClick:()=>U(s.id),children:["  ",s.imp>""?e.jsx("img",{src:b,style:{width:"40px",height:"40px"}}):null," ",s.text," - ",s.sendBy," "]}),e.jsx("img",{style:{width:"50px",height:"50px",cursor:"pointer"},src:M,onClick:u=>P(s.id)})," ",e.jsx("hr",{})," "]},r))}),c==="designer"&&e.jsx(e.Fragment,{children:K.map((s,r)=>e.jsx("div",{className:"indi-group-text",onClick:()=>F(s.id),children:e.jsxs("h2",{className:"style-this-h2",onClick:()=>U(s.id),children:["  ",s.imp>""?e.jsx("img",{src:b,style:{width:"40px",height:"40px"}}):null," ",s.text," - ",s.sendBy," "]})},r))}),c!=="group"&&e.jsx(e.Fragment,{children:c&&e.jsx(e.Fragment,{children:Object.entries(X).map(([s,r])=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},className:"style-private-chat",children:[e.jsxs("h2",{className:"indi-group-text",children:["  ",e.jsx("img",{src:he,style:{width:"20px",height:"20px",marginRight:"10px"}}),"  ",s," "]}),e.jsxs("h2",{children:["   ",r," "]}),e.jsx("hr",{style:{color:"black",width:"100px"}})]},s))})})]}),e.jsxs("form",{className:"form-private",style:h===!1?{display:"none"}:{display:"block"},onSubmit:s=>s.preventDefault(),children:[e.jsxs("label",{children:[" ",`Send message to ${A} ${v===!0&&A==="Group"?" [Priority] ":""}`," "]}),e.jsxs("div",{children:[e.jsx("textarea",{onChange:s=>d(s.target.value),value:n,className:"textarea",placeholder:"Enter"}),e.jsx("img",{src:b,onClick:()=>{re(v===!1)},className:"img-imp",style:{width:"2rem"}})]}),i==="designer"?e.jsx(O,{allUid:B,user:a,sendTo:i,text:n,uuid:j,imp:v}):null,i==="group"?e.jsx(O,{allUid:B,setText:d,user:a,sendTo:i,text:n,uuid:j,imp:v}):null,i!=="designer"&&i!=="group"?e.jsx(me,{user:a,setText:d,sendTo:i,text:n,trueChat:Z}):null]}),E===!1&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"list",children:[m>8&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:h===!0?"hidethis":"dont-hide",children:[e.jsxs("h2",{onClick:()=>{o("group"),N("Group"),p("group"),g(h!==!0)},style:{cursor:"pointer"},className:"h2-noti",children:[" Group  ",e.jsxs("p",{style:{fontSize:"14px",color:"red"},children:[" ",W>0?W:""," "]})]}),e.jsx("h2",{onClick:()=>{o("designer"),N("designer"),p("designer"),g(h!==!0)},style:{cursor:"pointer"},className:"h2-noti",children:" Designer  "}),k.map((s,r)=>e.jsx("div",{children:e.jsxs("h2",{style:{cursor:"pointer"},onClick:()=>{o("chat"+a+s.Name),p("chat"+a+s.Name),ee("chat"+s.Name+a),N(s.Name),g(h!==!0)},children:[" ",s.Name," "]},r)},r))]})}),h&&m===8&&e.jsx(e.Fragment,{children:e.jsxs("div",{style:{backgroundColor:"white",width:"125px",padding:"10px",borderRadius:"10px",color:"black"},children:[e.jsx("h2",{onClick:()=>{o("designer"),N("designer"),p("designer"),g(!1)},style:{cursor:"pointer"},className:"h2-noti",children:" Chat  "}),k.map((s,r)=>e.jsx("div",{children:e.jsxs("h2",{style:{cursor:"pointer"},onClick:()=>{o("chat"+a+s.Name),p("chat"+a+s.Name),N(s.Name),g(!1)},children:[" ",s.Name," "]},r)},r))]})})]})}),E===!0&&e.jsx(e.Fragment,{children:e.jsx(xe,{})})]}),"  ",e.jsx(_,{})," "]}):null,se===!1&&e.jsx(e.Fragment,{children:e.jsx(le,{})})]})}export{De as default};
