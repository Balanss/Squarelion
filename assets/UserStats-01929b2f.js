import{r as i,b as _,h as y,j as s,a as c,F as v,I as P,_ as M,R as O,g as C,y as j,d as T}from"./index-b76bbe34.js";import{m as w}from"./Nav-e4be1a93.js";function B(){const[e,n]=i.useState(null);return i.useEffect(()=>_.onAuthStateChanged(h=>{h?y.collection("admin").doc(h.uid).get().then(u=>{const r=u.data();n(r.dateJoined)}):(setUser(null),setLevel(null))}),[]),s("div",{className:"lg:float-right pt-6",children:s("header",{className:"text-white phones:text-md text-lg font-bold",children:c("p",{children:["Account created on: ",e]})})})}function $({user:e,level:n}){const[a,h]=i.useState(!1),u=new Date().getHours();let r;u<12?r="Good morning":u<18?r="Good afternoon":r="Good evening";const o=new Date,d="5";return c("div",{className:" p-5 border w-[75vw] phones:w-[90vw] border-y-[#2c1f42] border-x-[#2f3763] rounded-lg shadow text-left bg-[#111d39]  ",children:[c("p",{className:"text-xl xl:text-7xl text-white font-bold pb-5",children:[" ",r,",",s("br",{}),c("span",{className:"text-green-400  font-bold  text-xl  xl:text-4xl",children:[e,"!"]})]}),s("p",{className:"text-gray-400  text-xs md:text-lg",children:o.toString().slice(0,15)}),c("button",{onClick:()=>{h(!a),localStorage.setItem("showNewUpdates",d)},className:"text-white mt-2  focus:ring-4 focus:outline-none  font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center bg-blue-600 hover:bg-blue-700 focus:ring-blue-800",type:"button",children:[localStorage.getItem("showNewUpdates")===d?"No updates":"New Updates",s("svg",{className:"w-2.5 h-2.5 ms-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6",children:s("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 4 4 4-4"})})]}),a&&s("div",{className:"z-10  absolute text-black font-semibold bg-white divide-y divide-gray-100 rounded-bl-xl rounded-br-xl rounded-tl-md rounded-tr-md shadow w-44 ",children:s("ul",{className:"py-2 text-sm ",children:s("li",{children:c("h1",{className:"block px-4 py-2 max-h-[400px] overflow-auto",children:["Hello ",e,"! There have been updates to Media Pilot:",c("ul",{className:"list-disc list-inside mt-2",children:[s("li",{children:"Designers can now see how many post they have open"}),n>9&&c(v,{children:[" ",s("li",{children:" You can now select which desiger to assign  "})," "]})]})]})})})}),s(B,{user:e,level:n})]})}function F({setRound:e,user:n}){const a=async()=>{try{return y.collection("partner").onSnapshot(async u=>{const r=u.docs.map(o=>({id:o.id,...o.data()}));e(r.map(o=>o.name))})}catch{console.log("loading")}};i.useEffect(()=>{a()},[n])}function L({scheduleData:e,setScheduleData:n}){i.useEffect(()=>P(M(T,"schedule"),d=>{const t=[];d.forEach(l=>{t.push({id:l.id,...l.data()})}),t.sort((l,m)=>new Date(l.selectedDate)-new Date(m.selectedDate)),n(t)}),[]);const a=["bg-gradient-to-r from-green-700 to-green-800","bg-gradient-to-r from-blue-700 to-blue-800","bg-gradient-to-r from-indigo-700 to-indigo-800","bg-gradient-to-r from-purple-700 to-purple-800","bg-gradient-to-r from-pink-700 to-pink-800","bg-gradient-to-r from-teal-700 to-teal-800","bg-gradient-to-r from-lime-700 to-lime-800","bg-gradient-to-r from-emerald-700 to-emerald-800","bg-gradient-to-r from-fuchsia-700 to-fuchsia-800"],[h,u]=i.useState("");i.useEffect(()=>{u(a[Math.floor(Math.random()*a.length)])},[]);const r=async o=>{e.map((d,t)=>{if(t!==o)console.log("not equal");else{const l=M(T,"schedule"),m=C(l,d.id);j(m)}})};return c("div",{className:"inline-flex bg-secondary  flex-col mt-10 gap-5 lg:w-[35vw] border border-y-[#2c1f42] border-x-[#2f3763]  p-4 max-h-[400px] lg:max-h-[800px] overflow-y-auto",children:[c("section",{className:"flex flex-col items-start justify-between",children:[s("h2",{className:"text-white mb-2 phones:text-lg  text-2xl font-semibold",children:"Upcoming Events"}),s("hr",{className:"bg-white w-full"})]}),e.length===0?s("p",{className:"text-white phones:text-lg  text-2xl font-bold",children:"No events scheduled"}):e.map((o,d)=>{const t=a[Math.floor(Math.random()*a.length)],l=new Date;l.setHours(0,0,0,0);const m=new Date(o.selectedDate);return m.setDate(m.getDate()+1),m.setHours(0,0,0,0),m<l&&r(d),c(O.Fragment,{children:[c(w.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.75,delay:d*.3},className:`text-white text-xs ${t} p-2 mt-2 rounded-md inline-flex flex-col max-w-[200px] lg:max-w-[500px] break-words `,children:[c("h1",{className:"font-bold mb-2 flex justify-between",children:[o.user," ",c("span",{className:"cursor-pointer hover:text-red-700 ",onClick:()=>{const p=M(T,"schedule"),b=C(p,o.id);j(b)},children:[" ","X"," "]})," "]}),c("p",{children:[o.selectedDate.replace("T"," "),c("span",{className:"ml-1 ",children:[" @ ",o.timer,"  "]}),c("span",{className:"ml-1",children:[" | ",o.Title,"  "]})]})]}),s("hr",{className:"opacity-25"})]},d)})]})}function U({user:e,setData:n,data:a,setMatchingData:h,matchingData:u,month:r}){const o=()=>{try{return y.collection("partner").onSnapshot(l=>{const m=l.docs.map(f=>({id:f.id,...f.data()}));n(m)})}catch(t){console.error("Error fetching data: ",t)}};i.useEffect(()=>{const t=o();return()=>t()},[r]);const d=async()=>{try{const t=a.map(p=>y.collection(p.name).doc(r).get().then(b=>{if(b.exists){const N=b.data();return Object.keys(N).map(x=>{const g=N[x];return g.user?{client:g.client,AssignedTo:g.AssignedTo,month:g.month,post:g.count,Time:g.Time}:null}).filter(x=>x!==null).sort((x,g)=>x.order-g.order)}else return console.log("No such document!"),[]})),f=(await Promise.all(t)).flat().filter(p=>p.AssignedTo===e);h(f)}catch(t){console.error("Error fetching data:",t)}};return i.useEffect(()=>{d()},[r]),s(v,{children:u.length===0?s("h1",{children:"No current task"}):u.map((t,l)=>e===t.AssignedTo?s("div",{className:"max-h-500px phones:max-h-300px overflow-y-auto",children:c("li",{className:"flex flex-row items-center justify-between",children:[c("div",{className:"flex flex-row items-center gap-2",children:[s("div",{className:"w-2 h-2 rounded-full bg-green-500"}),s("p",{className:"text-white",children:t.client})]}),s("p",{className:"text-white",children:t.month}),s("p",{className:"text-white",children:t.post}),s("p",{className:"text-white",children:t.Time})]})},t.id||l):null)})}function R({user:e}){const[n,a]=i.useState([]),[h,u]=i.useState([]),[r,o]=i.useState(""),d=new Date,t=d.getFullYear().toString(),l=(d.getMonth()+1).toString().padStart(2,"0");return i.useEffect(()=>{o(`${t}-${l}`)},[l]),c("div",{className:"inline-flex bg-secondary flex-col mt-10 gap-5 lg:w-[35vw] border border-y-[#2c1f42] border-x-[#2f3763]  p-4 max-h-[400px] lg:max-h-[800px] overflow-y-auto",children:[c("section",{className:"flex flex-col items-start justify-between",children:[s("h2",{className:"text-white mb-2 phones:text-lg  text-2xl font-semibold",children:"Current Task"}),s("input",{date:d,className:"bg-[#2f3763] text-white w-full p-2 rounded-md",type:"month",value:r,onChange:m=>o(m.target.value)}),s("hr",{className:"bg-white w-full"})]}),s(U,{setData:a,month:r,data:n,user:e,setMatchingData:u,matchingData:h})]})}var Y=Object.defineProperty,W=Object.defineProperties,q=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,I=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,k=(e,n,a)=>n in e?Y(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,D=(e,n)=>{for(var a in n||(n={}))I.call(n,a)&&k(e,a,n[a]);if(A)for(var a of A(n))H.call(n,a)&&k(e,a,n[a]);return e},S=(e,n)=>W(e,q(n)),E=class extends i.Component{constructor(e){super(e),this.ref=O.createRef(),this.state={style:{}};const n={reverse:!1,max:35,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:"1.1",speed:"1000",transition:!0,axis:null,reset:!0};this.width=null,this.height=null,this.left=null,this.top=null,this.transitionTimeout=null,this.updateCall=null,this.element=null,this.settings=Object.assign({},n,this.props.options),this.reverse=this.settings.reverse?-1:1,this.onMouseEnter=this.onMouseEnter.bind(this,this.props.onMouseEnter),this.onMouseMove=this.onMouseMove.bind(this,this.props.onMouseMove),this.onMouseLeave=this.onMouseLeave.bind(this,this.props.onMouseLeave)}componentDidMount(){this.element=this.ref.current,setTimeout(()=>{this.element.parentElement.querySelector(":hover")===this.element&&this.onMouseEnter()},0)}componentWillUnmount(){clearTimeout(this.transitionTimeout),cancelAnimationFrame(this.updateCall)}onMouseEnter(e=()=>{},n){return this.updateElementPosition(),this.setState(Object.assign({},this.state,{style:S(D({},this.state.style),{willChange:"transform"})})),this.setTransition(),e(n)}reset(){window.requestAnimationFrame(()=>{this.setState(Object.assign({},this.state,{style:S(D({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)`})}))})}onMouseMove(e=()=>{},n){return n.persist(),this.updateCall!==null&&window.cancelAnimationFrame(this.updateCall),this.event=n,this.updateCall=requestAnimationFrame(this.update.bind(this,n)),e(n)}setTransition(){clearTimeout(this.transitionTimeout),this.setState(Object.assign({},this.state,{style:S(D({},this.state.style),{transition:`${this.settings.speed}ms ${this.settings.easing}`})})),this.transitionTimeout=setTimeout(()=>{this.setState(Object.assign({},this.state,{style:S(D({},this.state.style),{transition:""})}))},this.settings.speed)}onMouseLeave(e=()=>{},n){return this.setTransition(),this.settings.reset&&this.reset(),e(n)}getValues(e){const n=(e.nativeEvent.clientX-this.left)/this.width,a=(e.nativeEvent.clientY-this.top)/this.height,h=Math.min(Math.max(n,0),1),u=Math.min(Math.max(a,0),1),r=(this.reverse*(this.settings.max/2-h*this.settings.max)).toFixed(2),o=(this.reverse*(u*this.settings.max-this.settings.max/2)).toFixed(2),d=h*100,t=u*100;return{tiltX:r,tiltY:o,percentageX:d,percentageY:t}}updateElementPosition(){const e=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=e.left,this.top=e.top}update(e){const n=this.getValues(e);this.setState(Object.assign({},this.state,{style:S(D({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(${this.settings.axis==="x"?0:n.tiltY}deg) rotateY(${this.settings.axis==="y"?0:n.tiltX}deg) scale3d(${this.settings.scale}, ${this.settings.scale}, ${this.settings.scale})`})})),this.updateCall=null}render(){const e=Object.assign({},this.props.style,this.state.style);return s("div",{style:e,ref:this.ref,className:this.props.className,onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,children:this.props.children})}};function X({writtenBy:e,setWrittenBy:n,user:a,round:h,item:u}){const r=async()=>{try{const t=[];for(const l of h){const f=(await y.collection(l).where("TextWrittenBy","==",a).get()).docs.map(p=>({id:p.id,TextWrittenBy:p.data().TextWrittenBy,...p.data()}));t.push(...f)}n(t)}catch(t){console.error(t)}};i.useEffect(()=>{(async()=>{r()})()},[a,h]);const[o,d]=i.useState("Loading");return i.useEffect(()=>{setTimeout(()=>{d(0)},5e3)},[e]),s(v,{children:s(E,{children:c(w.div,{variants:u,className:"block max-w-sm p-6 phones:w-[125px]  xl:w-[250px] text-left text-white border border-y-[#2c1f42] border-x-[#2f3763] rounded-lg  bg-[#111d39] shadow-card ",children:[c("h5",{className:' "mb-2 text-4xl font-bold tracking-tight  " ',children:[e.length===0?s("div",{className:"px-3 py-1 text-xs font-medium leading-none text-center  rounded-full animate-pulse bg-blue-900 text-blue-200",children:"loading..."}):e.length!==0?e.length:0," "]}),s("p",{className:"font-normal text-xs xl:text-2xl text-gray-400 ",children:"Written Content"})]})})})}function G({uploadedBy:e,setUploadedBy:n,user:a,round:h,item:u}){const r=async()=>{try{const t=[];for(const l of h){const f=(await y.collection(l).where("DesignUploadedBy","==",a).get()).docs.map(p=>({id:p.id,DesignUploadedBy:p.data().DesignUploadedBy,...p.data()}));t.push(...f)}n(t),localStorage.setItem("uploadedBy",JSON.stringify(t))}catch(t){console.error(t)}};i.useEffect(()=>{(async()=>{r()})()},[a,h]);const[o,d]=i.useState("Loading");return i.useEffect(()=>{setTimeout(()=>{d(0)},5e3)},[e]),s(v,{children:s(E,{children:c(w.div,{variants:u,className:"block max-w-sm p-6 phones:w-[125px]  xl:w-[250px] border border-y-[#2c1f42] border-x-[#2f3763] rounded-lg shadow-card text-left bg-[#111d39] ",children:[s("h5",{className:" 'mb-2 text-4xl  font-bold tracking-tight '",children:e.length===0?o===0?o:s("div",{className:"px-3 py-1 text-xs font-medium leading-none text-center  rounded-full animate-pulse bg-blue-900 text-blue-200",children:o}):e.length}),s("p",{className:"font-normal text-xs xl:text-2xl text-gray-400 ",children:"Design Content"})]})})})}function J({data:e,setData:n,user:a,round:h,item:u}){const r=async()=>{try{const t=[];for(const l of h){const f=(await y.collection(l).where("CreatedBY","==",a).get()).docs.map(p=>({id:p.id,CreatedBY:p.data().CreatedBY}));t.push(...f)}n(t)}catch(t){console.error(t)}};i.useEffect(()=>{(async()=>{r()})()},[a,h]);const[o,d]=i.useState("Loading");return i.useEffect(()=>{setTimeout(()=>{d(0)},5e3)},[e]),s(v,{children:e===0?null:s(E,{children:c(w.div,{variants:u,className:"block max-w-sm p-6 phones:w-[125px] xl:w-[250px] text-white border border-y-[#2c1f42] border-x-[#2f3763] rounded-lg shadow-card text-left bg-[#111d39] ",children:[s("h5",{className:" 'mb-2 text-4xl font-bold tracking-tight ",children:e.length===0?o===0?o:s("div",{className:"px-3 py-1 text-xs font-medium leading-none text-center  rounded-full animate-pulse bg-blue-900 text-blue-200",children:o}):e.length!==0?e.length:0}),s("p",{className:"font-normal text-xs xl:text-2xl text-gray-400 ",children:"Created Content"})]})})})}function V({user:e,setData:n,data:a,setMatchingData:h,matchingData:u,month:r}){const o=()=>{try{return y.collection("partner").onSnapshot(l=>{const m=l.docs.map(f=>({id:f.id,...f.data()}));n(m)})}catch(t){console.error("Error fetching data: ",t)}};i.useEffect(()=>{const t=o();return()=>t()},[r,e]);const d=async()=>{try{const t=a.map(p=>y.collection(p.name).doc(r).get().then(b=>{if(b.exists){const N=b.data();return Object.keys(N).map(x=>{const g=N[x];return g.user?{client:g.client,month:g.month,post:g.count,Time:g.Time,text:g.TextWrittenBy}:null}).filter(x=>x!==null).sort((x,g)=>x.order-g.order)}else return console.log("No such document!"),[]})),f=(await Promise.all(t)).flat().filter(p=>p.Time);h(f)}catch(t){console.error("Error fetching data:",t)}};return i.useEffect(()=>{d()},[r,e,a]),s(v,{children:u.length===0?s("h1",{children:"No current task"}):u.map((t,l)=>{const m=new Date(t.Time);return Math.abs(new Date-m)/36e5<=24&&s("div",{className:"max-h-500px phones:max-h-300px overflow-y-auto",children:s("ul",{children:c("li",{className:"flex flex-row items-center justify-between",children:[s("div",{className:"w-2 h-2 rounded-full bg-green-500"}),c("p",{className:"text-white",children:[t.client.slice(0,10),".."]}),s("p",{className:"text-white",children:t.month}),s("p",{className:"text-white",children:t.post}),s("p",{className:"text-white",children:t.Time.slice(9)})]})})},t.id||l)})})}function z({user:e}){const[n,a]=i.useState([]),[h,u]=i.useState([]),[r,o]=i.useState(""),d=new Date,t=d.getFullYear().toString(),l=(d.getMonth()+1).toString().padStart(2,"0");return i.useEffect(()=>{o(`${t}-${l}`)},[l]),c("div",{className:"inline-flex bg-secondary flex-col mt-10 gap-5 lg:w-[35vw] border border-y-[#2c1f42] border-x-[#2f3763]  p-4 max-h-[400px] lg:max-h-[800px] overflow-y-auto",children:[c("section",{className:"flex flex-col items-start justify-between",children:[s("h2",{className:"text-white mb-2 phones:text-lg  text-2xl font-semibold",children:"Latest Task Done"}),s("input",{date:d,className:"bg-[#2f3763] text-white w-full p-2 rounded-md",type:"month",value:r,onChange:m=>o(m.target.value)}),s("hr",{className:"bg-white w-full"})]}),s(V,{setData:a,month:r,data:n,user:e,setMatchingData:u,matchingData:h})]})}function Z({user:e,level:n}){const[a,h]=i.useState([]),[u,r]=i.useState([]),[o,d]=i.useState([]),[t,l]=i.useState([]),[m,f]=i.useState([]),p={hidden:{opacity:1,scale:0},visible:{opacity:1,scale:1,transition:{delayChildren:.3,staggerChildren:.2}}},b={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return c("div",{className:" text-center text-white w-[75vw]  phones:w-auto flex items-center justify-start xl:items-start xl:justify-between flex-col lg:flex-row mb-5 mt-5 gap-10",children:[s(F,{setRound:h,user:e}),s(w.div,{className:"inline-flex phones:flex-col phones:gap-2 gap-10",variants:p,initial:"hidden",animate:"visible",children:c(w.div,{className:"",variants:b,children:[s($,{user:e,level:n}),c("section",{className:"flex gap-3 flex-wrap justify-between phones:flex-col ",children:[n>9||e==="Saskia"?s(z,{user:e,level:n}):null,s(R,{user:e,level:n}),s(L,{user:e,level:n,scheduleData:m,setScheduleData:f})]}),s("section",{className:"mt-10 flex gap-5 flex-row phones:flex-col"}),c("section",{className:"mt-10 flex gap-5 items-center justify-center flex-row phones:flex-col ",children:[s(X,{user:e,setWrittenBy:l,level:n,round:a,writtenBy:t}),s(G,{user:e,setUploadedBy:d,level:n,round:a,uploadedBy:o}),s(J,{user:e,setData:r,level:n,round:a,data:u})]})]})})]})}export{Z as default};
