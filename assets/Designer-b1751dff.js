import{r as o,h as K,a as r,F as R,j as e,R as Q,U as W,_ as b,g as y,c as N,d as x,y as X}from"./index-98ee9ce8.js";import{N as Y,r as k,g as v,u as S,a as D}from"./Nav-2034230f.js";import{M as Z,B as ee}from"./Box-7dbd561f.js";import{T as te}from"./Typography-203ec4af.js";function ae({setDesignerData:c}){const f=async()=>{try{return K.collection("DesignerPage").orderBy("prio","desc").onSnapshot(m=>{const p=m.docs.map(u=>({id:u.id,...u.data()}));c(p)})}catch(d){console.error("Error fetching designer data:",d)}};o.useEffect(()=>{f()},[])}function re(){return r(R,{children:[r("div",{className:"border-yellow-500 border-t-2 mt-3 bg-slate-700",children:[e("h1",{className:"text-4xl font-sans font-bold text-slate-200 text-center mt-2",children:"Squarelion Designer Page"}),e("h6",{className:"fixed bottom-1 left-2 text-[10px] text-white",children:"V 0.1"})]}),e("div",{children:r("article",{className:"flex flex-row items-stretch justify-around w-full h-full p-10 bg-gray-100  dark:bg-slate-700",children:[r("div",{className:"block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700",children:[e("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white",children:"Click upload image"}),e("p",{className:"font-normal text-gray-700 dark:text-gray-400",children:"Step 1"})]}),r("div",{className:"block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700",children:[e("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white",children:"Click finish to complete"}),e("p",{className:"font-normal text-gray-700 dark:text-gray-400",children:"Step 2 :"})]}),r("div",{className:"block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700",children:[e("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white",children:"To see the instructions click on the view button"}),e("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white",children:"For now you can only upload 1 image at a time"}),e("p",{className:"font-normal text-gray-700 dark:text-gray-400",children:"Note"})]})]})})]})}const se={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function ie(){const[c,f]=o.useState([]),[d,m]=o.useState(""),[p,u]=o.useState(""),[C,U]=o.useState(""),[oe,P]=o.useState(""),[T,I]=o.useState(""),[B,i]=o.useState(""),[M,j]=o.useState(""),[F,w]=Q.useState(!1),L=()=>w(!0),_=()=>w(!1);function $(a){c.map((t,g)=>{if(a===g){const n=k(v(),`products/${d}`),l=S(n,d);l.on("state_changed",s=>{s.bytesTransferred/s.totalBytes*100},s=>{console.error(s)},async()=>{const s=await D(l.snapshot.ref),h=b(x,"DesignerPage"),J=y(h,t.post+t.month+t.page);N(J,{designer:s},{merge:!0}),console.log("success"),i("Image has been uploaded. Click view button to view image!"),setTimeout(()=>{i("")},7e3)},{merge:!0})}else return console.log("error")})}const[A,E]=o.useState(""),[O,V]=o.useState(""),[q,H]=o.useState(""),z=async a=>{try{const t=a.target.files[0];m(t.name);const g=k(v(),`products/${t.name}`),n=S(g,t);n.on("state_changed",l=>{const s=l.bytesTransferred/l.totalBytes*100;console.log(`Upload is ${s}% done`),i("Loading")},l=>{console.error(l)},async()=>{const l=await D(n.snapshot.ref),s=b(x,"DesignerPage"),h=y(s,A+O+q);N(h,{designer:l},{merge:!0}),console.log("success"),i("Image has been uploaded. Click view button to view image!"),setTimeout(()=>{i("")},7e3)},{merge:!0}),console.log("worked")}catch{console.log("error")}};function G(a){c.map((t,g)=>{if(a===g){console.log("success",t.post);const n=b(x,t.page),l=y(n,t.post+t.month);N(l,{designer:t.designer,hide:!0,color:"#00eaff",status:"Design Done",StatusText:"Design Done",DesignUploadedBy:p},{merge:!0});const s=b(x,"DesignerPage"),h=y(s,t.post+t.month+t.page);X(h),m("")}else return console.log("error")})}return e(R,{children:r("div",{className:" h-[100vh]  bg-slate-800",children:[e(Y,{}),r("div",{className:"",children:[e(W,{user:p,setUser:u,setUuid:U,uuid:C,setLevel:P}),e("section",{children:e(re,{})}),r("div",{className:" pt-[50px]",children:[r("div",{className:"flex flex-col items-center",children:[e(ae,{setDesignerData:f}),e("section",{children:r("table",{className:"w-full text-sm text-left text-gray-300 dark:text-gray-300 shadow-md shadow-slate-800",children:[e("thead",{className:'className="text-xs  uppercase  bg-gray-700 text-gray-200',children:r("tr",{children:[e("th",{className:"px-4 py-2",children:"Image"}),e("th",{className:"px-4 py-2",children:"Date"}),e("th",{className:"px-4 py-2",children:"Client"}),e("th",{className:"px-4 py-2",children:"Priority"}),e("th",{className:"px-4 py-2",children:"Instructions"}),e("th",{className:"px-4 py-2",children:"Actions"})]})}),e("tbody",{children:c.map((a,t)=>a.hide===!0?null:r("tr",{className:"border-b bg-gray-600 border-gray-700 shadow-md hover:scale-105 shadow-black",children:[e("td",{className:"border px-4 py-2",children:e("img",{src:a.img,className:"w-[50px] h-[50px] rounded-md mr-4"})}),r("td",{className:"border px-4 py-2",children:[a.date,"-",a.month]}),e("td",{className:"border px-4 py-2",children:a.page}),e("td",{className:`border px-4 py-2 ${a.prio==="Prio"?"bg-red-600":"bg-gray-600"}`,children:a.prio}),e("td",{className:"border px-4 py-2",children:e("h1",{className:"cursor-pointer text-black  bg-white text-md border-black border-2 p-2  hover:scale-110 transition-transform ",onClick:()=>{L(),I(a.designer),j(a.subject)},children:" View "})}),e("td",{className:"border px-4 py-2",children:e("form",{onSubmit:()=>{$(t)},className:"designer-upload  mr-5 ml-4",children:r("label",{onClick:()=>{E(a.post),V(a.month),H(a.page)},className:"custom-file-upload cursor-pointer text-white bg-gray-800  hover:bg-gray-900 focus:outline-none focus:ring-4 focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-gray-800 dark:hover:bg-gray-700 dark:focus:ring-gray-700 dark:border-gray-700 lg:w-[120px]",children:[e("input",{type:"file",onChange:z}),"Upload Image"]})})}),e("td",{className:"border px-4 py-2",children:e("div",{children:a.designer===void 0?null:e("button",{onClick:()=>{G(t)},className:"bg-slate-800 text-white p-2 rounded-md hover:bg-gray-900 cursor-pointer",children:" Finish "})})})]},t))})]})})]}),e("div",{className:"fixed bottom-0 bg-slate-200 w-full  ",children:e("h2",{className:"text-xl ml-4",children:B})})]}),e(Z,{open:F,onClose:_,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",className:"max-w-[80vw] max-h-[80vw]  ",children:e(ee,{sx:se,children:r(te,{id:"modal-modal-title",variant:"h6",component:"h2",style:{textAlign:"center"},children:[M,e("img",{src:T})]})})})]})]})})}export{ie as default};
