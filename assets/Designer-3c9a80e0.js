import{r as s,h as T,a as r,F as M,j as e,R as xe,U as fe,_ as N,g as x,c as ye,m as C,d as k,y as we}from"./index-d4104e3a.js";import{N as Ne,r as I,g as U,u as R,a as P}from"./Nav-b4dbc0a3.js";import{M as ke,B as ve}from"./Box-ac7bf759.js";import{T as Se}from"./Typography-4f804e03.js";function De({setDesignerData:c}){const g=async()=>{try{return T.collection("DesignerPage").orderBy("prio","desc").onSnapshot(f=>{const h=f.docs.map(b=>({id:b.id,...b.data()}));c(h)})}catch(n){console.error("Error fetching designer data:",n)}};s.useEffect(()=>{g()},[])}function Ce(){const[c,g]=s.useState(!1);return console.log(c),r(M,{children:[r("div",{className:"border-yellow-500 border-t-2 mt-3 bg-slate-700 flex items-center w-full justify-center gap-10 p-5",children:[e("h1",{className:"text-4xl font-sans font-bold text-slate-200 text-center ",children:"Squarelion Designer Page"}),e("div",{className:"text-center bg-slate-700 ",children:e("button",{onClick:()=>g(!c),style:{backgroundColor:"#f8f9fa",color:"#333",border:"1px solid #ced4da",borderRadius:"4px",padding:"10px 20px",fontSize:"16px",cursor:"pointer",transition:"all 0.3s ease"},onMouseOver:n=>n.currentTarget.style.backgroundColor="#e9ecef",onMouseOut:n=>n.currentTarget.style.backgroundColor="#f8f9fa",children:c?"Close tooltip":"Open tooltip"})}),e("h6",{className:"fixed bottom-1 left-2 text-[10px] text-white",children:"V 0.2"})]}),e("div",{children:c&&r("article",{className:"flex flex-row items-stretch justify-around w-full h-full p-10 bg-gray-100  dark:bg-slate-700",children:[r("div",{className:"block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700",children:[e("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white",children:"Click upload image"}),e("p",{className:"font-normal text-gray-700 dark:text-gray-400",children:"Step 1"})]}),r("div",{className:"block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700",children:[e("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white",children:"Click finish to complete"}),e("p",{className:"font-normal text-gray-700 dark:text-gray-400",children:"Step 2"})]}),r("div",{className:"block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700",children:[e("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white",children:"To see the instructions click on the view button"}),e("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white",children:"For now you can only upload 4 image at a time"}),e("p",{className:"font-normal text-gray-700 dark:text-gray-400",children:"Note"})]})]})})]})}const Ie={position:"absolute",bottom:"0",top:"35%",left:"60%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4,overflow:"scroll"};function Be(){const[c,g]=s.useState([]),[n,f]=s.useState(""),[h,b]=s.useState(""),[E,B]=s.useState(""),[v,F]=s.useState(""),[j,O]=s.useState(""),[$,L]=s.useState(""),[A,_]=s.useState(""),[V,q]=s.useState(""),[z,H]=s.useState(""),[W,Y]=s.useState(""),[G,J]=s.useState(""),[K,Q]=s.useState(""),[X,Z]=s.useState(""),[ee,p]=s.useState(""),[te,ae]=s.useState(""),[Ue,se]=s.useState([]),[Re,re]=s.useState([]),[oe,S]=xe.useState(!1),le=()=>S(!0),D=()=>S(!1),y=c.filter(t=>v!==11?!t.id.endsWith("Test"):!0);function ne(t){y.map((a,u)=>{if(t===u){const o=I(U(),`products/${n}`),d=R(o,n);d.on("state_changed",l=>{const i=l.bytesTransferred/l.totalBytes*100;Z(`Uploading ${i}%`)},l=>{console.error(l)},async()=>{const l=await P(d.snapshot.ref),i=N(k,"DesignerPage"),w=x(i,a.post+a.month+a.page);ye(w,{designer:l},{merge:!0}),console.log("success"),p("Image has been uploaded. Click view button to view image!"),setTimeout(()=>{p("")},7e3)},{merge:!0})}else return console.log("error")})}const[ce,de]=s.useState(""),[ie,me]=s.useState(""),[ge,he]=s.useState(""),pe=async t=>{const a=t.target.files;if(!a||a.length>4){alert("You can only upload a maximum of 4 images at once.");return}const u=Array.from(a).map(o=>{const d=I(U(),`products/${name}/${o.name}}`),l=R(d,o);return new Promise((i,w)=>{l.on("state_changed",m=>{const be=m.bytesTransferred/m.totalBytes*100;p(`Uploading ${be}%`)},m=>{console.error("Upload Error:",m),w(m)},async()=>{const m=await P(l.snapshot.ref);i(m)})})});try{const o=await Promise.all(u),d={designer:o[0],designer1:o[1]||"",designer2:o[2]||"",designer3:o[3]||"",DesignedUploadedBy:h};await C(x(T,"DesignerPage",ce+ie+ge),d,{merge:!0}),se(o),re(a),p("Image has been uploaded. Click view button to view image!"),setTimeout(()=>{p("")},7e3)}catch(o){console.error("Error updating Firestore:",o)}};function ue(t){y.map((a,u)=>{if(t===u){console.log("success",a.post);const o=N(k,a.page),d=x(o,a.post+a.month);C(d,{designer:a.designer,designer1:a.designer1,designer2:a.designer2,designer3:a.designer3,hide:!0,color:"#00eaff",status:"Design Done",StatusText:"Design Done",DesignUploadedBy:h},{merge:!0});const l=N(k,"DesignerPage"),i=x(l,a.post+a.month+a.page);we(i),f("")}else return console.log("error")})}return e(M,{children:r("div",{className:" h-[100vh]  bg-slate-800",children:[e(Ne,{})," ",r("div",{className:"",children:[e(fe,{user:h,setUser:b,setUuid:B,uuid:E,setLevel:F}),e("section",{children:e(Ce,{level:v})}),r("div",{className:" pt-[50px]",children:[r("div",{className:"flex flex-col items-center",children:[e(De,{setDesignerData:g}),e("section",{children:r("table",{className:"w-full text-sm text-left text-gray-300 shadow-md shadow-slate-800",children:[e("thead",{className:'className="text-xs  uppercase  bg-gray-700 text-gray-200',children:r("tr",{children:[e("th",{className:"px-4 py-2",children:"Image"}),e("th",{className:"px-4 py-2",children:"Date"}),e("th",{className:"px-4 py-2",children:"Client"}),e("th",{className:"px-4 py-2",children:"Priority"}),e("th",{className:"px-4 py-2",children:"Instructions"}),e("th",{className:"px-4 py-2",children:"Actions"})]})}),e("tbody",{children:y.map((t,a)=>t.hide===!0?null:r("tr",{className:"border-b bg-gray-600 border-gray-700 shadow-md hover:scale-105 shadow-black",children:[e("td",{className:"border px-4 py-2",children:e("img",{src:t.img,className:"w-[50px] h-[50px] rounded-md mr-4"})}),r("td",{className:"border px-4 py-2",children:[t.date,"-",t.month]}),e("td",{className:"border px-4 py-2",children:t.page}),e("td",{className:`border px-4 py-2 ${t.prio==="Prio"?"bg-red-600":"bg-gray-600"}`,children:t.prio}),e("td",{className:"border px-4 py-2",children:r("h1",{className:"cursor-pointer text-black  bg-white text-md border-black border-2 p-2  hover:scale-110 transition-transform ",onClick:()=>{le(),O(t.designer),L(t.designer1),_(t.designer2),q(t.designer3),ae(t.subject),H(t.img1),Y(t.img2),J(t.img3),Q(t.img4)},children:[" ","View"," "]})}),e("td",{className:"border px-4 py-2",children:e("form",{onSubmit:()=>{ne(a)},className:"designer-upload  mr-5 ml-4",children:r("label",{onClick:()=>{de(t.post),me(t.month),he(t.page)},className:"custom-file-upload cursor-pointer text-white   hover:bg-gray-900 focus:outline-none focus:ring-4 focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 bg-gray-800 dark:hover:bg-gray-700 dark:focus:ring-gray-700 dark:border-gray-700 lg:w-[120px]",children:[e("input",{type:"file",accept:"image/*",multiple:!0,onChange:pe}),"Upload Image"]})})}),e("td",{className:"border px-4 py-2",children:e("div",{children:t.designer===void 0?null:r("button",{onClick:()=>{ue(a)},className:"bg-slate-800 text-white p-2 rounded-md hover:bg-gray-900 cursor-pointer",children:[" ","Finish"," "]})})})]},a))})]})})]}),r("div",{className:"fixed bottom-0 bg-slate-200 w-full  ",children:[e("h2",{className:"text-xl ml-4",children:X}),e("h2",{className:"text-xl ml-4",children:ee})]})]}),e(ke,{open:oe,onClose:D,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",className:"max-w-[80vw] max-h-[80vw]  ",children:e(ve,{sx:Ie,children:r(Se,{id:"modal-modal-title",variant:"h6",component:"h2",style:{textAlign:"center"},children:[e("div",{children:e("button",{className:"bg-red-700 text-white p-2 rounded-md hover:bg-red-800  mb-5 cursor-pointer",onClick:D,children:"Close"})}),r("section",{className:"flex lg:w-[90vw] flex-row items-center flex-wrap content-center  gap-5 justify-center",children:[e("img",{className:"w-[300px]",src:j}),e("img",{className:"w-[300px]",src:$}),e("img",{className:"w-[300px]",src:A}),e("img",{className:"w-[300px]",src:V}),e("hr",{className:"w-full border-2 border-black"}),r("div",{children:[te,r("div",{className:"flex flex-row items-center mt-3",children:[e("img",{className:"w-[200px]",src:z}),e("img",{className:"w-[200px]",src:W}),e("img",{className:"w-[200px]",src:G}),e("img",{className:"w-[200px]",src:K})]})]})]})]})})})]})," "]})})}export{Be as default};
