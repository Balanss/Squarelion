import{r as n,a,j as e,R as I,F as M}from"./index-cfb30d9b.js";import{N as U}from"./Nav-95e9fd4c.js";import{f as E,r as F,e as _,u as A,h as L,_ as b,d as f,b as x,c as w,y as O}from"./index.esm2017-2d204a23.js";import{M as $,B as q}from"./Box-5dcc3593.js";import{T as H}from"./Typography-00f5157e.js";import"./TransitionGroupContext-2b82bcb9.js";function V({setDesignerData:l}){const m=async()=>{try{return E.collection("DesignerPage").orderBy("prio","desc").onSnapshot(c=>{const u=c.docs.map(i=>({id:i.id,...i.data()}));l(u)})}catch(s){console.error("Error fetching designer data:",s)}};n.useEffect(()=>{m()},[])}function z(){return a("div",{className:"border-yellow-500 border-t-2 mt-3",children:[e("h1",{className:"mt-5 mb-5 ml-2",children:"Squarelion Designer Page"}),a("div",{className:"flex flex-row items-center gap-4 ml-2",children:[e("l1",{children:"Step 1 : Click choose file to upload image"}),e("l1",{children:"Step 2 : Click upload image"}),e("l1",{children:"Step 3 : Click Done to complete"})]}),a("section",{className:"mt-5 ml-2",children:[e("h1",{className:"mb-2",children:" Note to view the content click on view "}),e("h1",{children:" Note for now you can only upload 1 image at a time"})]})]})}const G={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function Z(){const[l,m]=n.useState([]),[s,c]=n.useState(""),[u,i]=n.useState(""),[k,y]=n.useState(""),[N,D]=n.useState(""),[S,v]=I.useState(!1),C=()=>v(!0),R=()=>v(!1);function j(o){l.map((t,h)=>{if(o===h){const p=F(_(),`products/${s}`),d=A(p,s);d.on("state_changed",r=>{r.bytesTransferred/r.totalBytes*100},r=>{console.error(r)},async()=>{const r=await L(d.snapshot.ref),g=b(f,"DesignerPage"),B=x(g,t.post+t.month+t.page);w(B,{designer:r},{merge:!0}),console.log("success"),y("Image has been uploaded. Click view button to view image!"),setTimeout(()=>{y("")},7e3)},{merge:!0})}else return console.log("error")})}const P=o=>{const t=o.target.files[0];c(t)};function T(o){l.map((t,h)=>{if(o===h){console.log("success",t.post);const p=b(f,t.page),d=x(p,t.post+t.month);w(d,{designer:t.designer,hide:!0,color:"#00eaff",status:"Design Done",StatusText:"Design Done"},{merge:!0});const r=b(f,"DesignerPage"),g=x(r,t.post+t.month+t.page);O(g),c("")}else return console.log("error")})}return n.useState(!1),console.log(s),a(M,{children:[e(U,{}),e("section",{children:e(z,{})}),a("div",{className:"min-h-[100vh] bg-slate-600 pt-[100px]",children:[a("div",{className:"flex flex-col items-center",children:[e(V,{setDesignerData:m}),e("section",{children:l.map((o,t)=>o.hide===!0?null:a("div",{className:"flex flex-row items-center justify-end border-black border-b-2 mb-8",children:[e("img",{src:o.img,className:"w-[50px] h-[50px] rounded-md mr-4"}),a("p",{className:"text-black  bg-white text-md border-black border-2 p-2",children:[" Post: ",o.post," "]}),a("p",{className:"text-black  bg-white text-md border-black border-2 p-2",children:[" Date : ",o.date,"-",o.month," "]}),a("p",{className:"text-black  bg-white text-md border-black border-2 p-2",children:[" Client : ",o.page," "]}),a("p",{className:`text-black text-md border-black border-2 p-2 ${o.prio==="Prio"?"bg-red-600":"bg-white"}`,children:["  ",o.prio," "]}),e("h1",{className:"cursor-pointer text-black  bg-white text-md border-black border-2 p-2  hover:scale-110 transition-transform ",onClick:()=>{C(),i(o.designer),D(o.subject)},children:" View "}),a("form",{onSubmit:()=>{j(t)},className:"designer-upload  mr-5 ml-4",children:[e("input",{type:"file",className:"mb-5 mr-5",onChange:P,style:{width:"90px"}}),s===""?null:e("button",{className:"relative inline-flex items-center justify-center p-0.5 mb-2 mr-2 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-cyan-500 to-blue-500 group-hover:from-cyan-500 group-hover:to-blue-500 hover:text-white dark:text-white focus:ring-4 focus:outline-none focus:ring-cyan-200 dark:focus:ring-cyan-800",type:"submit",children:e("span",{className:" relative px-5 py-2.5 transition-all ease-in duration-75 bg-white dark:bg-gray-900 rounded-md group-hover:bg-opacity-0",children:"Click to Upload Image"})})]}),e("div",{children:o.designer===void 0?null:e("button",{className:"relative inline-flex items-center justify-center p-0.5 mb-2 mr-2 overflow-hidden text-sm font-medium text-gray-900 rounded-lg group bg-gradient-to-br from-cyan-500 to-blue-500 group-hover:from-cyan-500 group-hover:to-blue-500 hover:text-white dark:text-white focus:ring-4 focus:outline-none focus:ring-cyan-200 dark:focus:ring-cyan-800",onClick:()=>{T(t)},children:e("span",{className:" relative px-5 py-2.5 transition-all ease-in duration-75 bg-white dark:bg-gray-900 rounded-md group-hover:bg-opacity-0",children:"Complete Design"})})})]},t))})]}),e("div",{className:"fixed bottom-0 bg-slate-200 w-full  ",children:e("h2",{className:"text-xl ml-4",children:k})})]}),e($,{open:S,onClose:R,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",className:"max-w-[80vw] max-h-[80vw]  ",children:e(q,{sx:G,children:a(H,{id:"modal-modal-title",variant:"h6",component:"h2",style:{textAlign:"center"},children:[N,e("img",{src:u})]})})})]})}export{Z as default};
